(self.webpackChunk_fiagram_docs=self.webpackChunk_fiagram_docs||[]).push([[554],{15378:function(H,f,l){"use strict";l.r(f),l.d(f,{demos:function(){return S}});var v=l(29008),L=l.n(v),A=l(70958),j=l.n(A),_=l(92379),S={"src-example-demo-base":{component:_.memo(_.lazy(function(){return l.e(433).then(l.bind(l,70931))})),asset:{type:"BLOCK",id:"src-example-demo-base",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:l(9747).Z},react:{type:"NPM",value:"18.3.1"},"@fiagram/react":{type:"NPM",value:"0.1.0"}},entry:"index.tsx"},context:{react:l(92379),"@fiagram/react":l(56729)},renderOpts:{compile:function(){var P=j()(L()().mark(function R(){var G,w=arguments;return L()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,l.e(729).then(l.bind(l,3729));case 2:return b.abrupt("return",(G=b.sent).default.apply(G,w));case 3:case"end":return b.stop()}},R)}));function N(){return P.apply(this,arguments)}return N}()}}}},16963:function(H,f,l){"use strict";l.r(f),l.d(f,{texts:function(){return v}});const v=[{value:"\u57FA\u7840\u529F\u80FD\u6F14\u793A",paraId:0,tocIndex:0}]},44675:function(H){var f=H.exports={},l,v;function L(){throw new Error("setTimeout has not been defined")}function A(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=L}catch(m){l=L}try{typeof clearTimeout=="function"?v=clearTimeout:v=A}catch(m){v=A}})();function j(m){if(l===setTimeout)return setTimeout(m,0);if((l===L||!l)&&setTimeout)return l=setTimeout,setTimeout(m,0);try{return l(m,0)}catch(C){try{return l.call(null,m,0)}catch(E){return l.call(this,m,0)}}}function _(m){if(v===clearTimeout)return clearTimeout(m);if((v===A||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(m);try{return v(m)}catch(C){try{return v.call(null,m)}catch(E){return v.call(this,m)}}}var S=[],P=!1,N,R=-1;function G(){!P||!N||(P=!1,N.length?S=N.concat(S):R=-1,S.length&&w())}function w(){if(!P){var m=j(G);P=!0;for(var C=S.length;C;){for(N=S,S=[];++R<C;)N&&N[R].run();R=-1,C=S.length}N=null,P=!1,_(m)}}f.nextTick=function(m){var C=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)C[E-1]=arguments[E];S.push(new M(m,C)),S.length===1&&!P&&j(w)};function M(m,C){this.fun=m,this.array=C}M.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={};function b(){}f.on=b,f.addListener=b,f.once=b,f.off=b,f.removeListener=b,f.removeAllListeners=b,f.emit=b,f.prependListener=b,f.prependOnceListener=b,f.listeners=function(m){return[]},f.binding=function(m){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(m){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},9747:function(H,f){"use strict";f.Z=`import React, { type FC } from 'react'
import { Diagram } from '@fiagram/react'

const NodeShape: FC = ({ x, y, width, height, name }: any) => {
  return (
    <g>
      <rect x={x} y={y} width={width} height={height} fill="white" stroke="black" />
      <text x={x + width / 2} y={y + height / 2} textAnchor="middle" alignmentBaseline="middle">{name}</text>
    </g>
  )
}

const App: FC = () => {
  return (
    <Diagram
      shapes={[
        { name: 'node1', shape: NodeShape },
      ]}
      nodes={[
        { id: '1', x: 100, y: 10, shape: 'node1', width: 100, height: 100, label: 'Node 1' },
        { id: '2', x: 300, y: 100, shape: 'node1', width: 100, height: 100, label: 'Node 2' },
        { id: '3', x: 500, y: 100, shape: 'node1', width: 100, height: 100, label: 'Node 3' },
      ]}
      edges={[
        { id: '1', type: 'brokenRounded', source: '1', sourceDirection: 'bottom', target: '2', targetDirection: 'top', label: 'Link 1' },
        { id: '2', type: 'brokenRounded', source: '2', sourceDirection: 'bottom', target: '3', targetDirection: 'top', label: 'Link 2' },
      ]}
    />
  )
}

export default App
`},56729:function(H,f,l){"use strict";l.r(f),l.d(f,{Diagram:function(){return yr}});var v=l(92379),L=l(44675);function A(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j={exports:{}},_={};var S;function P(){if(S)return _;S=1;var t=v,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(a,u,g){var h,y={},T=null,c=null;g!==void 0&&(T=""+g),u.key!==void 0&&(T=""+u.key),u.ref!==void 0&&(c=u.ref);for(h in u)o.call(u,h)&&!i.hasOwnProperty(h)&&(y[h]=u[h]);if(a&&a.defaultProps)for(h in u=a.defaultProps,u)y[h]===void 0&&(y[h]=u[h]);return{$$typeof:e,type:a,key:T,ref:c,props:y,_owner:n.current}}return _.Fragment=r,_.jsx=s,_.jsxs=s,_}var N={};var R;function G(){return R||(R=1),N}j.exports=P();var w=j.exports,M={exports:{}};(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var i="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(i=n(i,o(a)))}return i}function o(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var a in i)e.call(i,a)&&i[a]&&(s=n(s,a));return s}function n(i,s){return s?i?i+" "+s:i+s:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(M);var b=M.exports;const m=A(b),C=(0,v.createContext)({dragDropManager:void 0});function E(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var ue=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),V=function(){return Math.random().toString(36).substring(7).split("").join(".")},ce={INIT:"@@redux/INIT"+V(),REPLACE:"@@redux/REPLACE"+V(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+V()}};function Ae(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Tr(t){if(t===void 0)return"undefined";if(t===null)return"null";var e=typeof t;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(t))return"array";if(Ue(t))return"date";if(Me(t))return"error";var r=je(t);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}function je(t){return typeof t.constructor=="function"?t.constructor.name:null}function Me(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function Ue(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function Dr(t){var e=typeof t;return e}function le(t,e,r){var o;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(E(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(E(1));return r(le)(t,e)}if(typeof t!="function")throw new Error(E(2));var n=t,i=e,s=[],a=s,u=!1;function g(){a===s&&(a=s.slice())}function h(){if(u)throw new Error(E(3));return i}function y(p){if(typeof p!="function")throw new Error(E(4));if(u)throw new Error(E(5));var O=!0;return g(),a.push(p),function(){if(O){if(u)throw new Error(E(6));O=!1,g();var D=a.indexOf(p);a.splice(D,1),s=null}}}function T(p){if(!Ae(p))throw new Error(E(7));if(typeof p.type>"u")throw new Error(E(8));if(u)throw new Error(E(9));try{u=!0,i=n(i,p)}finally{u=!1}for(var O=s=a,D=0;D<O.length;D++){var k=O[D];k()}return p}function c(p){if(typeof p!="function")throw new Error(E(10));n=p,T({type:ce.REPLACE})}function I(){var p,O=y;return p={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(E(11));function k(){D.next&&D.next(h())}k();var ae=O(k);return{unsubscribe:ae}}},p[ue]=function(){return this},p}return T({type:ce.INIT}),o={dispatch:T,subscribe:y,getState:h,replaceReducer:c},o[ue]=I,o}function d(t,e,...r){if(ke()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let o;if(e===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;o=new Error(e.replace(/%s/g,function(){return r[n++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}}function ke(){return typeof L<"u"&&!0}function He(t,e,r){return e.split(".").reduce((o,n)=>o&&o[n]?o[n]:r||null,t)}function Ge(t,e){return t.filter(r=>r!==e)}function de(t){return typeof t=="object"}function Fe(t,e){const r=new Map,o=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(o),e.forEach(o);const n=[];return r.forEach((i,s)=>{i===1&&n.push(s)}),n}function Be(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Q="dnd-core/INIT_COORDS",B="dnd-core/BEGIN_DRAG",Z="dnd-core/PUBLISH_DRAG_SOURCE",W="dnd-core/HOVER",K="dnd-core/DROP",X="dnd-core/END_DRAG";function fe(t,e){return{type:Q,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const We={type:Q,payload:{clientOffset:null,sourceClientOffset:null}};function Ke(t){return function(e=[],r={publishSource:!0}){const{publishSource:o=!0,clientOffset:n,getSourceClientOffset:i}=r,s=t.getMonitor(),a=t.getRegistry();t.dispatch(fe(n)),Xe(e,s,a);const u=ze(e,s);if(u==null){t.dispatch(We);return}let g=null;if(n){if(!i)throw new Error("getSourceClientOffset must be defined");$e(i),g=i(u)}t.dispatch(fe(n,g));const h=a.getSource(u).beginDrag(s,u);if(h==null)return;Ye(h),a.pinSource(u);const y=a.getSourceType(u);return{type:B,payload:{itemType:y,item:h,sourceId:u,clientOffset:n||null,sourceClientOffset:g||null,isSourcePublic:!!o}}}}function Xe(t,e,r){d(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(o){d(r.getSource(o),"Expected sourceIds to be registered.")})}function $e(t){d(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ye(t){d(de(t),"Item must be an object.")}function ze(t,e){let r=null;for(let o=t.length-1;o>=0;o--)if(e.canDragSource(t[o])){r=t[o];break}return r}function Ve(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Ve(t,n,r[n])})}return t}function Ze(t){return function(e={}){const r=t.getMonitor(),o=t.getRegistry();Je(r),tt(r).forEach((n,i)=>{const s=qe(n,i,o,r),a={type:K,payload:{dropResult:Qe({},e,s)}};t.dispatch(a)})}}function Je(t){d(t.isDragging(),"Cannot call drop while not dragging."),d(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function qe(t,e,r,o){const n=r.getTarget(t);let i=n?n.drop(o,t):void 0;return et(i),typeof i>"u"&&(i=e===0?{}:o.getDropResult()),i}function et(t){d(typeof t>"u"||de(t),"Drop result must either be an object or undefined.")}function tt(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function rt(t){return function(){const e=t.getMonitor(),r=t.getRegistry();nt(e);const o=e.getSourceId();return o!=null&&(r.getSource(o,!0).endDrag(e,o),r.unpinSource()),{type:X}}}function nt(t){d(t.isDragging(),"Cannot call endDrag while not dragging.")}function J(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function ot(t){return function(e,{clientOffset:r}={}){it(e);const o=e.slice(0),n=t.getMonitor(),i=t.getRegistry(),s=n.getItemType();return at(o,i,s),st(o,n,i),ut(o,n,i),{type:W,payload:{targetIds:o,clientOffset:r||null}}}}function it(t){d(Array.isArray(t),"Expected targetIds to be an array.")}function st(t,e,r){d(e.isDragging(),"Cannot call hover while not dragging."),d(!e.didDrop(),"Cannot call hover after drop.");for(let o=0;o<t.length;o++){const n=t[o];d(t.lastIndexOf(n)===o,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(n);d(i,"Expected targetIds to be registered.")}}function at(t,e,r){for(let o=t.length-1;o>=0;o--){const n=t[o],i=e.getTargetType(n);J(i,r)||t.splice(o,1)}}function ut(t,e,r){t.forEach(function(o){r.getTarget(o).hover(e,o)})}function ct(t){return function(){if(t.getMonitor().isDragging())return{type:Z}}}function lt(t){return{beginDrag:Ke(t),publishDragSource:ct(t),hover:ot(t),drop:Ze(t),endDrag:rt(t)}}class dt{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function o(i){return(...s)=>{const a=i.apply(e,s);typeof a<"u"&&r(a)}}const n=lt(this);return Object.keys(n).reduce((i,s)=>{const a=n[s];return i[s]=o(a),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const o=this.store.getState().refCount>0;this.backend&&(o&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!o&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function ft(t,e){return{x:t.x+e.x,y:t.y+e.y}}function he(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ht(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:o}=t;return!e||!r||!o?null:he(ft(e,o),r)}function gt(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:he(e,r)}const F=[],q=[];F.__IS_NONE__=!0,q.__IS_ALL__=!0;function pt(t,e){return t===F?!1:t===q||typeof e>"u"?!0:Be(e,t).length>0}class mt{subscribeToStateChange(e,r={}){const{handlerIds:o}=r;d(typeof e=="function","listener must be a function."),d(typeof o>"u"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;const i=()=>{const s=this.store.getState(),a=s.stateId;try{a===n||a===n+1&&!pt(s.dirtyHandlerIds,o)||e()}finally{n=a}};return this.store.subscribe(i)}subscribeToOffsetChange(e){d(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const o=()=>{const n=this.store.getState().dragOffset;n!==r&&(r=n,e())};return this.store.subscribe(o)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return d(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(d(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const o=this.registry.getTargetType(e),n=this.getItemType();return J(o,n)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(d(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const o=this.registry.getSourceType(e),n=this.getItemType();return o!==n?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:o}=r;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!J(n,i))return!1;const s=this.getTargetIds();if(!s.length)return!1;const a=s.indexOf(e);return o?a===s.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return ht(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return gt(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const ge=typeof global<"u"?global:self,pe=ge.MutationObserver||ge.WebKitMutationObserver;function me(t){return function(){const e=setTimeout(o,0),r=setInterval(o,50);function o(){clearTimeout(e),clearInterval(r),t()}}}function vt(t){let e=1;const r=new pe(t),o=document.createTextNode("");return r.observe(o,{characterData:!0}),function(){e=-e,o.data=e}}const yt=typeof pe=="function"?vt:me;class Tt{enqueueTask(e){const{queue:r,requestFlush:o}=this;r.length||(o(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let o=0,n=e.length-this.index;o<n;o++)e[o]=e[o+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=yt(this.flush),this.requestErrorThrow=me(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Dt{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Et{create(e){const r=this.freeTasks,o=r.length?r.pop():new Dt(this.onError,n=>r[r.length]=n);return o.task=e,o}constructor(e){this.onError=e,this.freeTasks=[]}}const ve=new Tt,Ot=new Et(ve.registerPendingError);function bt(t){ve.enqueueTask(Ot.create(t))}const ee="dnd-core/ADD_SOURCE",te="dnd-core/ADD_TARGET",re="dnd-core/REMOVE_SOURCE",$="dnd-core/REMOVE_TARGET";function St(t){return{type:ee,payload:{sourceId:t}}}function It(t){return{type:te,payload:{targetId:t}}}function wt(t){return{type:re,payload:{sourceId:t}}}function Ct(t){return{type:$,payload:{targetId:t}}}function xt(t){d(typeof t.canDrag=="function","Expected canDrag to be a function."),d(typeof t.beginDrag=="function","Expected beginDrag to be a function."),d(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Nt(t){d(typeof t.canDrop=="function","Expected canDrop to be a function."),d(typeof t.hover=="function","Expected hover to be a function."),d(typeof t.drop=="function","Expected beginDrag to be a function.")}function ne(t,e){if(e&&Array.isArray(t)){t.forEach(r=>ne(r,!1));return}d(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var x;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(x||(x={}));let _t=0;function Pt(){return _t++}function Rt(t){const e=Pt().toString();switch(t){case x.SOURCE:return`S${e}`;case x.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function ye(t){switch(t[0]){case"S":return x.SOURCE;case"T":return x.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function Te(t,e){const r=t.entries();let o=!1;do{const{done:n,value:[,i]}=r.next();if(i===e)return!0;o=!!n}while(!o);return!1}class Lt{addSource(e,r){ne(e),xt(r);const o=this.addHandler(x.SOURCE,e,r);return this.store.dispatch(St(o)),o}addTarget(e,r){ne(e,!0),Nt(r);const o=this.addHandler(x.TARGET,e,r);return this.store.dispatch(It(o)),o}containsHandler(e){return Te(this.dragSources,e)||Te(this.dropTargets,e)}getSource(e,r=!1){return d(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return d(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return d(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return d(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ye(e)===x.SOURCE}isTargetId(e){return ye(e)===x.TARGET}removeSource(e){d(this.getSource(e),"Expected an existing source."),this.store.dispatch(wt(e)),bt(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){d(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Ct(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);d(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){d(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,o){const n=Rt(e);return this.types.set(n,r),e===x.SOURCE?this.dragSources.set(n,o):e===x.TARGET&&this.dropTargets.set(n,o),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const At=(t,e)=>t===e;function jt(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Mt(t,e,r=At){if(t.length!==e.length)return!1;for(let o=0;o<t.length;++o)if(!r(t[o],e[o]))return!1;return!0}function Ut(t=F,e){switch(e.type){case W:break;case ee:case te:case $:case re:return F;case B:case Z:case X:case K:default:return q}const{targetIds:r=[],prevTargetIds:o=[]}=e.payload,n=Fe(r,o);if(!(n.length>0||!Mt(r,o)))return F;const i=o[o.length-1],s=r[r.length-1];return i!==s&&(i&&n.push(i),s&&n.push(s)),n}function kt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ht(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){kt(t,n,r[n])})}return t}const De={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Gt(t=De,e){const{payload:r}=e;switch(e.type){case Q:case B:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case W:return jt(t.clientOffset,r.clientOffset)?t:Ht({},t,{clientOffset:r.clientOffset});case X:case K:return De;default:return t}}function Ft(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Ft(t,n,r[n])})}return t}const Bt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Wt(t=Bt,e){const{payload:r}=e;switch(e.type){case B:return U({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Z:return U({},t,{isSourcePublic:!0});case W:return U({},t,{targetIds:r.targetIds});case $:return t.targetIds.indexOf(r.targetId)===-1?t:U({},t,{targetIds:Ge(t.targetIds,r.targetId)});case K:return U({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case X:return U({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Kt(t=0,e){switch(e.type){case ee:case te:return t+1;case re:case $:return t-1;default:return t}}function Xt(t=0){return t+1}function $t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){$t(t,n,r[n])})}return t}function zt(t={},e){return{dirtyHandlerIds:Ut(t.dirtyHandlerIds,{type:e.type,payload:Yt({},e.payload,{prevTargetIds:He(t,"dragOperation.targetIds",[])})}),dragOffset:Gt(t.dragOffset,e),refCount:Kt(t.refCount,e),dragOperation:Wt(t.dragOperation,e),stateId:Xt(t.stateId)}}function Vt(t,e=void 0,r={},o=!1){const n=Qt(o),i=new mt(n,new Lt(n)),s=new dt(n,i),a=t(s,e,r);return s.receiveBackend(a),s}function Qt(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return le(zt,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Zt(t,e){if(t==null)return{};var r=Jt(t,e),o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function Jt(t,e){if(t==null)return{};var r={},o=Object.keys(t),n,i;for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}let Ee=0;const Y=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var qt=(0,v.memo)(function(t){var{children:e}=t,r=Zt(t,["children"]);const[o,n]=er(r);return(0,v.useEffect)(()=>{if(n){const i=Oe();return++Ee,()=>{--Ee===0&&(i[Y]=null)}}},[]),w.jsx(C.Provider,{value:o,children:e})});function er(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=tr(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function tr(t,e=Oe(),r,o){const n=e;return n[Y]||(n[Y]={dragDropManager:Vt(t,e,r,o)}),n[Y]}function Oe(){return typeof global<"u"?global:window}function be(t){let e=null;return()=>(e==null&&(e=t()),e)}function rr(t,e){return t.filter(r=>r!==e)}function nr(t,e){const r=new Set,o=i=>r.add(i);t.forEach(o),e.forEach(o);const n=[];return r.forEach(i=>n.push(i)),n}class or{enter(e){const r=this.entered.length,o=n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e));return this.entered=nr(this.entered.filter(o),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=rr(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class ir{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(o=>{const n=this.config.exposeProperties[o];n!=null&&(r[o]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Se="__NATIVE_FILE__",Ie="__NATIVE_URL__",we="__NATIVE_TEXT__",Ce="__NATIVE_HTML__",xe=Object.freeze(Object.defineProperty({__proto__:null,FILE:Se,HTML:Ce,TEXT:we,URL:Ie},Symbol.toStringTag,{value:"Module"}));function oe(t,e,r){const o=e.reduce((n,i)=>n||t.getData(i),"");return o!=null?o:r}const ie={[Se]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Ce]:{exposeProperties:{html:(t,e)=>oe(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Ie]:{exposeProperties:{urls:(t,e)=>oe(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[we]:{exposeProperties:{text:(t,e)=>oe(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function sr(t,e){const r=ie[t];if(!r)throw new Error(`native type ${t} has no configuration`);const o=new ir(r);return o.loadDataTransfer(e),o}function se(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(ie).filter(r=>{const o=ie[r];return o!=null&&o.matchesTypes?o.matchesTypes.some(n=>e.indexOf(n)>-1):!1})[0]||null}const ar=be(()=>/firefox/i.test(navigator.userAgent)),Ne=be(()=>!!window.safari);class _e{interpolate(e){const{xs:r,ys:o,c1s:n,c2s:i,c3s:s}=this;let a=r.length-1;if(e===r[a])return o[a];let u=0,g=s.length-1,h;for(;u<=g;){h=Math.floor(.5*(u+g));const c=r[h];if(c<e)u=h+1;else if(c>e)g=h-1;else return o[h]}a=Math.max(0,g);const y=e-r[a],T=y*y;return o[a]+n[a]*y+i[a]*T+s[a]*y*T}constructor(e,r){const{length:o}=e,n=[];for(let c=0;c<o;c++)n.push(c);n.sort((c,I)=>e[c]<e[I]?-1:1);const i=[],s=[];let a,u;for(let c=0;c<o-1;c++)a=e[c+1]-e[c],u=r[c+1]-r[c],i.push(a),s.push(u/a);const g=[s[0]];for(let c=0;c<i.length-1;c++){const I=s[c],p=s[c+1];if(I*p<=0)g.push(0);else{a=i[c];const O=i[c+1],D=a+O;g.push(3*D/((D+O)/I+(D+a)/p))}}g.push(s[s.length-1]);const h=[],y=[];let T;for(let c=0;c<g.length-1;c++){T=s[c];const I=g[c],p=1/i[c],O=I+g[c+1]-T-T;h.push((T-I-O)*p),y.push(O*p*p)}this.xs=e,this.ys=r,this.c1s=g,this.c2s=h,this.c3s=y}}const ur=1;function Pe(t){const e=t.nodeType===ur?t:t.parentElement;if(!e)return null;const{top:r,left:o}=e.getBoundingClientRect();return{x:o,y:r}}function z(t){return{x:t.clientX,y:t.clientY}}function cr(t){var e;return t.nodeName==="IMG"&&(ar()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function lr(t,e,r,o){let n=t?e.width:r,i=t?e.height:o;return Ne()&&t&&(i/=window.devicePixelRatio,n/=window.devicePixelRatio),{dragPreviewWidth:n,dragPreviewHeight:i}}function dr(t,e,r,o,n){const i=cr(e),s=Pe(i?t:e),a={x:r.x-s.x,y:r.y-s.y},{offsetWidth:u,offsetHeight:g}=t,{anchorX:h,anchorY:y}=o,{dragPreviewWidth:T,dragPreviewHeight:c}=lr(i,e,u,g),I=()=>{let Le=new _e([0,.5,1],[a.y,a.y/g*c,a.y+c-g]).interpolate(y);return Ne()&&i&&(Le+=(window.devicePixelRatio-1)*c),Le},p=()=>new _e([0,.5,1],[a.x,a.x/u*T,a.x+T-u]).interpolate(h),{offsetX:O,offsetY:D}=n,k=O===0||O,ae=D===0||D;return{x:k?O:p(),y:ae?D:I()}}class fr{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function hr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Re(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){hr(t,n,r[n])})}return t}class gr{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,o){return this.sourcePreviewNodeOptions.set(e,o),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,o){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,o);const n=s=>this.handleDragStart(s,e),i=s=>this.handleSelectStart(s);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",n),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",n),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const o=s=>this.handleDragEnter(s,e),n=s=>this.handleDragOver(s,e),i=s=>this.handleDrop(s,e);return r.addEventListener("dragenter",o),r.addEventListener("dragover",n),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",o),r.removeEventListener("dragover",n),r.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return Re({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return Re({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(xe).some(r=>xe[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=sr(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var o;return(o=this.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,o){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=n=>{const i=this.sourceNodes.get(n);return i&&Pe(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=n=>!!(n&&this.document&&this.document.body&&this.document.body.contains(n)),this.endDragIfSourceWasRemovedFromDOM=()=>{const n=this.currentDragSourceNode;n==null||this.isNodeInDocument(n)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=n=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(n||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=n=>{if(n.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const s=z(n);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:a}=n,u=se(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const h=this.monitor.getSourceId(),y=this.sourceNodes.get(h),T=this.sourcePreviewNodes.get(h)||y;if(T){const{anchorX:c,anchorY:I,offsetX:p,offsetY:O}=this.getCurrentSourcePreviewNodeOptions(),D=dr(y,T,s,{anchorX:c,anchorY:I},{offsetX:p,offsetY:O});a.setDragImage(T,D.x,D.y)}}try{a==null||a.setData("application/json",{})}catch(h){}this.setCurrentDragSourceNode(n.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(a&&!a.types&&(n.target&&!n.target.hasAttribute||!n.target.hasAttribute("draggable")))return;n.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=n=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}if(!this.enterLeaveCounter.enter(n.target)||this.monitor.isDragging())return;const{dataTransfer:s}=n,a=se(s);a&&this.beginDragNativeItem(a,s)},this.handleTopDragEnter=n=>{const{dragEnterTargetIds:i}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=n.altKey,i.length>0&&this.actions.hover(i,{clientOffset:z(n)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=n=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}},this.handleTopDragOver=n=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none");return}this.altKeyPressed=n.altKey,this.lastClientOffset=z(n),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?n.preventDefault():(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=n=>{this.isDraggingNativeItem()&&n.preventDefault(),this.enterLeaveCounter.leave(n.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=n=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;n.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}else se(n.dataTransfer)&&n.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=n=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:z(n)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=n=>{const i=n.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(n.preventDefault(),i.dragDrop()))},this.options=new fr(r,o),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new or(this.isNodeInDocument)}}const pr=function(t,e,r){return new gr(t,e,r)},mr=(0,v.forwardRef)((t,e)=>{const{hideGrid:r}=t;return(0,v.useImperativeHandle)(e,()=>({})),w.jsx("div",{className:m("fiagram-grid",{hideGrid:r}),children:"\u753B\u5E03"})}),vr=({hideTools:t})=>t?null:w.jsx("div",{className:"fiagram-tools",children:"Tools"}),yr=t=>{const{style:e,className:r,hideTools:o,canvasClassName:n,canvasStyle:i,onLoad:s,hideGrid:a}=t,u=(0,v.useRef)(null);return w.jsx(qt,{backend:pr,children:w.jsxs("div",{style:e,className:m("fiagram-wrapper",r,{hideTools:o}),children:["1231",w.jsx(vr,{}),w.jsx(mr,{ref:u,className:n,style:i,onLoad:s,hideGrid:a})]})})}}}]);
