!(function(){var XA=Object.defineProperty,HA=Object.defineProperties;var WA=Object.getOwnPropertyDescriptors;var Tu=Object.getOwnPropertySymbols;var o0=Object.prototype.hasOwnProperty,a0=Object.prototype.propertyIsEnumerable;var i0=(Kt,pt,ft)=>pt in Kt?XA(Kt,pt,{enumerable:!0,configurable:!0,writable:!0,value:ft}):Kt[pt]=ft,Z=(Kt,pt)=>{for(var ft in pt||(pt={}))o0.call(pt,ft)&&i0(Kt,ft,pt[ft]);if(Tu)for(var ft of Tu(pt))a0.call(pt,ft)&&i0(Kt,ft,pt[ft]);return Kt},Mt=(Kt,pt)=>HA(Kt,WA(pt));var jr=(Kt,pt)=>{var ft={};for(var E in Kt)o0.call(Kt,E)&&pt.indexOf(E)<0&&(ft[E]=Kt[E]);if(Kt!=null&&Tu)for(var E of Tu(Kt))pt.indexOf(E)<0&&a0.call(Kt,E)&&(ft[E]=Kt[E]);return ft};(self.webpackChunk_fiagram_docs=self.webpackChunk_fiagram_docs||[]).push([[554],{51317:function(Kt,pt,ft){"use strict";ft.r(pt),ft.d(pt,{demos:function(){return Ve}});var E=ft(29008),zn=ft.n(E),Lr=ft(70958),ci=ft.n(Lr),Mr=ft(92379),Ve={"src-example-demo-base":{component:Mr.memo(Mr.lazy(function(){return ft.e(433).then(ft.bind(ft,8462))})),asset:{type:"BLOCK",id:"src-example-demo-base",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:ft(41381).Z},react:{type:"NPM",value:"18.3.1"},"@fiagram/react":{type:"NPM",value:"0.1.0"}},entry:"index.tsx"},context:{react:ft(92379),"@fiagram/react":ft(62666)},renderOpts:{compile:function(){var _e=ci()(zn()().mark(function Ye(){var Fn,sn=arguments;return zn()().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Yt.next=2,ft.e(778).then(ft.bind(ft,57778));case 2:return Yt.abrupt("return",(Fn=Yt.sent).default.apply(Fn,sn));case 3:case"end":return Yt.stop()}},Ye)}));function ye(){return _e.apply(this,arguments)}return ye}()}},"src-example-demo-customtools":{component:Mr.memo(Mr.lazy(function(){return ft.e(433).then(ft.bind(ft,99227))})),asset:{type:"BLOCK",id:"src-example-demo-customtools",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:ft(20520).Z},react:{type:"NPM",value:"18.3.1"},"@fiagram/react":{type:"NPM",value:"0.1.0"}},entry:"index.tsx"},context:{react:ft(92379),"@fiagram/react":ft(62666)},renderOpts:{compile:function(){var _e=ci()(zn()().mark(function Ye(){var Fn,sn=arguments;return zn()().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Yt.next=2,ft.e(778).then(ft.bind(ft,57778));case 2:return Yt.abrupt("return",(Fn=Yt.sent).default.apply(Fn,sn));case 3:case"end":return Yt.stop()}},Ye)}));function ye(){return _e.apply(this,arguments)}return ye}()}}}},60679:function(Kt,pt,ft){"use strict";ft.r(pt),ft.d(pt,{texts:function(){return E}});const E=[]},44675:function(Kt){var pt=Kt.exports={},ft,E;function zn(){throw new Error("setTimeout has not been defined")}function Lr(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ft=setTimeout:ft=zn}catch(Gt){ft=zn}try{typeof clearTimeout=="function"?E=clearTimeout:E=Lr}catch(Gt){E=Lr}})();function ci(Gt){if(ft===setTimeout)return setTimeout(Gt,0);if((ft===zn||!ft)&&setTimeout)return ft=setTimeout,setTimeout(Gt,0);try{return ft(Gt,0)}catch(qe){try{return ft.call(null,Gt,0)}catch(hi){return ft.call(this,Gt,0)}}}function Mr(Gt){if(E===clearTimeout)return clearTimeout(Gt);if((E===Lr||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(Gt);try{return E(Gt)}catch(qe){try{return E.call(null,Gt)}catch(hi){return E.call(this,Gt)}}}var Ve=[],_e=!1,ye,Ye=-1;function Fn(){!_e||!ye||(_e=!1,ye.length?Ve=ye.concat(Ve):Ye=-1,Ve.length&&sn())}function sn(){if(!_e){var Gt=ci(Fn);_e=!0;for(var qe=Ve.length;qe;){for(ye=Ve,Ve=[];++Ye<qe;)ye&&ye[Ye].run();Ye=-1,qe=Ve.length}ye=null,_e=!1,Mr(Gt)}}pt.nextTick=function(Gt){var qe=new Array(arguments.length-1);if(arguments.length>1)for(var hi=1;hi<arguments.length;hi++)qe[hi-1]=arguments[hi];Ve.push(new fi(Gt,qe)),Ve.length===1&&!_e&&ci(sn)};function fi(Gt,qe){this.fun=Gt,this.array=qe}fi.prototype.run=function(){this.fun.apply(null,this.array)},pt.title="browser",pt.browser=!0,pt.env={},pt.argv=[],pt.version="",pt.versions={};function Yt(){}pt.on=Yt,pt.addListener=Yt,pt.once=Yt,pt.off=Yt,pt.removeListener=Yt,pt.removeAllListeners=Yt,pt.emit=Yt,pt.prependListener=Yt,pt.prependOnceListener=Yt,pt.listeners=function(Gt){return[]},pt.binding=function(Gt){throw new Error("process.binding is not supported")},pt.cwd=function(){return"/"},pt.chdir=function(Gt){throw new Error("process.chdir is not supported")},pt.umask=function(){return 0}},41381:function(Kt,pt){"use strict";pt.Z=`import React, { type FC } from 'react'
import { Diagram } from '@fiagram/react'

function NodeShape({ width, height, label }: any) {
  return (
    <svg width={width} height={height} viewBox={\`0 0 \${width} \${height}\`} fill="none">
      <rect width={width} height={height} rx={height / 2} fill="#3A3D87" />
      <text x="50%" y="51%" textAnchor="middle" dominantBaseline="middle" fill="white" fontSize="12" fontWeight="600">
        {label}
      </text>
    </svg>
  )
}

const App: FC = () => {
  return (
    <Diagram
      canvasStyle={{ height: 400 }}
      shapes={[
        {
          shape: 'node1',
          label: 'node1',
          nodeInfo: { width: 50, height: 50 },
          component: node => <NodeShape {...node} />,
        },
      ]}
      nodes={[
        { id: '1', x: 150, y: 150, shape: 'node1', width: 50, height: 50, label: 'Node 1' },
        { id: '2', x: 300, y: 150, shape: 'node1', width: 50, height: 50, label: 'Node 2' },
        { id: '3', x: 450, y: 150, shape: 'node1', width: 50, height: 50, label: 'Node 3' },
      ]}
      edges={[
        { id: '1', type: 'brokenRounded', source: '1', sourceDirection: 'bottom', target: '2', targetDirection: 'top', label: 'Link 1' },
        { id: '2', type: 'brokenRounded', source: '2', sourceDirection: 'bottom', target: '3', targetDirection: 'top', label: 'Link 2' },
      ]}
    />
  )
}

export default App
`},20520:function(Kt,pt){"use strict";pt.Z=`import React, { type FC } from 'react'
import { Diagram, Tools } from '@fiagram/react'

const { Align, FullScreen } = Tools

function NodeShape({ width, height, label }: any) {
  return (
    <svg width={width} height={height} viewBox={\`0 0 \${width} \${height}\`} fill="none">
      <rect width={width} height={height} rx={height / 2} fill="#3A3D87" />
      <text x="50%" y="51%" textAnchor="middle" dominantBaseline="middle" fill="white" fontSize="12" fontWeight="600">
        {label}
      </text>
    </svg>
  )
}

const App: FC = () => {
  return (
    <Diagram
      canvasStyle={{ height: 400 }}
      shapes={[
        {
          shape: 'node1',
          label: 'node1',
          nodeInfo: { width: 50, height: 50 },
          component: node => <NodeShape {...node} />,
        },
      ]}
      nodes={[
        { id: '1', x: 150, y: 150, shape: 'node1', width: 50, height: 50, label: 'Node 1' },
        { id: '2', x: 300, y: 150, shape: 'node1', width: 50, height: 50, label: 'Node 2' },
        { id: '3', x: 450, y: 150, shape: 'node1', width: 50, height: 50, label: 'Node 3' },
      ]}
      edges={[
        { id: '1', type: 'brokenRounded', source: '1', sourceDirection: 'bottom', target: '2', targetDirection: 'top', label: 'Link 1' },
        { id: '2', type: 'brokenRounded', source: '2', sourceDirection: 'bottom', target: '3', targetDirection: 'top', label: 'Link 2' },
      ]}
    >
      <Tools>
        <Align />
        <FullScreen />
      </Tools>
    </Diagram>
  )
}

export default App
`},62666:function(Kt,pt,ft){"use strict";ft.r(pt),ft.d(pt,{Diagram:function(){return Gg},DragPanel:function(){return uc},Tools:function(){return Yn}});var E=ft(92379),zn=ft.t(E,2),Lr=ft(95295),ci=ft(44675),Mr=Object.defineProperty,Ve=(t,e,n)=>e in t?Mr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_e=(t,e,n)=>(Ve(t,typeof e!="symbol"?e+"":e,n),n),ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fn={exports:{}},sn={};var fi;function Yt(){if(fi)return sn;fi=1;var t=E,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var g,v={},p=null,b=null;d!==void 0&&(p=""+d),h.key!==void 0&&(p=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)i.call(h,g)&&!s.hasOwnProperty(g)&&(v[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:c,key:p,ref:b,props:v,_owner:a.current}}return sn.Fragment=n,sn.jsx=l,sn.jsxs=l,sn}var Gt={};var qe;function hi(){return qe||(qe=1),Gt}Fn.exports=Yt();var W=Fn.exports,yf={exports:{}};(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(s=a(s,i(c)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var c in s)e.call(s,c)&&s[c]&&(l=a(l,c));return l}function a(s,l){return l?s?s+" "+l:s+l:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(yf);var s0=yf.exports;const le=Ye(s0),bf=(0,E.createContext)({dragDropManager:void 0});function Sn(t){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(t)}function u0(t,e){if(Sn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(Sn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wf(t){var e=u0(t,"string");return Sn(e)=="symbol"?e:e+""}function ke(t,e,n){return e=wf(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xf(Object(n),!0).forEach(function(i){ke(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xf(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function un(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var _f=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Au=function(){return Math.random().toString(36).substring(7).split("").join(".")},Sf={INIT:"@@redux/INIT"+Au(),REPLACE:"@@redux/REPLACE"+Au(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Au()}};function l0(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function VA(t){if(t===void 0)return"undefined";if(t===null)return"null";var e=typeof t;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(t))return"array";if(h0(t))return"date";if(f0(t))return"error";var n=c0(t);switch(n){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return n}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}function c0(t){return typeof t.constructor=="function"?t.constructor.name:null}function f0(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function h0(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function YA(t){var e=typeof t;return e}function Ef(t,e,n){var i;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(un(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(un(1));return n(Ef)(t,e)}if(typeof t!="function")throw new Error(un(2));var a=t,s=e,l=[],c=l,h=!1;function d(){c===l&&(c=l.slice())}function g(){if(h)throw new Error(un(3));return s}function v(C){if(typeof C!="function")throw new Error(un(4));if(h)throw new Error(un(5));var w=!0;return d(),c.push(C),function(){if(w){if(h)throw new Error(un(6));w=!1,d();var S=c.indexOf(C);c.splice(S,1),l=null}}}function p(C){if(!l0(C))throw new Error(un(7));if(typeof C.type>"u")throw new Error(un(8));if(h)throw new Error(un(9));try{h=!0,s=a(s,C)}finally{h=!1}for(var w=l=c,S=0;S<w.length;S++){var P=w[S];P()}return C}function b(C){if(typeof C!="function")throw new Error(un(10));a=C,p({type:Sf.REPLACE})}function O(){var C,w=v;return C={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error(un(11));function P(){S.next&&S.next(g())}P();var A=w(P);return{unsubscribe:A}}},C[_f]=function(){return this},C}return p({type:Sf.INIT}),i={dispatch:p,subscribe:v,getState:g,replaceReducer:b},i[_f]=O,i}function Ot(t,e,...n){if(d0()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let i;if(e===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;i=new Error(e.replace(/%s/g,function(){return n[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}function d0(){return typeof ci<"u"&&!0}function g0(t,e,n){return e.split(".").reduce((i,a)=>i&&i[a]?i[a]:n||null,t)}function p0(t,e){return t.filter(n=>n!==e)}function Of(t){return typeof t=="object"}function v0(t,e){const n=new Map,i=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(i),e.forEach(i);const a=[];return n.forEach((s,l)=>{s===1&&a.push(l)}),a}function m0(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Nu="dnd-core/INIT_COORDS",ja="dnd-core/BEGIN_DRAG",Ru="dnd-core/PUBLISH_DRAG_SOURCE",La="dnd-core/HOVER",Ma="dnd-core/DROP",za="dnd-core/END_DRAG";function Df(t,e){return{type:Nu,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const y0={type:Nu,payload:{clientOffset:null,sourceClientOffset:null}};function b0(t){return function(e=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:s}=n,l=t.getMonitor(),c=t.getRegistry();t.dispatch(Df(a)),w0(e,l,c);const h=S0(e,l);if(h==null){t.dispatch(y0);return}let d=null;if(a){if(!s)throw new Error("getSourceClientOffset must be defined");x0(s),d=s(h)}t.dispatch(Df(a,d));const g=c.getSource(h).beginDrag(l,h);if(g==null)return;_0(g),c.pinSource(h);const v=c.getSourceType(h);return{type:ja,payload:{itemType:v,item:g,sourceId:h,clientOffset:a||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function w0(t,e,n){Ot(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(i){Ot(n.getSource(i),"Expected sourceIds to be registered.")})}function x0(t){Ot(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function _0(t){Ot(Of(t),"Item must be an object.")}function S0(t,e){let n=null;for(let i=t.length-1;i>=0;i--)if(e.canDragSource(t[i])){n=t[i];break}return n}function E0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.forEach(function(a){E0(t,a,n[a])})}return t}function D0(t){return function(e={}){const n=t.getMonitor(),i=t.getRegistry();C0(n),A0(n).forEach((a,s)=>{const l=k0(a,s,i,n),c={type:Ma,payload:{dropResult:O0({},e,l)}};t.dispatch(c)})}}function C0(t){Ot(t.isDragging(),"Cannot call drop while not dragging."),Ot(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function k0(t,e,n,i){const a=n.getTarget(t);let s=a?a.drop(i,t):void 0;return T0(s),typeof s>"u"&&(s=e===0?{}:i.getDropResult()),s}function T0(t){Ot(typeof t>"u"||Of(t),"Drop result must either be an object or undefined.")}function A0(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function N0(t){return function(){const e=t.getMonitor(),n=t.getRegistry();R0(e);const i=e.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(e,i),n.unpinSource()),{type:za}}}function R0(t){Ot(t.isDragging(),"Cannot call endDrag while not dragging.")}function $u(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function $0(t){return function(e,{clientOffset:n}={}){I0(e);const i=e.slice(0),a=t.getMonitor(),s=t.getRegistry(),l=a.getItemType();return j0(i,s,l),P0(i,a,s),L0(i,a,s),{type:La,payload:{targetIds:i,clientOffset:n||null}}}}function I0(t){Ot(Array.isArray(t),"Expected targetIds to be an array.")}function P0(t,e,n){Ot(e.isDragging(),"Cannot call hover while not dragging."),Ot(!e.didDrop(),"Cannot call hover after drop.");for(let i=0;i<t.length;i++){const a=t[i];Ot(t.lastIndexOf(a)===i,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(a);Ot(s,"Expected targetIds to be registered.")}}function j0(t,e,n){for(let i=t.length-1;i>=0;i--){const a=t[i],s=e.getTargetType(a);$u(s,n)||t.splice(i,1)}}function L0(t,e,n){t.forEach(function(i){n.getTarget(i).hover(e,i)})}function M0(t){return function(){if(t.getMonitor().isDragging())return{type:Ru}}}function z0(t){return{beginDrag:b0(t),publishDragSource:M0(t),hover:$0(t),drop:D0(t),endDrag:N0(t)}}class F0{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function i(s){return(...l)=>{const c=s.apply(e,l);typeof c<"u"&&n(c)}}const a=z0(this);return Object.keys(a).reduce((s,l)=>{const c=a[l];return s[l]=i(c),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const i=this.store.getState().refCount>0;this.backend&&(i&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!i&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function B0(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Cf(t,e){return{x:t.x-e.x,y:t.y-e.y}}function U0(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:i}=t;return!e||!n||!i?null:Cf(B0(e,i),n)}function X0(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:Cf(e,n)}const Wo=[],Iu=[];Wo.__IS_NONE__=!0,Iu.__IS_ALL__=!0;function H0(t,e){return t===Wo?!1:t===Iu||typeof e>"u"?!0:m0(e,t).length>0}class W0{subscribeToStateChange(e,n={}){const{handlerIds:i}=n;Ot(typeof e=="function","listener must be a function."),Ot(typeof i>"u"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const s=()=>{const l=this.store.getState(),c=l.stateId;try{c===a||c===a+1&&!H0(l.dirtyHandlerIds,i)||e()}finally{a=c}};return this.store.subscribe(s)}subscribeToOffsetChange(e){Ot(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const i=()=>{const a=this.store.getState().dragOffset;a!==n&&(n=a,e())};return this.store.subscribe(i)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Ot(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Ot(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();return $u(i,a)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Ot(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const i=this.registry.getSourceType(e),a=this.getItemType();return i!==a?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:i}=n;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),s=this.getItemType();if(s&&!$u(a,s))return!1;const l=this.getTargetIds();if(!l.length)return!1;const c=l.indexOf(e);return i?c===l.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return U0(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return X0(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const kf=typeof global<"u"?global:self,Tf=kf.MutationObserver||kf.WebKitMutationObserver;function Af(t){return function(){const e=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(e),clearInterval(n),t()}}}function V0(t){let e=1;const n=new Tf(t),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const Y0=typeof Tf=="function"?V0:Af;class q0{enqueueTask(e){const{queue:n,requestFlush:i}=this;n.length||(i(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let i=0,a=e.length-this.index;i<a;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Y0(this.flush),this.requestErrorThrow=Af(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class K0{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class G0{create(e){const n=this.freeTasks,i=n.length?n.pop():new K0(this.onError,a=>n[n.length]=a);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const Nf=new q0,J0=new G0(Nf.registerPendingError);function Q0(t){Nf.enqueueTask(J0.create(t))}const Pu="dnd-core/ADD_SOURCE",ju="dnd-core/ADD_TARGET",Lu="dnd-core/REMOVE_SOURCE",Fa="dnd-core/REMOVE_TARGET";function Z0(t){return{type:Pu,payload:{sourceId:t}}}function tm(t){return{type:ju,payload:{targetId:t}}}function em(t){return{type:Lu,payload:{sourceId:t}}}function nm(t){return{type:Fa,payload:{targetId:t}}}function rm(t){Ot(typeof t.canDrag=="function","Expected canDrag to be a function."),Ot(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Ot(typeof t.endDrag=="function","Expected endDrag to be a function.")}function im(t){Ot(typeof t.canDrop=="function","Expected canDrop to be a function."),Ot(typeof t.hover=="function","Expected hover to be a function."),Ot(typeof t.drop=="function","Expected beginDrag to be a function.")}function Mu(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Mu(n,!1));return}Ot(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var ln;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(ln||(ln={}));let om=0;function am(){return om++}function sm(t){const e=am().toString();switch(t){case ln.SOURCE:return`S${e}`;case ln.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function Rf(t){switch(t[0]){case"S":return ln.SOURCE;case"T":return ln.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function $f(t,e){const n=t.entries();let i=!1;do{const{done:a,value:[,s]}=n.next();if(s===e)return!0;i=!!a}while(!i);return!1}class um{addSource(e,n){Mu(e),rm(n);const i=this.addHandler(ln.SOURCE,e,n);return this.store.dispatch(Z0(i)),i}addTarget(e,n){Mu(e,!0),im(n);const i=this.addHandler(ln.TARGET,e,n);return this.store.dispatch(tm(i)),i}containsHandler(e){return $f(this.dragSources,e)||$f(this.dropTargets,e)}getSource(e,n=!1){return Ot(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Ot(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Ot(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Ot(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Rf(e)===ln.SOURCE}isTargetId(e){return Rf(e)===ln.TARGET}removeSource(e){Ot(this.getSource(e),"Expected an existing source."),this.store.dispatch(em(e)),Q0(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Ot(this.getTarget(e),"Expected an existing target."),this.store.dispatch(nm(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Ot(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Ot(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,i){const a=sm(e);return this.types.set(a,n),e===ln.SOURCE?this.dragSources.set(a,i):e===ln.TARGET&&this.dropTargets.set(a,i),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const lm=(t,e)=>t===e;function cm(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function fm(t,e,n=lm){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!n(t[i],e[i]))return!1;return!0}function hm(t=Wo,e){switch(e.type){case La:break;case Pu:case ju:case Fa:case Lu:return Wo;case ja:case Ru:case za:case Ma:default:return Iu}const{targetIds:n=[],prevTargetIds:i=[]}=e.payload,a=v0(n,i);if(!(a.length>0||!fm(n,i)))return Wo;const s=i[i.length-1],l=n[n.length-1];return s!==l&&(s&&a.push(s),l&&a.push(l)),a}function dm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.forEach(function(a){dm(t,a,n[a])})}return t}const If={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function pm(t=If,e){const{payload:n}=e;switch(e.type){case Nu:case ja:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case La:return cm(t.clientOffset,n.clientOffset)?t:gm({},t,{clientOffset:n.clientOffset});case za:case Ma:return If;default:return t}}function vm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function to(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.forEach(function(a){vm(t,a,n[a])})}return t}const mm={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function ym(t=mm,e){const{payload:n}=e;switch(e.type){case ja:return to({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Ru:return to({},t,{isSourcePublic:!0});case La:return to({},t,{targetIds:n.targetIds});case Fa:return t.targetIds.indexOf(n.targetId)===-1?t:to({},t,{targetIds:p0(t.targetIds,n.targetId)});case Ma:return to({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case za:return to({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function bm(t=0,e){switch(e.type){case Pu:case ju:return t+1;case Lu:case Fa:return t-1;default:return t}}function wm(t=0){return t+1}function xm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.forEach(function(a){xm(t,a,n[a])})}return t}function Sm(t={},e){return{dirtyHandlerIds:hm(t.dirtyHandlerIds,{type:e.type,payload:_m({},e.payload,{prevTargetIds:g0(t,"dragOperation.targetIds",[])})}),dragOffset:pm(t.dragOffset,e),refCount:bm(t.refCount,e),dragOperation:ym(t.dragOperation,e),stateId:wm(t.stateId)}}function Em(t,e=void 0,n={},i=!1){const a=Om(i),s=new W0(a,new um(a)),l=new F0(a,s),c=t(l,e,n);return l.receiveBackend(c),l}function Om(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ef(Sm,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Dm(t,e){if(t==null)return{};var n=Cm(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Cm(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}let Pf=0;const Ba=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var km=(0,E.memo)(function(t){var{children:e}=t,n=Dm(t,["children"]);const[i,a]=Tm(n);return(0,E.useEffect)(()=>{if(a){const s=jf();return++Pf,()=>{--Pf===0&&(s[Ba]=null)}}},[]),W.jsx(bf.Provider,{value:i,children:e})});function Tm(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Am(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function Am(t,e=jf(),n,i){const a=e;return a[Ba]||(a[Ba]={dragDropManager:Em(t,e,n,i)}),a[Ba]}function jf(){return typeof global<"u"?global:window}var Nm=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,a,s;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(a=i;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(n).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[a]))return!1;for(a=i;a--!==0;){var l=s[a];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n};const Rm=Ye(Nm),di=typeof window<"u"?E.useLayoutEffect:E.useEffect;function Lf(t,e,n){const[i,a]=(0,E.useState)(()=>e(t)),s=(0,E.useCallback)(()=>{const l=e(t);Rm(i,l)||(a(l),n&&n())},[i,t,n]);return di(s),[i,s]}function $m(t,e,n){const[i,a]=Lf(t,e,n);return di(function(){const s=t.getHandlerId();if(s!=null)return t.subscribeToStateChange(a,{handlerIds:[s]})},[t,a]),i}function Mf(t,e,n){return $m(e,t||(()=>({})),()=>n.reconnect())}function zf(t,e){const n=[];return typeof t!="function"&&n.push(t),(0,E.useMemo)(()=>typeof t=="function"?t():t,n)}function Im(t){return(0,E.useMemo)(()=>t.hooks.dragSource(),[t])}function Pm(t){return(0,E.useMemo)(()=>t.hooks.dragPreview(),[t])}let zu=!1,Fu=!1;class jm{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Ot(!zu,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return zu=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{zu=!1}}isDragging(){if(!this.sourceId)return!1;Ot(!Fu,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Fu=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Fu=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Bu=!1;class Lm{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Ot(!Bu,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Bu=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Bu=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Mm(t,e,n){const i=n.getRegistry(),a=i.addTarget(t,e);return[a,()=>i.removeTarget(a)]}function zm(t,e,n){const i=n.getRegistry(),a=i.addSource(t,e);return[a,()=>i.removeSource(a)]}function Uu(t,e,n,i){let a;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),l=Object.keys(e);if(s.length!==l.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let h=0;h<s.length;h++){const d=s[h];if(!c(d))return!1;const g=t[d],v=e[d];if(a=void 0,a===!1||a===void 0&&g!==v)return!1}return!0}function Xu(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Fm(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Bm(t){return(e=null,n=null)=>{if(!(0,E.isValidElement)(e)){const a=e;return t(a,n),a}const i=e;return Fm(i),Um(i,n?a=>t(a,n):t)}}function Ff(t){const e={};return Object.keys(t).forEach(n=>{const i=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const a=Bm(i);e[n]=()=>a}}),e}function Bf(t,e){typeof t=="function"?t(e):t.current=e}function Um(t,e){const n=t.ref;return Ot(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?(0,E.cloneElement)(t,{ref:i=>{Bf(n,i),Bf(e,i)}}):(0,E.cloneElement)(t,{ref:e})}class Xm{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,i=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Uu(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Uu(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Ff({dragSource:(n,i)=>{this.clearDragSource(),this.dragSourceOptions=i||null,Xu(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,i)=>{this.clearDragPreview(),this.dragPreviewOptions=i||null,Xu(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Hm{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Uu(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Ff({dropTarget:(n,i)=>{this.clearDropTarget(),this.dropTargetOptions=i,Xu(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function gi(){const{dragDropManager:t}=(0,E.useContext)(bf);return Ot(t!=null,"Expected drag drop context"),t}function Wm(t,e){const n=gi(),i=(0,E.useMemo)(()=>new Xm(n.getBackend()),[n]);return di(()=>(i.dragSourceOptions=t||null,i.reconnect(),()=>i.disconnectDragSource()),[i,t]),di(()=>(i.dragPreviewOptions=e||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,e]),i}function Vm(){const t=gi();return(0,E.useMemo)(()=>new jm(t),[t])}class Ym{beginDrag(){const e=this.spec,n=this.monitor;let i=null;return typeof e.item=="object"?i=e.item:typeof e.item=="function"?i=e.item(n):i={},i!=null?i:null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const i=this.spec,a=this.monitor,{isDragging:s}=i;return s?s(a):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,i=this.connector,{end:a}=e;a&&a(n.getItem(),n),i.reconnect()}constructor(e,n,i){this.spec=e,this.monitor=n,this.connector=i}}function qm(t,e,n){const i=(0,E.useMemo)(()=>new Ym(t,e,n),[e,n]);return(0,E.useEffect)(()=>{i.spec=t},[t]),i}function Km(t){return(0,E.useMemo)(()=>{const e=t.type;return Ot(e!=null,"spec.type must be defined"),e},[t])}function Gm(t,e,n){const i=gi(),a=qm(t,e,n),s=Km(t);di(function(){if(s!=null){const[l,c]=zm(s,a,i);return e.receiveHandlerId(l),n.receiveHandlerId(l),c}},[i,e,n,a,s])}function Jm(t,e){const n=zf(t);Ot(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const i=Vm(),a=Wm(n.options,n.previewOptions);return Gm(n,i,a),[Mf(n.collect,i,a),Im(a),Pm(a)]}function Qm(t){const e=gi().getMonitor(),[n,i]=Lf(e,t);return(0,E.useEffect)(()=>e.subscribeToOffsetChange(i)),(0,E.useEffect)(()=>e.subscribeToStateChange(i)),n}function Zm(t){return(0,E.useMemo)(()=>t.hooks.dropTarget(),[t])}function ty(t){const e=gi(),n=(0,E.useMemo)(()=>new Hm(e.getBackend()),[e]);return di(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function ey(){const t=gi();return(0,E.useMemo)(()=>new Lm(t),[t])}function ny(t){const{accept:e}=t;return(0,E.useMemo)(()=>(Ot(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class ry{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function iy(t,e){const n=(0,E.useMemo)(()=>new ry(t,e),[e]);return(0,E.useEffect)(()=>{n.spec=t},[t]),n}function oy(t,e,n){const i=gi(),a=iy(t,e),s=ny(t);di(function(){const[l,c]=Mm(s,a,i);return e.receiveHandlerId(l),n.receiveHandlerId(l),c},[i,e,a,n,s.map(l=>l.toString()).join("|")])}function ay(t,e){const n=zf(t),i=ey(),a=ty(n.options);return oy(n,i,a),[Mf(n.collect,i,a),Zm(a)]}function Uf(t){let e=null;return()=>(e==null&&(e=t()),e)}function sy(t,e){return t.filter(n=>n!==e)}function uy(t,e){const n=new Set,i=s=>n.add(s);t.forEach(i),e.forEach(i);const a=[];return n.forEach(s=>a.push(s)),a}class ly{enter(e){const n=this.entered.length,i=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=uy(this.entered.filter(i),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=sy(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class cy{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(i=>{const a=this.config.exposeProperties[i];a!=null&&(n[i]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Xf="__NATIVE_FILE__",Hf="__NATIVE_URL__",Wf="__NATIVE_TEXT__",Vf="__NATIVE_HTML__",Yf=Object.freeze(Object.defineProperty({__proto__:null,FILE:Xf,HTML:Vf,TEXT:Wf,URL:Hf},Symbol.toStringTag,{value:"Module"}));function Hu(t,e,n){const i=e.reduce((a,s)=>a||t.getData(s),"");return i!=null?i:n}const Wu={[Xf]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Vf]:{exposeProperties:{html:(t,e)=>Hu(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Hf]:{exposeProperties:{urls:(t,e)=>Hu(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Wf]:{exposeProperties:{text:(t,e)=>Hu(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function fy(t,e){const n=Wu[t];if(!n)throw new Error(`native type ${t} has no configuration`);const i=new cy(n);return i.loadDataTransfer(e),i}function Vu(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Wu).filter(n=>{const i=Wu[n];return i!=null&&i.matchesTypes?i.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const hy=Uf(()=>/firefox/i.test(navigator.userAgent)),qf=Uf(()=>!!window.safari);class Kf{interpolate(e){const{xs:n,ys:i,c1s:a,c2s:s,c3s:l}=this;let c=n.length-1;if(e===n[c])return i[c];let h=0,d=l.length-1,g;for(;h<=d;){g=Math.floor(.5*(h+d));const b=n[g];if(b<e)h=g+1;else if(b>e)d=g-1;else return i[g]}c=Math.max(0,d);const v=e-n[c],p=v*v;return i[c]+a[c]*v+s[c]*p+l[c]*v*p}constructor(e,n){const{length:i}=e,a=[];for(let b=0;b<i;b++)a.push(b);a.sort((b,O)=>e[b]<e[O]?-1:1);const s=[],l=[];let c,h;for(let b=0;b<i-1;b++)c=e[b+1]-e[b],h=n[b+1]-n[b],s.push(c),l.push(h/c);const d=[l[0]];for(let b=0;b<s.length-1;b++){const O=l[b],C=l[b+1];if(O*C<=0)d.push(0);else{c=s[b];const w=s[b+1],S=c+w;d.push(3*S/((S+w)/O+(S+c)/C))}}d.push(l[l.length-1]);const g=[],v=[];let p;for(let b=0;b<d.length-1;b++){p=l[b];const O=d[b],C=1/s[b],w=O+d[b+1]-p-p;g.push((p-O-w)*C),v.push(w*C*C)}this.xs=e,this.ys=n,this.c1s=d,this.c2s=g,this.c3s=v}}const dy=1;function Gf(t){const e=t.nodeType===dy?t:t.parentElement;if(!e)return null;const{top:n,left:i}=e.getBoundingClientRect();return{x:i,y:n}}function Ua(t){return{x:t.clientX,y:t.clientY}}function gy(t){var e;return t.nodeName==="IMG"&&(hy()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function py(t,e,n,i){let a=t?e.width:n,s=t?e.height:i;return qf()&&t&&(s/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:s}}function vy(t,e,n,i,a){const s=gy(e),l=Gf(s?t:e),c={x:n.x-l.x,y:n.y-l.y},{offsetWidth:h,offsetHeight:d}=t,{anchorX:g,anchorY:v}=i,{dragPreviewWidth:p,dragPreviewHeight:b}=py(s,e,h,d),O=()=>{let _=new Kf([0,.5,1],[c.y,c.y/d*b,c.y+b-d]).interpolate(v);return qf()&&s&&(_+=(window.devicePixelRatio-1)*b),_},C=()=>new Kf([0,.5,1],[c.x,c.x/h*p,c.x+p-h]).interpolate(g),{offsetX:w,offsetY:S}=a,P=w===0||w,A=S===0||S;return{x:P?w:C(),y:A?S:O()}}class my{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function yy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),i.forEach(function(a){yy(t,a,n[a])})}return t}class by{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,i){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,i);const a=l=>this.handleDragStart(l,e),s=l=>this.handleSelectStart(l);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const i=l=>this.handleDragEnter(l,e),a=l=>this.handleDragOver(l,e),s=l=>this.handleDrop(l,e);return n.addEventListener("dragenter",i),n.addEventListener("dragover",a),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",i),n.removeEventListener("dragover",a),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return Jf({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return Jf({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Yf).some(n=>Yf[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=fy(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var i;return(i=this.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,i){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const s=this.sourceNodes.get(a);return s&&Gf(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const l=Ua(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:l});const{dataTransfer:c}=a,h=Vu(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const g=this.monitor.getSourceId(),v=this.sourceNodes.get(g),p=this.sourcePreviewNodes.get(g)||v;if(p){const{anchorX:b,anchorY:O,offsetX:C,offsetY:w}=this.getCurrentSourcePreviewNodeOptions(),S=vy(v,p,l,{anchorX:b,anchorY:O},{offsetX:C,offsetY:w});c.setDragImage(p,S.x,S.y)}}try{c==null||c.setData("application/json",{})}catch(g){}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(h)this.beginDragNativeItem(h);else{if(c&&!c.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,c=Vu(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:s}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=a.altKey,s.length>0&&this.actions.hover(s,{clientOffset:Ua(a)}),s.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Ua(a),this.scheduleHover(s),(s||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;a.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(a.dataTransfer)}else Vu(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:Ua(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const s=a.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(a.preventDefault(),s.dragDrop()))},this.options=new my(n,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new ly(this.isNodeInDocument)}}let Xa;function wy(){return Xa||(Xa=new Image,Xa.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Xa}const xy=function(t,e,n){return new by(t,e,n)};var _y={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Qf=t=>{let e;const n=new Set,i=(c,h)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const g=e;e=(h!=null?h:typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(v=>v(e,g))}},a=()=>e,s={setState:i,getState:a,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(_y?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=e=t(i,a,s);return s},Sy=t=>t?Qf(t):Qf;var Zf={exports:{}},Yu={},th={exports:{}},qu={};var eh;function Ey(){if(eh)return qu;eh=1;var t=E;function e(v,p){return v===p&&(v!==0||1/v===1/p)||v!==v&&p!==p}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,s=t.useLayoutEffect,l=t.useDebugValue;function c(v,p){var b=p(),O=i({inst:{value:b,getSnapshot:p}}),C=O[0].inst,w=O[1];return s(function(){C.value=b,C.getSnapshot=p,h(C)&&w({inst:C})},[v,b,p]),a(function(){return h(C)&&w({inst:C}),v(function(){h(C)&&w({inst:C})})},[v]),l(b),b}function h(v){var p=v.getSnapshot;v=v.value;try{var b=p();return!n(v,b)}catch(O){return!0}}function d(v,p){return p()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return qu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,qu}var Oy={};var nh;function qA(){return nh||(nh=1),Oy}var rh;function Dy(){return rh||(rh=1,th.exports=Ey()),th.exports}var ih;function Cy(){if(ih)return Yu;ih=1;var t=E,e=Dy();function n(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,s=t.useRef,l=t.useEffect,c=t.useMemo,h=t.useDebugValue;return Yu.useSyncExternalStoreWithSelector=function(d,g,v,p,b){var O=s(null);if(O.current===null){var C={hasValue:!1,value:null};O.current=C}else C=O.current;O=c(function(){function S(I){if(!P){if(P=!0,A=I,I=p(I),b!==void 0&&C.hasValue){var M=C.value;if(b(M,I))return _=M}return _=I}if(M=_,i(A,I))return M;var nt=p(I);return b!==void 0&&b(M,nt)?M:(A=I,_=nt)}var P=!1,A,_,L=v===void 0?null:v;return[function(){return S(g())},L===null?void 0:function(){return S(L())}]},[g,v,p,b]);var w=a(d,O[0],O[1]);return l(function(){C.hasValue=!0,C.value=w},[w]),h(w),w},Yu}var ky={};var oh;function KA(){return oh||(oh=1),ky}Zf.exports=Cy();var Ty=Zf.exports;const Ay=Ye(Ty);var ah={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Ny}=E,{useSyncExternalStoreWithSelector:Ry}=Ay;let sh=!1;const $y=t=>t;function Iy(t,e=$y,n){(ah?"production":void 0)!=="production"&&n&&!sh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),sh=!0);const i=Ry(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Ny(i),i}const uh=t=>{(ah?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Sy(t):t,n=(i,a)=>Iy(e,i,a);return Object.assign(n,e),n},Py=t=>t?uh(t):uh;var lh=Symbol.for("immer-nothing"),ch=Symbol.for("immer-draftable"),Ke=Symbol.for("immer-state"),GA=[];function En(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var eo=Object.getPrototypeOf;function no(t){return!!t&&!!t[Ke]}function pi(t){var e;return t?fh(t)||Array.isArray(t)||!!t[ch]||!!((e=t.constructor)!=null&&e[ch])||Va(t)||Ya(t):!1}var jy=Object.prototype.constructor.toString();function fh(t){if(!t||typeof t!="object")return!1;const e=eo(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===jy}function Ha(t,e){Wa(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,i)=>e(i,n,t))}function Wa(t){const e=t[Ke];return e?e.type_:Array.isArray(t)?1:Va(t)?2:Ya(t)?3:0}function Ku(t,e){return Wa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function hh(t,e,n){const i=Wa(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function Ly(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Va(t){return t instanceof Map}function Ya(t){return t instanceof Set}function vi(t){return t.copy_||t.base_}function Gu(t,e){if(Va(t))return new Map(t);if(Ya(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=fh(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Ke];let a=Reflect.ownKeys(i);for(let s=0;s<a.length;s++){const l=a[s],c=i[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(i[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[l]})}return Object.create(eo(t),i)}else{const i=eo(t);if(i!==null&&n)return Z({},t);const a=Object.create(i);return Object.assign(a,t)}}function Ju(t,e=!1){return qa(t)||no(t)||!pi(t)||(Wa(t)>1&&(t.set=t.add=t.clear=t.delete=My),Object.freeze(t),e&&Object.entries(t).forEach(([n,i])=>Ju(i,!0))),t}function My(){En(2)}function qa(t){return Object.isFrozen(t)}var zy={};function mi(t){const e=zy[t];return e||En(0,t),e}var Vo;function dh(){return Vo}function Fy(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gh(t,e){e&&(mi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Qu(t){Zu(t),t.drafts_.forEach(By),t.drafts_=null}function Zu(t){t===Vo&&(Vo=t.parent_)}function ph(t){return Vo=Fy(Vo,t)}function By(t){const e=t[Ke];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vh(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ke].modified_&&(Qu(e),En(4)),pi(t)&&(t=Ka(e,t),e.parent_||Ga(e,t)),e.patches_&&mi("Patches").generateReplacementPatches_(n[Ke].base_,t,e.patches_,e.inversePatches_)):t=Ka(e,n,[]),Qu(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==lh?t:void 0}function Ka(t,e,n){if(qa(e))return e;const i=e[Ke];if(!i)return Ha(e,(a,s)=>mh(t,i,e,a,s,n)),e;if(i.scope_!==t)return e;if(!i.modified_)return Ga(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,l=!1;i.type_===3&&(s=new Set(a),a.clear(),l=!0),Ha(s,(c,h)=>mh(t,i,a,c,h,n,l)),Ga(t,a,!1),n&&t.patches_&&mi("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function mh(t,e,n,i,a,s,l){if(no(a)){const c=s&&e&&e.type_!==3&&!Ku(e.assigned_,i)?s.concat(i):void 0,h=Ka(t,a,c);if(hh(n,i,h),no(h))t.canAutoFreeze_=!1;else return}else l&&n.add(a);if(pi(a)&&!qa(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ka(t,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&Ga(t,a)}}function Ga(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ju(e,n)}function Uy(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:dh(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,s=tl;n&&(a=[i],s=Yo);const{revoke:l,proxy:c}=Proxy.revocable(a,s);return i.draft_=c,i.revoke_=l,c}var tl={get(t,e){if(e===Ke)return t;const n=vi(t);if(!Ku(n,e))return Xy(t,n,e);const i=n[e];return t.finalized_||!pi(i)?i:i===el(t.base_,e)?(rl(t),t.copy_[e]=il(i,t)):i},has(t,e){return e in vi(t)},ownKeys(t){return Reflect.ownKeys(vi(t))},set(t,e,n){const i=yh(vi(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const a=el(vi(t),e),s=a==null?void 0:a[Ke];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Ly(n,a)&&(n!==void 0||Ku(t.base_,e)))return!0;rl(t),nl(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return el(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,rl(t),nl(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=vi(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){En(11)},getPrototypeOf(t){return eo(t.base_)},setPrototypeOf(){En(12)}},Yo={};Ha(tl,(t,e)=>{Yo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Yo.deleteProperty=function(t,e){return Yo.set.call(this,t,e,void 0)},Yo.set=function(t,e,n){return tl.set.call(this,t[0],e,n,t[0])};function el(t,e){const n=t[Ke];return(n?vi(n):t)[e]}function Xy(t,e,n){var i;const a=yh(e,n);return a?"value"in a?a.value:(i=a.get)==null?void 0:i.call(t.draft_):void 0}function yh(t,e){if(!(e in t))return;let n=eo(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=eo(n)}}function nl(t){t.modified_||(t.modified_=!0,t.parent_&&nl(t.parent_))}function rl(t){t.copy_||(t.copy_=Gu(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Hy=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const l=this;return function(c=s,...h){return l.produce(c,d=>n.call(this,d,...h))}}typeof n!="function"&&En(6),i!==void 0&&typeof i!="function"&&En(7);let a;if(pi(e)){const s=ph(this),l=il(e,void 0);let c=!0;try{a=n(l),c=!1}finally{c?Qu(s):Zu(s)}return gh(s,i),vh(a,s)}else if(!e||typeof e!="object"){if(a=n(e),a===void 0&&(a=e),a===lh&&(a=void 0),this.autoFreeze_&&Ju(a,!0),i){const s=[],l=[];mi("Patches").generateReplacementPatches_(e,a,s,l),i(s,l)}return a}else En(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let i,a;return[this.produce(e,n,(s,l)=>{i=s,a=l}),i,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){pi(t)||En(8),no(t)&&(t=Wy(t));const e=ph(this),n=il(t,void 0);return n[Ke].isManual_=!0,Zu(e),n}finishDraft(t,e){const n=t&&t[Ke];(!n||!n.isManual_)&&En(9);const{scope_:i}=n;return gh(i,e),vh(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const a=e[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(e=e.slice(n+1));const i=mi("Patches").applyPatches_;return no(t)?i(t,e):this.produce(t,a=>i(a,e))}};function il(t,e){const n=Va(t)?mi("MapSet").proxyMap_(t,e):Ya(t)?mi("MapSet").proxySet_(t,e):Uy(t,e);return(e?e.scope_:dh()).drafts_.push(n),n}function Wy(t){return no(t)||En(10,t),bh(t)}function bh(t){if(!pi(t)||qa(t))return t;const e=t[Ke];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Gu(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Gu(t,!0);return Ha(n,(i,a)=>{hh(n,i,bh(a))}),e&&(e.finalized_=!1),n}var Ge=new Hy,ze=Ge.produce;Ge.produceWithPatches.bind(Ge),Ge.setAutoFreeze.bind(Ge),Ge.setUseStrictShallowCopy.bind(Ge),Ge.applyPatches.bind(Ge),Ge.createDraft.bind(Ge),Ge.finishDraft.bind(Ge);var Ja={exports:{}};Ja.exports,function(t,e){(function(){var n,i="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",v=1,p=2,b=4,O=1,C=2,w=1,S=2,P=4,A=8,_=16,L=32,I=64,M=128,nt=256,ct=512,V=30,tt="...",rt=800,K=16,k=1,j=2,R=3,B=1/0,U=9007199254740991,Q=17976931348623157e292,X=NaN,G=4294967295,et=G-1,it=G>>>1,at=[["ary",M],["bind",w],["bindKey",S],["curry",A],["curryRight",_],["flip",ct],["partial",L],["partialRight",I],["rearg",nt]],ut="[object Arguments]",wt="[object Array]",yt="[object AsyncFunction]",ht="[object Boolean]",bt="[object Date]",fe="[object DOMException]",Jt="[object Error]",Te="[object Function]",Ze="[object GeneratorFunction]",jt="[object Map]",re="[object Number]",Be="[object Null]",Ht="[object Object]",fn="[object Promise]",_t="[object Proxy]",It="[object RegExp]",kt="[object Set]",ae="[object String]",hn="[object Symbol]",dr="[object Undefined]",Kn="[object WeakMap]",Ae="[object WeakSet]",gr="[object ArrayBuffer]",dn="[object DataView]",Ne="[object Float32Array]",Re="[object Float64Array]",Yr="[object Int8Array]",$e="[object Int16Array]",ki="[object Int32Array]",qr="[object Uint8Array]",Ti="[object Uint8ClampedArray]",Gn="[object Uint16Array]",Ee="[object Uint32Array]",Jn=/\b__p \+= '';/g,Tn=/\b(__p \+=) '' \+/g,Ie=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ai=/&(?:amp|lt|gt|quot|#39);/g,Ni=/[&<>"']/g,An=RegExp(Ai.source),ie=RegExp(Ni.source),Zt=/<%-([\s\S]+?)%>/g,te=/<%([\s\S]+?)%>/g,pr=/<%=([\s\S]+?)%>/g,Qn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vr=/^\w*$/,Ri=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mr=/[\\^$.*+?()[\]{}|]/g,yr=RegExp(mr.source),Pe=/^\s+/,va=/\s/,$i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ii=/,? & /,br=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wr=/[()=,{}\[\]\/\s]/,Nn=/\\(\\)?/g,xr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pi=/\w*$/,ji=/^[-+]0x[0-9a-f]+$/i,Zn=/^0b[01]+$/i,mo=/^\[object .+?Constructor\]$/,Gr=/^0o[0-7]+$/i,_r=/^(?:0|[1-9]\d*)$/,Oe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,yo=/['\n\r\u2028\u2029\\]/g,Sr="\\ud800-\\udfff",Er="\\u0300-\\u036f",bo="\\ufe20-\\ufe2f",ma="\\u20d0-\\u20ff",tr=Er+bo+ma,Li="\\u2700-\\u27bf",wo="a-z\\xdf-\\xf6\\xf8-\\xff",gn="\\xac\\xb1\\xd7\\xf7",Rn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mi="\\u2000-\\u206f",xo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$n="A-Z\\xc0-\\xd6\\xd8-\\xde",er="\\ufe0e\\ufe0f",Qr=gn+Rn+Mi+xo,nr="['\u2019]",In="["+Sr+"]",_o="["+Qr+"]",Zr="["+tr+"]",So="\\d+",Eo="["+Li+"]",Oo="["+wo+"]",Do="[^"+Sr+Qr+So+Li+wo+$n+"]",zi="\\ud83c[\\udffb-\\udfff]",Co="(?:"+Zr+"|"+zi+")",ko="[^"+Sr+"]",Fi="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",de="["+$n+"]",Bi="\\u200d",rr="(?:"+Oo+"|"+Do+")",ir="(?:"+de+"|"+Do+")",Or="(?:"+nr+"(?:d|ll|m|re|s|t|ve))?",Ui="(?:"+nr+"(?:D|LL|M|RE|S|T|VE))?",Dr=Co+"?",Xi="["+er+"]?",Hi="(?:"+Bi+"(?:"+[ko,Fi,ti].join("|")+")"+Xi+Dr+")*",To="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ao=Xi+Dr+Hi,ba="(?:"+[Eo,Fi,ti].join("|")+")"+Ao,fc="(?:"+[ko+Zr+"?",Zr,Fi,ti,In].join("|")+")",st=RegExp(nr,"g"),Nt=RegExp(Zr,"g"),he=RegExp(zi+"(?="+zi+")|"+fc+Ao,"g"),ge=RegExp([de+"?"+Oo+"+"+Or+"(?="+[_o,de,"$"].join("|")+")",ir+"+"+Ui+"(?="+[_o,de+rr,"$"].join("|")+")",de+"?"+rr+"+"+Or,de+"+"+Ui,ya,To,So,ba].join("|"),"g"),ee=RegExp("["+Bi+Sr+tr+er+"]"),No=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xs=-1,Ft={};Ft[Ne]=Ft[Re]=Ft[Yr]=Ft[$e]=Ft[ki]=Ft[qr]=Ft[Ti]=Ft[Gn]=Ft[Ee]=!0,Ft[ut]=Ft[wt]=Ft[gr]=Ft[ht]=Ft[dn]=Ft[bt]=Ft[Jt]=Ft[Te]=Ft[jt]=Ft[re]=Ft[Ht]=Ft[It]=Ft[kt]=Ft[ae]=Ft[Kn]=!1;var Vt={};Vt[ut]=Vt[wt]=Vt[gr]=Vt[dn]=Vt[ht]=Vt[bt]=Vt[Ne]=Vt[Re]=Vt[Yr]=Vt[$e]=Vt[ki]=Vt[jt]=Vt[re]=Vt[Ht]=Vt[It]=Vt[kt]=Vt[ae]=Vt[hn]=Vt[qr]=Vt[Ti]=Vt[Gn]=Vt[Ee]=!0,Vt[Jt]=Vt[Te]=Vt[Kn]=!1;var oO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},aO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},uO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lO=parseFloat,cO=parseInt,Jg=typeof ye=="object"&&ye&&ye.Object===Object&&ye,fO=typeof self=="object"&&self&&self.Object===Object&&self,we=Jg||fO||Function("return this")(),hc=e&&!e.nodeType&&e,Wi=hc&&!0&&t&&!t.nodeType&&t,Qg=Wi&&Wi.exports===hc,dc=Qg&&Jg.process,pn=function(){try{var N=Wi&&Wi.require&&Wi.require("util").types;return N||dc&&dc.binding&&dc.binding("util")}catch(H){}}(),Zg=pn&&pn.isArrayBuffer,tp=pn&&pn.isDate,ep=pn&&pn.isMap,np=pn&&pn.isRegExp,rp=pn&&pn.isSet,ip=pn&&pn.isTypedArray;function tn(N,H,z){switch(z.length){case 0:return N.call(H);case 1:return N.call(H,z[0]);case 2:return N.call(H,z[0],z[1]);case 3:return N.call(H,z[0],z[1],z[2])}return N.apply(H,z)}function hO(N,H,z,lt){for(var St=-1,Lt=N==null?0:N.length;++St<Lt;){var pe=N[St];H(lt,pe,z(pe),N)}return lt}function vn(N,H){for(var z=-1,lt=N==null?0:N.length;++z<lt&&H(N[z],z,N)!==!1;);return N}function dO(N,H){for(var z=N==null?0:N.length;z--&&H(N[z],z,N)!==!1;);return N}function op(N,H){for(var z=-1,lt=N==null?0:N.length;++z<lt;)if(!H(N[z],z,N))return!1;return!0}function ei(N,H){for(var z=-1,lt=N==null?0:N.length,St=0,Lt=[];++z<lt;){var pe=N[z];H(pe,z,N)&&(Lt[St++]=pe)}return Lt}function Hs(N,H){var z=N==null?0:N.length;return!!z&&Ro(N,H,0)>-1}function gc(N,H,z){for(var lt=-1,St=N==null?0:N.length;++lt<St;)if(z(H,N[lt]))return!0;return!1}function Qt(N,H){for(var z=-1,lt=N==null?0:N.length,St=Array(lt);++z<lt;)St[z]=H(N[z],z,N);return St}function ni(N,H){for(var z=-1,lt=H.length,St=N.length;++z<lt;)N[St+z]=H[z];return N}function pc(N,H,z,lt){var St=-1,Lt=N==null?0:N.length;for(lt&&Lt&&(z=N[++St]);++St<Lt;)z=H(z,N[St],St,N);return z}function gO(N,H,z,lt){var St=N==null?0:N.length;for(lt&&St&&(z=N[--St]);St--;)z=H(z,N[St],St,N);return z}function vc(N,H){for(var z=-1,lt=N==null?0:N.length;++z<lt;)if(H(N[z],z,N))return!0;return!1}var pO=mc("length");function vO(N){return N.split("")}function mO(N){return N.match(br)||[]}function ap(N,H,z){var lt;return z(N,function(St,Lt,pe){if(H(St,Lt,pe))return lt=Lt,!1}),lt}function Ws(N,H,z,lt){for(var St=N.length,Lt=z+(lt?1:-1);lt?Lt--:++Lt<St;)if(H(N[Lt],Lt,N))return Lt;return-1}function Ro(N,H,z){return H===H?TO(N,H,z):Ws(N,sp,z)}function yO(N,H,z,lt){for(var St=z-1,Lt=N.length;++St<Lt;)if(lt(N[St],H))return St;return-1}function sp(N){return N!==N}function up(N,H){var z=N==null?0:N.length;return z?bc(N,H)/z:X}function mc(N){return function(H){return H==null?n:H[N]}}function yc(N){return function(H){return N==null?n:N[H]}}function lp(N,H,z,lt,St){return St(N,function(Lt,pe,Wt){z=lt?(lt=!1,Lt):H(z,Lt,pe,Wt)}),z}function bO(N,H){var z=N.length;for(N.sort(H);z--;)N[z]=N[z].value;return N}function bc(N,H){for(var z,lt=-1,St=N.length;++lt<St;){var Lt=H(N[lt]);Lt!==n&&(z=z===n?Lt:z+Lt)}return z}function wc(N,H){for(var z=-1,lt=Array(N);++z<N;)lt[z]=H(z);return lt}function wO(N,H){return Qt(H,function(z){return[z,N[z]]})}function cp(N){return N&&N.slice(0,gp(N)+1).replace(Pe,"")}function en(N){return function(H){return N(H)}}function xc(N,H){return Qt(H,function(z){return N[z]})}function xa(N,H){return N.has(H)}function fp(N,H){for(var z=-1,lt=N.length;++z<lt&&Ro(H,N[z],0)>-1;);return z}function hp(N,H){for(var z=N.length;z--&&Ro(H,N[z],0)>-1;);return z}function xO(N,H){for(var z=N.length,lt=0;z--;)N[z]===H&&++lt;return lt}var _O=yc(oO),SO=yc(aO);function EO(N){return"\\"+uO[N]}function OO(N,H){return N==null?n:N[H]}function $o(N){return ee.test(N)}function DO(N){return No.test(N)}function CO(N){for(var H,z=[];!(H=N.next()).done;)z.push(H.value);return z}function _c(N){var H=-1,z=Array(N.size);return N.forEach(function(lt,St){z[++H]=[St,lt]}),z}function dp(N,H){return function(z){return N(H(z))}}function ri(N,H){for(var z=-1,lt=N.length,St=0,Lt=[];++z<lt;){var pe=N[z];(pe===H||pe===g)&&(N[z]=g,Lt[St++]=z)}return Lt}function Vs(N){var H=-1,z=Array(N.size);return N.forEach(function(lt){z[++H]=lt}),z}function kO(N){var H=-1,z=Array(N.size);return N.forEach(function(lt){z[++H]=[lt,lt]}),z}function TO(N,H,z){for(var lt=z-1,St=N.length;++lt<St;)if(N[lt]===H)return lt;return-1}function AO(N,H,z){for(var lt=z+1;lt--;)if(N[lt]===H)return lt;return lt}function Io(N){return $o(N)?RO(N):pO(N)}function Pn(N){return $o(N)?$O(N):vO(N)}function gp(N){for(var H=N.length;H--&&va.test(N.charAt(H)););return H}var NO=yc(sO);function RO(N){for(var H=he.lastIndex=0;he.test(N);)++H;return H}function $O(N){return N.match(he)||[]}function IO(N){return N.match(ge)||[]}var PO=function N(H){H=H==null?we:Po.defaults(we.Object(),H,Po.pick(we,wa));var z=H.Array,lt=H.Date,St=H.Error,Lt=H.Function,pe=H.Math,Wt=H.Object,Sc=H.RegExp,jO=H.String,mn=H.TypeError,Ys=z.prototype,LO=Lt.prototype,jo=Wt.prototype,qs=H["__core-js_shared__"],Ks=LO.toString,Ut=jo.hasOwnProperty,MO=0,pp=function(){var r=/[^.]+$/.exec(qs&&qs.keys&&qs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Gs=jo.toString,zO=Ks.call(Wt),FO=we._,BO=Sc("^"+Ks.call(Ut).replace(mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Js=Qg?H.Buffer:n,ii=H.Symbol,Qs=H.Uint8Array,vp=Js?Js.allocUnsafe:n,Zs=dp(Wt.getPrototypeOf,Wt),mp=Wt.create,yp=jo.propertyIsEnumerable,tu=Ys.splice,bp=ii?ii.isConcatSpreadable:n,_a=ii?ii.iterator:n,Vi=ii?ii.toStringTag:n,eu=function(){try{var r=Ji(Wt,"defineProperty");return r({},"",{}),r}catch(o){}}(),UO=H.clearTimeout!==we.clearTimeout&&H.clearTimeout,XO=lt&&lt.now!==we.Date.now&&lt.now,HO=H.setTimeout!==we.setTimeout&&H.setTimeout,nu=pe.ceil,ru=pe.floor,Ec=Wt.getOwnPropertySymbols,WO=Js?Js.isBuffer:n,wp=H.isFinite,VO=Ys.join,YO=dp(Wt.keys,Wt),ve=pe.max,De=pe.min,qO=lt.now,KO=H.parseInt,xp=pe.random,GO=Ys.reverse,Oc=Ji(H,"DataView"),Sa=Ji(H,"Map"),Dc=Ji(H,"Promise"),Lo=Ji(H,"Set"),Ea=Ji(H,"WeakMap"),Oa=Ji(Wt,"create"),iu=Ea&&new Ea,Mo={},JO=Qi(Oc),QO=Qi(Sa),ZO=Qi(Dc),t2=Qi(Lo),e2=Qi(Ea),ou=ii?ii.prototype:n,Da=ou?ou.valueOf:n,_p=ou?ou.toString:n;function y(r){if(oe(r)&&!Et(r)&&!(r instanceof Rt)){if(r instanceof yn)return r;if(Ut.call(r,"__wrapped__"))return Sv(r)}return new yn(r)}var zo=function(){function r(){}return function(o){if(!ne(o))return{};if(mp)return mp(o);r.prototype=o;var u=new r;return r.prototype=n,u}}();function au(){}function yn(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}y.templateSettings={escape:Zt,evaluate:te,interpolate:pr,variable:"",imports:{_:y}},y.prototype=au.prototype,y.prototype.constructor=y,yn.prototype=zo(au.prototype),yn.prototype.constructor=yn;function Rt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function n2(){var r=new Rt(this.__wrapped__);return r.__actions__=Ue(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ue(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ue(this.__views__),r}function r2(){if(this.__filtered__){var r=new Rt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function i2(){var r=this.__wrapped__.value(),o=this.__dir__,u=Et(r),f=o<0,m=u?r.length:0,x=vD(0,m,this.__views__),D=x.start,T=x.end,$=T-D,Y=f?T:D-1,q=this.__iteratees__,J=q.length,ot=0,dt=De($,this.__takeCount__);if(!u||!f&&m==$&&dt==$)return Vp(r,this.__actions__);var vt=[];t:for(;$--&&ot<dt;){Y+=o;for(var Ct=-1,mt=r[Y];++Ct<J;){var At=q[Ct],$t=At.iteratee,on=At.type,Me=$t(mt);if(on==j)mt=Me;else if(!Me){if(on==k)continue t;break t}}vt[ot++]=mt}return vt}Rt.prototype=zo(au.prototype),Rt.prototype.constructor=Rt;function Yi(r){var o=-1,u=r==null?0:r.length;for(this.clear();++o<u;){var f=r[o];this.set(f[0],f[1])}}function o2(){this.__data__=Oa?Oa(null):{},this.size=0}function a2(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function s2(r){var o=this.__data__;if(Oa){var u=o[r];return u===h?n:u}return Ut.call(o,r)?o[r]:n}function u2(r){var o=this.__data__;return Oa?o[r]!==n:Ut.call(o,r)}function l2(r,o){var u=this.__data__;return this.size+=this.has(r)?0:1,u[r]=Oa&&o===n?h:o,this}Yi.prototype.clear=o2,Yi.prototype.delete=a2,Yi.prototype.get=s2,Yi.prototype.has=u2,Yi.prototype.set=l2;function Cr(r){var o=-1,u=r==null?0:r.length;for(this.clear();++o<u;){var f=r[o];this.set(f[0],f[1])}}function c2(){this.__data__=[],this.size=0}function f2(r){var o=this.__data__,u=su(o,r);if(u<0)return!1;var f=o.length-1;return u==f?o.pop():tu.call(o,u,1),--this.size,!0}function h2(r){var o=this.__data__,u=su(o,r);return u<0?n:o[u][1]}function d2(r){return su(this.__data__,r)>-1}function g2(r,o){var u=this.__data__,f=su(u,r);return f<0?(++this.size,u.push([r,o])):u[f][1]=o,this}Cr.prototype.clear=c2,Cr.prototype.delete=f2,Cr.prototype.get=h2,Cr.prototype.has=d2,Cr.prototype.set=g2;function kr(r){var o=-1,u=r==null?0:r.length;for(this.clear();++o<u;){var f=r[o];this.set(f[0],f[1])}}function p2(){this.size=0,this.__data__={hash:new Yi,map:new(Sa||Cr),string:new Yi}}function v2(r){var o=bu(this,r).delete(r);return this.size-=o?1:0,o}function m2(r){return bu(this,r).get(r)}function y2(r){return bu(this,r).has(r)}function b2(r,o){var u=bu(this,r),f=u.size;return u.set(r,o),this.size+=u.size==f?0:1,this}kr.prototype.clear=p2,kr.prototype.delete=v2,kr.prototype.get=m2,kr.prototype.has=y2,kr.prototype.set=b2;function qi(r){var o=-1,u=r==null?0:r.length;for(this.__data__=new kr;++o<u;)this.add(r[o])}function w2(r){return this.__data__.set(r,h),this}function x2(r){return this.__data__.has(r)}qi.prototype.add=qi.prototype.push=w2,qi.prototype.has=x2;function jn(r){var o=this.__data__=new Cr(r);this.size=o.size}function _2(){this.__data__=new Cr,this.size=0}function S2(r){var o=this.__data__,u=o.delete(r);return this.size=o.size,u}function E2(r){return this.__data__.get(r)}function O2(r){return this.__data__.has(r)}function D2(r,o){var u=this.__data__;if(u instanceof Cr){var f=u.__data__;if(!Sa||f.length<a-1)return f.push([r,o]),this.size=++u.size,this;u=this.__data__=new kr(f)}return u.set(r,o),this.size=u.size,this}jn.prototype.clear=_2,jn.prototype.delete=S2,jn.prototype.get=E2,jn.prototype.has=O2,jn.prototype.set=D2;function Sp(r,o){var u=Et(r),f=!u&&Zi(r),m=!u&&!f&&li(r),x=!u&&!f&&!m&&Xo(r),D=u||f||m||x,T=D?wc(r.length,jO):[],$=T.length;for(var Y in r)(o||Ut.call(r,Y))&&!(D&&(Y=="length"||m&&(Y=="offset"||Y=="parent")||x&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||Rr(Y,$)))&&T.push(Y);return T}function Ep(r){var o=r.length;return o?r[Lc(0,o-1)]:n}function C2(r,o){return wu(Ue(r),Ki(o,0,r.length))}function k2(r){return wu(Ue(r))}function Cc(r,o,u){(u!==n&&!Ln(r[o],u)||u===n&&!(o in r))&&Tr(r,o,u)}function Ca(r,o,u){var f=r[o];(!(Ut.call(r,o)&&Ln(f,u))||u===n&&!(o in r))&&Tr(r,o,u)}function su(r,o){for(var u=r.length;u--;)if(Ln(r[u][0],o))return u;return-1}function T2(r,o,u,f){return oi(r,function(m,x,D){o(f,m,u(m),D)}),f}function Op(r,o){return r&&ar(o,me(o),r)}function A2(r,o){return r&&ar(o,He(o),r)}function Tr(r,o,u){o=="__proto__"&&eu?eu(r,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):r[o]=u}function kc(r,o){for(var u=-1,f=o.length,m=z(f),x=r==null;++u<f;)m[u]=x?n:lf(r,o[u]);return m}function Ki(r,o,u){return r===r&&(u!==n&&(r=r<=u?r:u),o!==n&&(r=r>=o?r:o)),r}function bn(r,o,u,f,m,x){var D,T=o&v,$=o&p,Y=o&b;if(u&&(D=m?u(r,f,m,x):u(r)),D!==n)return D;if(!ne(r))return r;var q=Et(r);if(q){if(D=yD(r),!T)return Ue(r,D)}else{var J=Ce(r),ot=J==Te||J==Ze;if(li(r))return Kp(r,T);if(J==Ht||J==ut||ot&&!m){if(D=$||ot?{}:gv(r),!T)return $?sD(r,A2(D,r)):aD(r,Op(D,r))}else{if(!Vt[J])return m?r:{};D=bD(r,J,T)}}x||(x=new jn);var dt=x.get(r);if(dt)return dt;x.set(r,D),Xv(r)?r.forEach(function(mt){D.add(bn(mt,o,u,mt,r,x))}):Bv(r)&&r.forEach(function(mt,At){D.set(At,bn(mt,o,u,At,r,x))});var vt=Y?$?qc:Yc:$?He:me,Ct=q?n:vt(r);return vn(Ct||r,function(mt,At){Ct&&(At=mt,mt=r[At]),Ca(D,At,bn(mt,o,u,At,r,x))}),D}function N2(r){var o=me(r);return function(u){return Dp(u,r,o)}}function Dp(r,o,u){var f=u.length;if(r==null)return!f;for(r=Wt(r);f--;){var m=u[f],x=o[m],D=r[m];if(D===n&&!(m in r)||!x(D))return!1}return!0}function Cp(r,o,u){if(typeof r!="function")throw new mn(l);return Ia(function(){r.apply(n,u)},o)}function ka(r,o,u,f){var m=-1,x=Hs,D=!0,T=r.length,$=[],Y=o.length;if(!T)return $;u&&(o=Qt(o,en(u))),f?(x=gc,D=!1):o.length>=a&&(x=xa,D=!1,o=new qi(o));t:for(;++m<T;){var q=r[m],J=u==null?q:u(q);if(q=f||q!==0?q:0,D&&J===J){for(var ot=Y;ot--;)if(o[ot]===J)continue t;$.push(q)}else x(o,J,f)||$.push(q)}return $}var oi=tv(or),kp=tv(Ac,!0);function R2(r,o){var u=!0;return oi(r,function(f,m,x){return u=!!o(f,m,x),u}),u}function uu(r,o,u){for(var f=-1,m=r.length;++f<m;){var x=r[f],D=o(x);if(D!=null&&(T===n?D===D&&!rn(D):u(D,T)))var T=D,$=x}return $}function $2(r,o,u,f){var m=r.length;for(u=Dt(u),u<0&&(u=-u>m?0:m+u),f=f===n||f>m?m:Dt(f),f<0&&(f+=m),f=u>f?0:Wv(f);u<f;)r[u++]=o;return r}function Tp(r,o){var u=[];return oi(r,function(f,m,x){o(f,m,x)&&u.push(f)}),u}function xe(r,o,u,f,m){var x=-1,D=r.length;for(u||(u=xD),m||(m=[]);++x<D;){var T=r[x];o>0&&u(T)?o>1?xe(T,o-1,u,f,m):ni(m,T):f||(m[m.length]=T)}return m}var Tc=ev(),Ap=ev(!0);function or(r,o){return r&&Tc(r,o,me)}function Ac(r,o){return r&&Ap(r,o,me)}function lu(r,o){return ei(o,function(u){return $r(r[u])})}function Gi(r,o){o=si(o,r);for(var u=0,f=o.length;r!=null&&u<f;)r=r[sr(o[u++])];return u&&u==f?r:n}function Np(r,o,u){var f=o(r);return Et(r)?f:ni(f,u(r))}function je(r){return r==null?r===n?dr:Be:Vi&&Vi in Wt(r)?pD(r):kD(r)}function Nc(r,o){return r>o}function I2(r,o){return r!=null&&Ut.call(r,o)}function P2(r,o){return r!=null&&o in Wt(r)}function j2(r,o,u){return r>=De(o,u)&&r<ve(o,u)}function Rc(r,o,u){for(var f=u?gc:Hs,m=r[0].length,x=r.length,D=x,T=z(x),$=1/0,Y=[];D--;){var q=r[D];D&&o&&(q=Qt(q,en(o))),$=De(q.length,$),T[D]=!u&&(o||m>=120&&q.length>=120)?new qi(D&&q):n}q=r[0];var J=-1,ot=T[0];t:for(;++J<m&&Y.length<$;){var dt=q[J],vt=o?o(dt):dt;if(dt=u||dt!==0?dt:0,!(ot?xa(ot,vt):f(Y,vt,u))){for(D=x;--D;){var Ct=T[D];if(!(Ct?xa(Ct,vt):f(r[D],vt,u)))continue t}ot&&ot.push(vt),Y.push(dt)}}return Y}function L2(r,o,u,f){return or(r,function(m,x,D){o(f,u(m),x,D)}),f}function Ta(r,o,u){o=si(o,r),r=yv(r,o);var f=r==null?r:r[sr(xn(o))];return f==null?n:tn(f,r,u)}function Rp(r){return oe(r)&&je(r)==ut}function M2(r){return oe(r)&&je(r)==gr}function z2(r){return oe(r)&&je(r)==bt}function Aa(r,o,u,f,m){return r===o?!0:r==null||o==null||!oe(r)&&!oe(o)?r!==r&&o!==o:F2(r,o,u,f,Aa,m)}function F2(r,o,u,f,m,x){var D=Et(r),T=Et(o),$=D?wt:Ce(r),Y=T?wt:Ce(o);$=$==ut?Ht:$,Y=Y==ut?Ht:Y;var q=$==Ht,J=Y==Ht,ot=$==Y;if(ot&&li(r)){if(!li(o))return!1;D=!0,q=!1}if(ot&&!q)return x||(x=new jn),D||Xo(r)?fv(r,o,u,f,m,x):dD(r,o,$,u,f,m,x);if(!(u&O)){var dt=q&&Ut.call(r,"__wrapped__"),vt=J&&Ut.call(o,"__wrapped__");if(dt||vt){var Ct=dt?r.value():r,mt=vt?o.value():o;return x||(x=new jn),m(Ct,mt,u,f,x)}}return ot?(x||(x=new jn),gD(r,o,u,f,m,x)):!1}function B2(r){return oe(r)&&Ce(r)==jt}function $c(r,o,u,f){var m=u.length,x=m,D=!f;if(r==null)return!x;for(r=Wt(r);m--;){var T=u[m];if(D&&T[2]?T[1]!==r[T[0]]:!(T[0]in r))return!1}for(;++m<x;){T=u[m];var $=T[0],Y=r[$],q=T[1];if(D&&T[2]){if(Y===n&&!($ in r))return!1}else{var J=new jn;if(f)var ot=f(Y,q,$,r,o,J);if(!(ot===n?Aa(q,Y,O|C,f,J):ot))return!1}}return!0}function $p(r){if(!ne(r)||SD(r))return!1;var o=$r(r)?BO:mo;return o.test(Qi(r))}function U2(r){return oe(r)&&je(r)==It}function X2(r){return oe(r)&&Ce(r)==kt}function H2(r){return oe(r)&&Du(r.length)&&!!Ft[je(r)]}function Ip(r){return typeof r=="function"?r:r==null?We:typeof r=="object"?Et(r)?Lp(r[0],r[1]):jp(r):n0(r)}function Ic(r){if(!$a(r))return YO(r);var o=[];for(var u in Wt(r))Ut.call(r,u)&&u!="constructor"&&o.push(u);return o}function W2(r){if(!ne(r))return CD(r);var o=$a(r),u=[];for(var f in r)f=="constructor"&&(o||!Ut.call(r,f))||u.push(f);return u}function Pc(r,o){return r<o}function Pp(r,o){var u=-1,f=Xe(r)?z(r.length):[];return oi(r,function(m,x,D){f[++u]=o(m,x,D)}),f}function jp(r){var o=Gc(r);return o.length==1&&o[0][2]?vv(o[0][0],o[0][1]):function(u){return u===r||$c(u,r,o)}}function Lp(r,o){return Qc(r)&&pv(o)?vv(sr(r),o):function(u){var f=lf(u,r);return f===n&&f===o?cf(u,r):Aa(o,f,O|C)}}function cu(r,o,u,f,m){r!==o&&Tc(o,function(x,D){if(m||(m=new jn),ne(x))V2(r,o,D,u,cu,f,m);else{var T=f?f(tf(r,D),x,D+"",r,o,m):n;T===n&&(T=x),Cc(r,D,T)}},He)}function V2(r,o,u,f,m,x,D){var T=tf(r,u),$=tf(o,u),Y=D.get($);if(Y){Cc(r,u,Y);return}var q=x?x(T,$,u+"",r,o,D):n,J=q===n;if(J){var ot=Et($),dt=!ot&&li($),vt=!ot&&!dt&&Xo($);q=$,ot||dt||vt?Et(T)?q=T:se(T)?q=Ue(T):dt?(J=!1,q=Kp($,!0)):vt?(J=!1,q=Gp($,!0)):q=[]:Pa($)||Zi($)?(q=T,Zi(T)?q=Vv(T):(!ne(T)||$r(T))&&(q=gv($))):J=!1}J&&(D.set($,q),m(q,$,f,x,D),D.delete($)),Cc(r,u,q)}function Mp(r,o){var u=r.length;if(u)return o+=o<0?u:0,Rr(o,u)?r[o]:n}function zp(r,o,u){o.length?o=Qt(o,function(x){return Et(x)?function(D){return Gi(D,x.length===1?x[0]:x)}:x}):o=[We];var f=-1;o=Qt(o,en(gt()));var m=Pp(r,function(x,D,T){var $=Qt(o,function(Y){return Y(x)});return{criteria:$,index:++f,value:x}});return bO(m,function(x,D){return oD(x,D,u)})}function Y2(r,o){return Fp(r,o,function(u,f){return cf(r,f)})}function Fp(r,o,u){for(var f=-1,m=o.length,x={};++f<m;){var D=o[f],T=Gi(r,D);u(T,D)&&Na(x,si(D,r),T)}return x}function q2(r){return function(o){return Gi(o,r)}}function jc(r,o,u,f){var m=f?yO:Ro,x=-1,D=o.length,T=r;for(r===o&&(o=Ue(o)),u&&(T=Qt(r,en(u)));++x<D;)for(var $=0,Y=o[x],q=u?u(Y):Y;($=m(T,q,$,f))>-1;)T!==r&&tu.call(T,$,1),tu.call(r,$,1);return r}function Bp(r,o){for(var u=r?o.length:0,f=u-1;u--;){var m=o[u];if(u==f||m!==x){var x=m;Rr(m)?tu.call(r,m,1):Fc(r,m)}}return r}function Lc(r,o){return r+ru(xp()*(o-r+1))}function K2(r,o,u,f){for(var m=-1,x=ve(nu((o-r)/(u||1)),0),D=z(x);x--;)D[f?x:++m]=r,r+=u;return D}function Mc(r,o){var u="";if(!r||o<1||o>U)return u;do o%2&&(u+=r),o=ru(o/2),o&&(r+=r);while(o);return u}function Tt(r,o){return ef(mv(r,o,We),r+"")}function G2(r){return Ep(Ho(r))}function J2(r,o){var u=Ho(r);return wu(u,Ki(o,0,u.length))}function Na(r,o,u,f){if(!ne(r))return r;o=si(o,r);for(var m=-1,x=o.length,D=x-1,T=r;T!=null&&++m<x;){var $=sr(o[m]),Y=u;if($==="__proto__"||$==="constructor"||$==="prototype")return r;if(m!=D){var q=T[$];Y=f?f(q,$,T):n,Y===n&&(Y=ne(q)?q:Rr(o[m+1])?[]:{})}Ca(T,$,Y),T=T[$]}return r}var Up=iu?function(r,o){return iu.set(r,o),r}:We,Q2=eu?function(r,o){return eu(r,"toString",{configurable:!0,enumerable:!1,value:hf(o),writable:!0})}:We;function Z2(r){return wu(Ho(r))}function wn(r,o,u){var f=-1,m=r.length;o<0&&(o=-o>m?0:m+o),u=u>m?m:u,u<0&&(u+=m),m=o>u?0:u-o>>>0,o>>>=0;for(var x=z(m);++f<m;)x[f]=r[f+o];return x}function tD(r,o){var u;return oi(r,function(f,m,x){return u=o(f,m,x),!u}),!!u}function fu(r,o,u){var f=0,m=r==null?f:r.length;if(typeof o=="number"&&o===o&&m<=it){for(;f<m;){var x=f+m>>>1,D=r[x];D!==null&&!rn(D)&&(u?D<=o:D<o)?f=x+1:m=x}return m}return zc(r,o,We,u)}function zc(r,o,u,f){var m=0,x=r==null?0:r.length;if(x===0)return 0;o=u(o);for(var D=o!==o,T=o===null,$=rn(o),Y=o===n;m<x;){var q=ru((m+x)/2),J=u(r[q]),ot=J!==n,dt=J===null,vt=J===J,Ct=rn(J);if(D)var mt=f||vt;else Y?mt=vt&&(f||ot):T?mt=vt&&ot&&(f||!dt):$?mt=vt&&ot&&!dt&&(f||!Ct):dt||Ct?mt=!1:mt=f?J<=o:J<o;mt?m=q+1:x=q}return De(x,et)}function Xp(r,o){for(var u=-1,f=r.length,m=0,x=[];++u<f;){var D=r[u],T=o?o(D):D;if(!u||!Ln(T,$)){var $=T;x[m++]=D===0?0:D}}return x}function Hp(r){return typeof r=="number"?r:rn(r)?X:+r}function nn(r){if(typeof r=="string")return r;if(Et(r))return Qt(r,nn)+"";if(rn(r))return _p?_p.call(r):"";var o=r+"";return o=="0"&&1/r==-B?"-0":o}function ai(r,o,u){var f=-1,m=Hs,x=r.length,D=!0,T=[],$=T;if(u)D=!1,m=gc;else if(x>=a){var Y=o?null:fD(r);if(Y)return Vs(Y);D=!1,m=xa,$=new qi}else $=o?[]:T;t:for(;++f<x;){var q=r[f],J=o?o(q):q;if(q=u||q!==0?q:0,D&&J===J){for(var ot=$.length;ot--;)if($[ot]===J)continue t;o&&$.push(J),T.push(q)}else m($,J,u)||($!==T&&$.push(J),T.push(q))}return T}function Fc(r,o){return o=si(o,r),r=yv(r,o),r==null||delete r[sr(xn(o))]}function Wp(r,o,u,f){return Na(r,o,u(Gi(r,o)),f)}function hu(r,o,u,f){for(var m=r.length,x=f?m:-1;(f?x--:++x<m)&&o(r[x],x,r););return u?wn(r,f?0:x,f?x+1:m):wn(r,f?x+1:0,f?m:x)}function Vp(r,o){var u=r;return u instanceof Rt&&(u=u.value()),pc(o,function(f,m){return m.func.apply(m.thisArg,ni([f],m.args))},u)}function Bc(r,o,u){var f=r.length;if(f<2)return f?ai(r[0]):[];for(var m=-1,x=z(f);++m<f;)for(var D=r[m],T=-1;++T<f;)T!=m&&(x[m]=ka(x[m]||D,r[T],o,u));return ai(xe(x,1),o,u)}function Yp(r,o,u){for(var f=-1,m=r.length,x=o.length,D={};++f<m;){var T=f<x?o[f]:n;u(D,r[f],T)}return D}function Uc(r){return se(r)?r:[]}function Xc(r){return typeof r=="function"?r:We}function si(r,o){return Et(r)?r:Qc(r,o)?[r]:_v(Bt(r))}var eD=Tt;function ui(r,o,u){var f=r.length;return u=u===n?f:u,!o&&u>=f?r:wn(r,o,u)}var qp=UO||function(r){return we.clearTimeout(r)};function Kp(r,o){if(o)return r.slice();var u=r.length,f=vp?vp(u):new r.constructor(u);return r.copy(f),f}function Hc(r){var o=new r.constructor(r.byteLength);return new Qs(o).set(new Qs(r)),o}function nD(r,o){var u=o?Hc(r.buffer):r.buffer;return new r.constructor(u,r.byteOffset,r.byteLength)}function rD(r){var o=new r.constructor(r.source,Pi.exec(r));return o.lastIndex=r.lastIndex,o}function iD(r){return Da?Wt(Da.call(r)):{}}function Gp(r,o){var u=o?Hc(r.buffer):r.buffer;return new r.constructor(u,r.byteOffset,r.length)}function Jp(r,o){if(r!==o){var u=r!==n,f=r===null,m=r===r,x=rn(r),D=o!==n,T=o===null,$=o===o,Y=rn(o);if(!T&&!Y&&!x&&r>o||x&&D&&$&&!T&&!Y||f&&D&&$||!u&&$||!m)return 1;if(!f&&!x&&!Y&&r<o||Y&&u&&m&&!f&&!x||T&&u&&m||!D&&m||!$)return-1}return 0}function oD(r,o,u){for(var f=-1,m=r.criteria,x=o.criteria,D=m.length,T=u.length;++f<D;){var $=Jp(m[f],x[f]);if($){if(f>=T)return $;var Y=u[f];return $*(Y=="desc"?-1:1)}}return r.index-o.index}function Qp(r,o,u,f){for(var m=-1,x=r.length,D=u.length,T=-1,$=o.length,Y=ve(x-D,0),q=z($+Y),J=!f;++T<$;)q[T]=o[T];for(;++m<D;)(J||m<x)&&(q[u[m]]=r[m]);for(;Y--;)q[T++]=r[m++];return q}function Zp(r,o,u,f){for(var m=-1,x=r.length,D=-1,T=u.length,$=-1,Y=o.length,q=ve(x-T,0),J=z(q+Y),ot=!f;++m<q;)J[m]=r[m];for(var dt=m;++$<Y;)J[dt+$]=o[$];for(;++D<T;)(ot||m<x)&&(J[dt+u[D]]=r[m++]);return J}function Ue(r,o){var u=-1,f=r.length;for(o||(o=z(f));++u<f;)o[u]=r[u];return o}function ar(r,o,u,f){var m=!u;u||(u={});for(var x=-1,D=o.length;++x<D;){var T=o[x],$=f?f(u[T],r[T],T,u,r):n;$===n&&($=r[T]),m?Tr(u,T,$):Ca(u,T,$)}return u}function aD(r,o){return ar(r,Jc(r),o)}function sD(r,o){return ar(r,hv(r),o)}function du(r,o){return function(u,f){var m=Et(u)?hO:T2,x=o?o():{};return m(u,r,gt(f,2),x)}}function Fo(r){return Tt(function(o,u){var f=-1,m=u.length,x=m>1?u[m-1]:n,D=m>2?u[2]:n;for(x=r.length>3&&typeof x=="function"?(m--,x):n,D&&Le(u[0],u[1],D)&&(x=m<3?n:x,m=1),o=Wt(o);++f<m;){var T=u[f];T&&r(o,T,f,x)}return o})}function tv(r,o){return function(u,f){if(u==null)return u;if(!Xe(u))return r(u,f);for(var m=u.length,x=o?m:-1,D=Wt(u);(o?x--:++x<m)&&f(D[x],x,D)!==!1;);return u}}function ev(r){return function(o,u,f){for(var m=-1,x=Wt(o),D=f(o),T=D.length;T--;){var $=D[r?T:++m];if(u(x[$],$,x)===!1)break}return o}}function uD(r,o,u){var f=o&w,m=Ra(r);function x(){var D=this&&this!==we&&this instanceof x?m:r;return D.apply(f?u:this,arguments)}return x}function nv(r){return function(o){o=Bt(o);var u=$o(o)?Pn(o):n,f=u?u[0]:o.charAt(0),m=u?ui(u,1).join(""):o.slice(1);return f[r]()+m}}function Bo(r){return function(o){return pc(t0(Zv(o).replace(st,"")),r,"")}}function Ra(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var u=zo(r.prototype),f=r.apply(u,o);return ne(f)?f:u}}function lD(r,o,u){var f=Ra(r);function m(){for(var x=arguments.length,D=z(x),T=x,$=Uo(m);T--;)D[T]=arguments[T];var Y=x<3&&D[0]!==$&&D[x-1]!==$?[]:ri(D,$);if(x-=Y.length,x<u)return sv(r,o,gu,m.placeholder,n,D,Y,n,n,u-x);var q=this&&this!==we&&this instanceof m?f:r;return tn(q,this,D)}return m}function rv(r){return function(o,u,f){var m=Wt(o);if(!Xe(o)){var x=gt(u,3);o=me(o),u=function(T){return x(m[T],T,m)}}var D=r(o,u,f);return D>-1?m[x?o[D]:D]:n}}function iv(r){return Nr(function(o){var u=o.length,f=u,m=yn.prototype.thru;for(r&&o.reverse();f--;){var x=o[f];if(typeof x!="function")throw new mn(l);if(m&&!D&&yu(x)=="wrapper")var D=new yn([],!0)}for(f=D?f:u;++f<u;){x=o[f];var T=yu(x),$=T=="wrapper"?Kc(x):n;$&&Zc($[0])&&$[1]==(M|A|L|nt)&&!$[4].length&&$[9]==1?D=D[yu($[0])].apply(D,$[3]):D=x.length==1&&Zc(x)?D[T]():D.thru(x)}return function(){var Y=arguments,q=Y[0];if(D&&Y.length==1&&Et(q))return D.plant(q).value();for(var J=0,ot=u?o[J].apply(this,Y):q;++J<u;)ot=o[J].call(this,ot);return ot}})}function gu(r,o,u,f,m,x,D,T,$,Y){var q=o&M,J=o&w,ot=o&S,dt=o&(A|_),vt=o&ct,Ct=ot?n:Ra(r);function mt(){for(var At=arguments.length,$t=z(At),on=At;on--;)$t[on]=arguments[on];if(dt)var Me=Uo(mt),an=xO($t,Me);if(f&&($t=Qp($t,f,m,dt)),x&&($t=Zp($t,x,D,dt)),At-=an,dt&&At<Y){var ue=ri($t,Me);return sv(r,o,gu,mt.placeholder,u,$t,ue,T,$,Y-At)}var Mn=J?u:this,Pr=ot?Mn[r]:r;return At=$t.length,T?$t=TD($t,T):vt&&At>1&&$t.reverse(),q&&$<At&&($t.length=$),this&&this!==we&&this instanceof mt&&(Pr=Ct||Ra(Pr)),Pr.apply(Mn,$t)}return mt}function ov(r,o){return function(u,f){return L2(u,r,o(f),{})}}function pu(r,o){return function(u,f){var m;if(u===n&&f===n)return o;if(u!==n&&(m=u),f!==n){if(m===n)return f;typeof u=="string"||typeof f=="string"?(u=nn(u),f=nn(f)):(u=Hp(u),f=Hp(f)),m=r(u,f)}return m}}function Wc(r){return Nr(function(o){return o=Qt(o,en(gt())),Tt(function(u){var f=this;return r(o,function(m){return tn(m,f,u)})})})}function vu(r,o){o=o===n?" ":nn(o);var u=o.length;if(u<2)return u?Mc(o,r):o;var f=Mc(o,nu(r/Io(o)));return $o(o)?ui(Pn(f),0,r).join(""):f.slice(0,r)}function cD(r,o,u,f){var m=o&w,x=Ra(r);function D(){for(var T=-1,$=arguments.length,Y=-1,q=f.length,J=z(q+$),ot=this&&this!==we&&this instanceof D?x:r;++Y<q;)J[Y]=f[Y];for(;$--;)J[Y++]=arguments[++T];return tn(ot,m?u:this,J)}return D}function av(r){return function(o,u,f){return f&&typeof f!="number"&&Le(o,u,f)&&(u=f=n),o=Ir(o),u===n?(u=o,o=0):u=Ir(u),f=f===n?o<u?1:-1:Ir(f),K2(o,u,f,r)}}function mu(r){return function(o,u){return typeof o=="string"&&typeof u=="string"||(o=_n(o),u=_n(u)),r(o,u)}}function sv(r,o,u,f,m,x,D,T,$,Y){var q=o&A,J=q?D:n,ot=q?n:D,dt=q?x:n,vt=q?n:x;o|=q?L:I,o&=~(q?I:L),o&P||(o&=~(w|S));var Ct=[r,o,m,dt,J,vt,ot,T,$,Y],mt=u.apply(n,Ct);return Zc(r)&&bv(mt,Ct),mt.placeholder=f,wv(mt,r,o)}function Vc(r){var o=pe[r];return function(u,f){if(u=_n(u),f=f==null?0:De(Dt(f),292),f&&wp(u)){var m=(Bt(u)+"e").split("e"),x=o(m[0]+"e"+(+m[1]+f));return m=(Bt(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-f))}return o(u)}}var fD=Lo&&1/Vs(new Lo([,-0]))[1]==B?function(r){return new Lo(r)}:pf;function uv(r){return function(o){var u=Ce(o);return u==jt?_c(o):u==kt?kO(o):wO(o,r(o))}}function Ar(r,o,u,f,m,x,D,T){var $=o&S;if(!$&&typeof r!="function")throw new mn(l);var Y=f?f.length:0;if(Y||(o&=~(L|I),f=m=n),D=D===n?D:ve(Dt(D),0),T=T===n?T:Dt(T),Y-=m?m.length:0,o&I){var q=f,J=m;f=m=n}var ot=$?n:Kc(r),dt=[r,o,u,f,m,q,J,x,D,T];if(ot&&DD(dt,ot),r=dt[0],o=dt[1],u=dt[2],f=dt[3],m=dt[4],T=dt[9]=dt[9]===n?$?0:r.length:ve(dt[9]-Y,0),!T&&o&(A|_)&&(o&=~(A|_)),!o||o==w)var vt=uD(r,o,u);else o==A||o==_?vt=lD(r,o,T):(o==L||o==(w|L))&&!m.length?vt=cD(r,o,u,f):vt=gu.apply(n,dt);var Ct=ot?Up:bv;return wv(Ct(vt,dt),r,o)}function lv(r,o,u,f){return r===n||Ln(r,jo[u])&&!Ut.call(f,u)?o:r}function cv(r,o,u,f,m,x){return ne(r)&&ne(o)&&(x.set(o,r),cu(r,o,n,cv,x),x.delete(o)),r}function hD(r){return Pa(r)?n:r}function fv(r,o,u,f,m,x){var D=u&O,T=r.length,$=o.length;if(T!=$&&!(D&&$>T))return!1;var Y=x.get(r),q=x.get(o);if(Y&&q)return Y==o&&q==r;var J=-1,ot=!0,dt=u&C?new qi:n;for(x.set(r,o),x.set(o,r);++J<T;){var vt=r[J],Ct=o[J];if(f)var mt=D?f(Ct,vt,J,o,r,x):f(vt,Ct,J,r,o,x);if(mt!==n){if(mt)continue;ot=!1;break}if(dt){if(!vc(o,function(At,$t){if(!xa(dt,$t)&&(vt===At||m(vt,At,u,f,x)))return dt.push($t)})){ot=!1;break}}else if(!(vt===Ct||m(vt,Ct,u,f,x))){ot=!1;break}}return x.delete(r),x.delete(o),ot}function dD(r,o,u,f,m,x,D){switch(u){case dn:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case gr:return!(r.byteLength!=o.byteLength||!x(new Qs(r),new Qs(o)));case ht:case bt:case re:return Ln(+r,+o);case Jt:return r.name==o.name&&r.message==o.message;case It:case ae:return r==o+"";case jt:var T=_c;case kt:var $=f&O;if(T||(T=Vs),r.size!=o.size&&!$)return!1;var Y=D.get(r);if(Y)return Y==o;f|=C,D.set(r,o);var q=fv(T(r),T(o),f,m,x,D);return D.delete(r),q;case hn:if(Da)return Da.call(r)==Da.call(o)}return!1}function gD(r,o,u,f,m,x){var D=u&O,T=Yc(r),$=T.length,Y=Yc(o),q=Y.length;if($!=q&&!D)return!1;for(var J=$;J--;){var ot=T[J];if(!(D?ot in o:Ut.call(o,ot)))return!1}var dt=x.get(r),vt=x.get(o);if(dt&&vt)return dt==o&&vt==r;var Ct=!0;x.set(r,o),x.set(o,r);for(var mt=D;++J<$;){ot=T[J];var At=r[ot],$t=o[ot];if(f)var on=D?f($t,At,ot,o,r,x):f(At,$t,ot,r,o,x);if(!(on===n?At===$t||m(At,$t,u,f,x):on)){Ct=!1;break}mt||(mt=ot=="constructor")}if(Ct&&!mt){var Me=r.constructor,an=o.constructor;Me!=an&&"constructor"in r&&"constructor"in o&&!(typeof Me=="function"&&Me instanceof Me&&typeof an=="function"&&an instanceof an)&&(Ct=!1)}return x.delete(r),x.delete(o),Ct}function Nr(r){return ef(mv(r,n,Dv),r+"")}function Yc(r){return Np(r,me,Jc)}function qc(r){return Np(r,He,hv)}var Kc=iu?function(r){return iu.get(r)}:pf;function yu(r){for(var o=r.name+"",u=Mo[o],f=Ut.call(Mo,o)?u.length:0;f--;){var m=u[f],x=m.func;if(x==null||x==r)return m.name}return o}function Uo(r){var o=Ut.call(y,"placeholder")?y:r;return o.placeholder}function gt(){var r=y.iteratee||df;return r=r===df?Ip:r,arguments.length?r(arguments[0],arguments[1]):r}function bu(r,o){var u=r.__data__;return _D(o)?u[typeof o=="string"?"string":"hash"]:u.map}function Gc(r){for(var o=me(r),u=o.length;u--;){var f=o[u],m=r[f];o[u]=[f,m,pv(m)]}return o}function Ji(r,o){var u=OO(r,o);return $p(u)?u:n}function pD(r){var o=Ut.call(r,Vi),u=r[Vi];try{r[Vi]=n;var f=!0}catch(x){}var m=Gs.call(r);return f&&(o?r[Vi]=u:delete r[Vi]),m}var Jc=Ec?function(r){return r==null?[]:(r=Wt(r),ei(Ec(r),function(o){return yp.call(r,o)}))}:vf,hv=Ec?function(r){for(var o=[];r;)ni(o,Jc(r)),r=Zs(r);return o}:vf,Ce=je;(Oc&&Ce(new Oc(new ArrayBuffer(1)))!=dn||Sa&&Ce(new Sa)!=jt||Dc&&Ce(Dc.resolve())!=fn||Lo&&Ce(new Lo)!=kt||Ea&&Ce(new Ea)!=Kn)&&(Ce=function(r){var o=je(r),u=o==Ht?r.constructor:n,f=u?Qi(u):"";if(f)switch(f){case JO:return dn;case QO:return jt;case ZO:return fn;case t2:return kt;case e2:return Kn}return o});function vD(r,o,u){for(var f=-1,m=u.length;++f<m;){var x=u[f],D=x.size;switch(x.type){case"drop":r+=D;break;case"dropRight":o-=D;break;case"take":o=De(o,r+D);break;case"takeRight":r=ve(r,o-D);break}}return{start:r,end:o}}function mD(r){var o=r.match(Kr);return o?o[1].split(Ii):[]}function dv(r,o,u){o=si(o,r);for(var f=-1,m=o.length,x=!1;++f<m;){var D=sr(o[f]);if(!(x=r!=null&&u(r,D)))break;r=r[D]}return x||++f!=m?x:(m=r==null?0:r.length,!!m&&Du(m)&&Rr(D,m)&&(Et(r)||Zi(r)))}function yD(r){var o=r.length,u=new r.constructor(o);return o&&typeof r[0]=="string"&&Ut.call(r,"index")&&(u.index=r.index,u.input=r.input),u}function gv(r){return typeof r.constructor=="function"&&!$a(r)?zo(Zs(r)):{}}function bD(r,o,u){var f=r.constructor;switch(o){case gr:return Hc(r);case ht:case bt:return new f(+r);case dn:return nD(r,u);case Ne:case Re:case Yr:case $e:case ki:case qr:case Ti:case Gn:case Ee:return Gp(r,u);case jt:return new f;case re:case ae:return new f(r);case It:return rD(r);case kt:return new f;case hn:return iD(r)}}function wD(r,o){var u=o.length;if(!u)return r;var f=u-1;return o[f]=(u>1?"& ":"")+o[f],o=o.join(u>2?", ":" "),r.replace($i,`{
/* [wrapped with `+o+`] */
`)}function xD(r){return Et(r)||Zi(r)||!!(bp&&r&&r[bp])}function Rr(r,o){var u=typeof r;return o=o!=null?o:U,!!o&&(u=="number"||u!="symbol"&&_r.test(r))&&r>-1&&r%1==0&&r<o}function Le(r,o,u){if(!ne(u))return!1;var f=typeof o;return(f=="number"?Xe(u)&&Rr(o,u.length):f=="string"&&o in u)?Ln(u[o],r):!1}function Qc(r,o){if(Et(r))return!1;var u=typeof r;return u=="number"||u=="symbol"||u=="boolean"||r==null||rn(r)?!0:vr.test(r)||!Qn.test(r)||o!=null&&r in Wt(o)}function _D(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function Zc(r){var o=yu(r),u=y[o];if(typeof u!="function"||!(o in Rt.prototype))return!1;if(r===u)return!0;var f=Kc(u);return!!f&&r===f[0]}function SD(r){return!!pp&&pp in r}var ED=qs?$r:mf;function $a(r){var o=r&&r.constructor,u=typeof o=="function"&&o.prototype||jo;return r===u}function pv(r){return r===r&&!ne(r)}function vv(r,o){return function(u){return u==null?!1:u[r]===o&&(o!==n||r in Wt(u))}}function OD(r){var o=Eu(r,function(f){return u.size===d&&u.clear(),f}),u=o.cache;return o}function DD(r,o){var u=r[1],f=o[1],m=u|f,x=m<(w|S|M),D=f==M&&u==A||f==M&&u==nt&&r[7].length<=o[8]||f==(M|nt)&&o[7].length<=o[8]&&u==A;if(!(x||D))return r;f&w&&(r[2]=o[2],m|=u&w?0:P);var T=o[3];if(T){var $=r[3];r[3]=$?Qp($,T,o[4]):T,r[4]=$?ri(r[3],g):o[4]}return T=o[5],T&&($=r[5],r[5]=$?Zp($,T,o[6]):T,r[6]=$?ri(r[5],g):o[6]),T=o[7],T&&(r[7]=T),f&M&&(r[8]=r[8]==null?o[8]:De(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=m,r}function CD(r){var o=[];if(r!=null)for(var u in Wt(r))o.push(u);return o}function kD(r){return Gs.call(r)}function mv(r,o,u){return o=ve(o===n?r.length-1:o,0),function(){for(var f=arguments,m=-1,x=ve(f.length-o,0),D=z(x);++m<x;)D[m]=f[o+m];m=-1;for(var T=z(o+1);++m<o;)T[m]=f[m];return T[o]=u(D),tn(r,this,T)}}function yv(r,o){return o.length<2?r:Gi(r,wn(o,0,-1))}function TD(r,o){for(var u=r.length,f=De(o.length,u),m=Ue(r);f--;){var x=o[f];r[f]=Rr(x,u)?m[x]:n}return r}function tf(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var bv=xv(Up),Ia=HO||function(r,o){return we.setTimeout(r,o)},ef=xv(Q2);function wv(r,o,u){var f=o+"";return ef(r,wD(f,AD(mD(f),u)))}function xv(r){var o=0,u=0;return function(){var f=qO(),m=K-(f-u);if(u=f,m>0){if(++o>=rt)return arguments[0]}else o=0;return r.apply(n,arguments)}}function wu(r,o){var u=-1,f=r.length,m=f-1;for(o=o===n?f:o;++u<o;){var x=Lc(u,m),D=r[x];r[x]=r[u],r[u]=D}return r.length=o,r}var _v=OD(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(Ri,function(u,f,m,x){o.push(m?x.replace(Nn,"$1"):f||u)}),o});function sr(r){if(typeof r=="string"||rn(r))return r;var o=r+"";return o=="0"&&1/r==-B?"-0":o}function Qi(r){if(r!=null){try{return Ks.call(r)}catch(o){}try{return r+""}catch(o){}}return""}function AD(r,o){return vn(at,function(u){var f="_."+u[0];o&u[1]&&!Hs(r,f)&&r.push(f)}),r.sort()}function Sv(r){if(r instanceof Rt)return r.clone();var o=new yn(r.__wrapped__,r.__chain__);return o.__actions__=Ue(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function ND(r,o,u){(u?Le(r,o,u):o===n)?o=1:o=ve(Dt(o),0);var f=r==null?0:r.length;if(!f||o<1)return[];for(var m=0,x=0,D=z(nu(f/o));m<f;)D[x++]=wn(r,m,m+=o);return D}function RD(r){for(var o=-1,u=r==null?0:r.length,f=0,m=[];++o<u;){var x=r[o];x&&(m[f++]=x)}return m}function $D(){var r=arguments.length;if(!r)return[];for(var o=z(r-1),u=arguments[0],f=r;f--;)o[f-1]=arguments[f];return ni(Et(u)?Ue(u):[u],xe(o,1))}var ID=Tt(function(r,o){return se(r)?ka(r,xe(o,1,se,!0)):[]}),PD=Tt(function(r,o){var u=xn(o);return se(u)&&(u=n),se(r)?ka(r,xe(o,1,se,!0),gt(u,2)):[]}),jD=Tt(function(r,o){var u=xn(o);return se(u)&&(u=n),se(r)?ka(r,xe(o,1,se,!0),n,u):[]});function LD(r,o,u){var f=r==null?0:r.length;return f?(o=u||o===n?1:Dt(o),wn(r,o<0?0:o,f)):[]}function MD(r,o,u){var f=r==null?0:r.length;return f?(o=u||o===n?1:Dt(o),o=f-o,wn(r,0,o<0?0:o)):[]}function zD(r,o){return r&&r.length?hu(r,gt(o,3),!0,!0):[]}function FD(r,o){return r&&r.length?hu(r,gt(o,3),!0):[]}function BD(r,o,u,f){var m=r==null?0:r.length;return m?(u&&typeof u!="number"&&Le(r,o,u)&&(u=0,f=m),$2(r,o,u,f)):[]}function Ev(r,o,u){var f=r==null?0:r.length;if(!f)return-1;var m=u==null?0:Dt(u);return m<0&&(m=ve(f+m,0)),Ws(r,gt(o,3),m)}function Ov(r,o,u){var f=r==null?0:r.length;if(!f)return-1;var m=f-1;return u!==n&&(m=Dt(u),m=u<0?ve(f+m,0):De(m,f-1)),Ws(r,gt(o,3),m,!0)}function Dv(r){var o=r==null?0:r.length;return o?xe(r,1):[]}function UD(r){var o=r==null?0:r.length;return o?xe(r,B):[]}function XD(r,o){var u=r==null?0:r.length;return u?(o=o===n?1:Dt(o),xe(r,o)):[]}function HD(r){for(var o=-1,u=r==null?0:r.length,f={};++o<u;){var m=r[o];f[m[0]]=m[1]}return f}function Cv(r){return r&&r.length?r[0]:n}function WD(r,o,u){var f=r==null?0:r.length;if(!f)return-1;var m=u==null?0:Dt(u);return m<0&&(m=ve(f+m,0)),Ro(r,o,m)}function VD(r){var o=r==null?0:r.length;return o?wn(r,0,-1):[]}var YD=Tt(function(r){var o=Qt(r,Uc);return o.length&&o[0]===r[0]?Rc(o):[]}),qD=Tt(function(r){var o=xn(r),u=Qt(r,Uc);return o===xn(u)?o=n:u.pop(),u.length&&u[0]===r[0]?Rc(u,gt(o,2)):[]}),KD=Tt(function(r){var o=xn(r),u=Qt(r,Uc);return o=typeof o=="function"?o:n,o&&u.pop(),u.length&&u[0]===r[0]?Rc(u,n,o):[]});function GD(r,o){return r==null?"":VO.call(r,o)}function xn(r){var o=r==null?0:r.length;return o?r[o-1]:n}function JD(r,o,u){var f=r==null?0:r.length;if(!f)return-1;var m=f;return u!==n&&(m=Dt(u),m=m<0?ve(f+m,0):De(m,f-1)),o===o?AO(r,o,m):Ws(r,sp,m,!0)}function QD(r,o){return r&&r.length?Mp(r,Dt(o)):n}var ZD=Tt(kv);function kv(r,o){return r&&r.length&&o&&o.length?jc(r,o):r}function tC(r,o,u){return r&&r.length&&o&&o.length?jc(r,o,gt(u,2)):r}function eC(r,o,u){return r&&r.length&&o&&o.length?jc(r,o,n,u):r}var nC=Nr(function(r,o){var u=r==null?0:r.length,f=kc(r,o);return Bp(r,Qt(o,function(m){return Rr(m,u)?+m:m}).sort(Jp)),f});function rC(r,o){var u=[];if(!(r&&r.length))return u;var f=-1,m=[],x=r.length;for(o=gt(o,3);++f<x;){var D=r[f];o(D,f,r)&&(u.push(D),m.push(f))}return Bp(r,m),u}function nf(r){return r==null?r:GO.call(r)}function iC(r,o,u){var f=r==null?0:r.length;return f?(u&&typeof u!="number"&&Le(r,o,u)?(o=0,u=f):(o=o==null?0:Dt(o),u=u===n?f:Dt(u)),wn(r,o,u)):[]}function oC(r,o){return fu(r,o)}function aC(r,o,u){return zc(r,o,gt(u,2))}function sC(r,o){var u=r==null?0:r.length;if(u){var f=fu(r,o);if(f<u&&Ln(r[f],o))return f}return-1}function uC(r,o){return fu(r,o,!0)}function lC(r,o,u){return zc(r,o,gt(u,2),!0)}function cC(r,o){var u=r==null?0:r.length;if(u){var f=fu(r,o,!0)-1;if(Ln(r[f],o))return f}return-1}function fC(r){return r&&r.length?Xp(r):[]}function hC(r,o){return r&&r.length?Xp(r,gt(o,2)):[]}function dC(r){var o=r==null?0:r.length;return o?wn(r,1,o):[]}function gC(r,o,u){return r&&r.length?(o=u||o===n?1:Dt(o),wn(r,0,o<0?0:o)):[]}function pC(r,o,u){var f=r==null?0:r.length;return f?(o=u||o===n?1:Dt(o),o=f-o,wn(r,o<0?0:o,f)):[]}function vC(r,o){return r&&r.length?hu(r,gt(o,3),!1,!0):[]}function mC(r,o){return r&&r.length?hu(r,gt(o,3)):[]}var yC=Tt(function(r){return ai(xe(r,1,se,!0))}),bC=Tt(function(r){var o=xn(r);return se(o)&&(o=n),ai(xe(r,1,se,!0),gt(o,2))}),wC=Tt(function(r){var o=xn(r);return o=typeof o=="function"?o:n,ai(xe(r,1,se,!0),n,o)});function xC(r){return r&&r.length?ai(r):[]}function _C(r,o){return r&&r.length?ai(r,gt(o,2)):[]}function SC(r,o){return o=typeof o=="function"?o:n,r&&r.length?ai(r,n,o):[]}function rf(r){if(!(r&&r.length))return[];var o=0;return r=ei(r,function(u){if(se(u))return o=ve(u.length,o),!0}),wc(o,function(u){return Qt(r,mc(u))})}function Tv(r,o){if(!(r&&r.length))return[];var u=rf(r);return o==null?u:Qt(u,function(f){return tn(o,n,f)})}var EC=Tt(function(r,o){return se(r)?ka(r,o):[]}),OC=Tt(function(r){return Bc(ei(r,se))}),DC=Tt(function(r){var o=xn(r);return se(o)&&(o=n),Bc(ei(r,se),gt(o,2))}),CC=Tt(function(r){var o=xn(r);return o=typeof o=="function"?o:n,Bc(ei(r,se),n,o)}),kC=Tt(rf);function TC(r,o){return Yp(r||[],o||[],Ca)}function AC(r,o){return Yp(r||[],o||[],Na)}var NC=Tt(function(r){var o=r.length,u=o>1?r[o-1]:n;return u=typeof u=="function"?(r.pop(),u):n,Tv(r,u)});function Av(r){var o=y(r);return o.__chain__=!0,o}function RC(r,o){return o(r),r}function xu(r,o){return o(r)}var $C=Nr(function(r){var o=r.length,u=o?r[0]:0,f=this.__wrapped__,m=function(x){return kc(x,r)};return o>1||this.__actions__.length||!(f instanceof Rt)||!Rr(u)?this.thru(m):(f=f.slice(u,+u+(o?1:0)),f.__actions__.push({func:xu,args:[m],thisArg:n}),new yn(f,this.__chain__).thru(function(x){return o&&!x.length&&x.push(n),x}))});function IC(){return Av(this)}function PC(){return new yn(this.value(),this.__chain__)}function jC(){this.__values__===n&&(this.__values__=Hv(this.value()));var r=this.__index__>=this.__values__.length,o=r?n:this.__values__[this.__index__++];return{done:r,value:o}}function LC(){return this}function MC(r){for(var o,u=this;u instanceof au;){var f=Sv(u);f.__index__=0,f.__values__=n,o?m.__wrapped__=f:o=f;var m=f;u=u.__wrapped__}return m.__wrapped__=r,o}function zC(){var r=this.__wrapped__;if(r instanceof Rt){var o=r;return this.__actions__.length&&(o=new Rt(this)),o=o.reverse(),o.__actions__.push({func:xu,args:[nf],thisArg:n}),new yn(o,this.__chain__)}return this.thru(nf)}function FC(){return Vp(this.__wrapped__,this.__actions__)}var BC=du(function(r,o,u){Ut.call(r,u)?++r[u]:Tr(r,u,1)});function UC(r,o,u){var f=Et(r)?op:R2;return u&&Le(r,o,u)&&(o=n),f(r,gt(o,3))}function XC(r,o){var u=Et(r)?ei:Tp;return u(r,gt(o,3))}var HC=rv(Ev),WC=rv(Ov);function VC(r,o){return xe(_u(r,o),1)}function YC(r,o){return xe(_u(r,o),B)}function qC(r,o,u){return u=u===n?1:Dt(u),xe(_u(r,o),u)}function Nv(r,o){var u=Et(r)?vn:oi;return u(r,gt(o,3))}function Rv(r,o){var u=Et(r)?dO:kp;return u(r,gt(o,3))}var KC=du(function(r,o,u){Ut.call(r,u)?r[u].push(o):Tr(r,u,[o])});function GC(r,o,u,f){r=Xe(r)?r:Ho(r),u=u&&!f?Dt(u):0;var m=r.length;return u<0&&(u=ve(m+u,0)),Cu(r)?u<=m&&r.indexOf(o,u)>-1:!!m&&Ro(r,o,u)>-1}var JC=Tt(function(r,o,u){var f=-1,m=typeof o=="function",x=Xe(r)?z(r.length):[];return oi(r,function(D){x[++f]=m?tn(o,D,u):Ta(D,o,u)}),x}),QC=du(function(r,o,u){Tr(r,u,o)});function _u(r,o){var u=Et(r)?Qt:Pp;return u(r,gt(o,3))}function ZC(r,o,u,f){return r==null?[]:(Et(o)||(o=o==null?[]:[o]),u=f?n:u,Et(u)||(u=u==null?[]:[u]),zp(r,o,u))}var tk=du(function(r,o,u){r[u?0:1].push(o)},function(){return[[],[]]});function ek(r,o,u){var f=Et(r)?pc:lp,m=arguments.length<3;return f(r,gt(o,4),u,m,oi)}function nk(r,o,u){var f=Et(r)?gO:lp,m=arguments.length<3;return f(r,gt(o,4),u,m,kp)}function rk(r,o){var u=Et(r)?ei:Tp;return u(r,Ou(gt(o,3)))}function ik(r){var o=Et(r)?Ep:G2;return o(r)}function ok(r,o,u){(u?Le(r,o,u):o===n)?o=1:o=Dt(o);var f=Et(r)?C2:J2;return f(r,o)}function ak(r){var o=Et(r)?k2:Z2;return o(r)}function sk(r){if(r==null)return 0;if(Xe(r))return Cu(r)?Io(r):r.length;var o=Ce(r);return o==jt||o==kt?r.size:Ic(r).length}function uk(r,o,u){var f=Et(r)?vc:tD;return u&&Le(r,o,u)&&(o=n),f(r,gt(o,3))}var lk=Tt(function(r,o){if(r==null)return[];var u=o.length;return u>1&&Le(r,o[0],o[1])?o=[]:u>2&&Le(o[0],o[1],o[2])&&(o=[o[0]]),zp(r,xe(o,1),[])}),Su=XO||function(){return we.Date.now()};function ck(r,o){if(typeof o!="function")throw new mn(l);return r=Dt(r),function(){if(--r<1)return o.apply(this,arguments)}}function $v(r,o,u){return o=u?n:o,o=r&&o==null?r.length:o,Ar(r,M,n,n,n,n,o)}function Iv(r,o){var u;if(typeof o!="function")throw new mn(l);return r=Dt(r),function(){return--r>0&&(u=o.apply(this,arguments)),r<=1&&(o=n),u}}var of=Tt(function(r,o,u){var f=w;if(u.length){var m=ri(u,Uo(of));f|=L}return Ar(r,f,o,u,m)}),Pv=Tt(function(r,o,u){var f=w|S;if(u.length){var m=ri(u,Uo(Pv));f|=L}return Ar(o,f,r,u,m)});function jv(r,o,u){o=u?n:o;var f=Ar(r,A,n,n,n,n,n,o);return f.placeholder=jv.placeholder,f}function Lv(r,o,u){o=u?n:o;var f=Ar(r,_,n,n,n,n,n,o);return f.placeholder=Lv.placeholder,f}function Mv(r,o,u){var f,m,x,D,T,$,Y=0,q=!1,J=!1,ot=!0;if(typeof r!="function")throw new mn(l);o=_n(o)||0,ne(u)&&(q=!!u.leading,J="maxWait"in u,x=J?ve(_n(u.maxWait)||0,o):x,ot="trailing"in u?!!u.trailing:ot);function dt(ue){var Mn=f,Pr=m;return f=m=n,Y=ue,D=r.apply(Pr,Mn),D}function vt(ue){return Y=ue,T=Ia(At,o),q?dt(ue):D}function Ct(ue){var Mn=ue-$,Pr=ue-Y,r0=o-Mn;return J?De(r0,x-Pr):r0}function mt(ue){var Mn=ue-$,Pr=ue-Y;return $===n||Mn>=o||Mn<0||J&&Pr>=x}function At(){var ue=Su();if(mt(ue))return $t(ue);T=Ia(At,Ct(ue))}function $t(ue){return T=n,ot&&f?dt(ue):(f=m=n,D)}function on(){T!==n&&qp(T),Y=0,f=$=m=T=n}function Me(){return T===n?D:$t(Su())}function an(){var ue=Su(),Mn=mt(ue);if(f=arguments,m=this,$=ue,Mn){if(T===n)return vt($);if(J)return qp(T),T=Ia(At,o),dt($)}return T===n&&(T=Ia(At,o)),D}return an.cancel=on,an.flush=Me,an}var fk=Tt(function(r,o){return Cp(r,1,o)}),hk=Tt(function(r,o,u){return Cp(r,_n(o)||0,u)});function dk(r){return Ar(r,ct)}function Eu(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new mn(l);var u=function(){var f=arguments,m=o?o.apply(this,f):f[0],x=u.cache;if(x.has(m))return x.get(m);var D=r.apply(this,f);return u.cache=x.set(m,D)||x,D};return u.cache=new(Eu.Cache||kr),u}Eu.Cache=kr;function Ou(r){if(typeof r!="function")throw new mn(l);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function gk(r){return Iv(2,r)}var pk=eD(function(r,o){o=o.length==1&&Et(o[0])?Qt(o[0],en(gt())):Qt(xe(o,1),en(gt()));var u=o.length;return Tt(function(f){for(var m=-1,x=De(f.length,u);++m<x;)f[m]=o[m].call(this,f[m]);return tn(r,this,f)})}),af=Tt(function(r,o){var u=ri(o,Uo(af));return Ar(r,L,n,o,u)}),zv=Tt(function(r,o){var u=ri(o,Uo(zv));return Ar(r,I,n,o,u)}),vk=Nr(function(r,o){return Ar(r,nt,n,n,n,o)});function mk(r,o){if(typeof r!="function")throw new mn(l);return o=o===n?o:Dt(o),Tt(r,o)}function yk(r,o){if(typeof r!="function")throw new mn(l);return o=o==null?0:ve(Dt(o),0),Tt(function(u){var f=u[o],m=ui(u,0,o);return f&&ni(m,f),tn(r,this,m)})}function bk(r,o,u){var f=!0,m=!0;if(typeof r!="function")throw new mn(l);return ne(u)&&(f="leading"in u?!!u.leading:f,m="trailing"in u?!!u.trailing:m),Mv(r,o,{leading:f,maxWait:o,trailing:m})}function wk(r){return $v(r,1)}function xk(r,o){return af(Xc(o),r)}function _k(){if(!arguments.length)return[];var r=arguments[0];return Et(r)?r:[r]}function Sk(r){return bn(r,b)}function Ek(r,o){return o=typeof o=="function"?o:n,bn(r,b,o)}function Ok(r){return bn(r,v|b)}function Dk(r,o){return o=typeof o=="function"?o:n,bn(r,v|b,o)}function Ck(r,o){return o==null||Dp(r,o,me(o))}function Ln(r,o){return r===o||r!==r&&o!==o}var kk=mu(Nc),Tk=mu(function(r,o){return r>=o}),Zi=Rp(function(){return arguments}())?Rp:function(r){return oe(r)&&Ut.call(r,"callee")&&!yp.call(r,"callee")},Et=z.isArray,Ak=Zg?en(Zg):M2;function Xe(r){return r!=null&&Du(r.length)&&!$r(r)}function se(r){return oe(r)&&Xe(r)}function Nk(r){return r===!0||r===!1||oe(r)&&je(r)==ht}var li=WO||mf,Rk=tp?en(tp):z2;function $k(r){return oe(r)&&r.nodeType===1&&!Pa(r)}function Ik(r){if(r==null)return!0;if(Xe(r)&&(Et(r)||typeof r=="string"||typeof r.splice=="function"||li(r)||Xo(r)||Zi(r)))return!r.length;var o=Ce(r);if(o==jt||o==kt)return!r.size;if($a(r))return!Ic(r).length;for(var u in r)if(Ut.call(r,u))return!1;return!0}function Pk(r,o){return Aa(r,o)}function jk(r,o,u){u=typeof u=="function"?u:n;var f=u?u(r,o):n;return f===n?Aa(r,o,n,u):!!f}function sf(r){if(!oe(r))return!1;var o=je(r);return o==Jt||o==fe||typeof r.message=="string"&&typeof r.name=="string"&&!Pa(r)}function Lk(r){return typeof r=="number"&&wp(r)}function $r(r){if(!ne(r))return!1;var o=je(r);return o==Te||o==Ze||o==yt||o==_t}function Fv(r){return typeof r=="number"&&r==Dt(r)}function Du(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=U}function ne(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function oe(r){return r!=null&&typeof r=="object"}var Bv=ep?en(ep):B2;function Mk(r,o){return r===o||$c(r,o,Gc(o))}function zk(r,o,u){return u=typeof u=="function"?u:n,$c(r,o,Gc(o),u)}function Fk(r){return Uv(r)&&r!=+r}function Bk(r){if(ED(r))throw new St(s);return $p(r)}function Uk(r){return r===null}function Xk(r){return r==null}function Uv(r){return typeof r=="number"||oe(r)&&je(r)==re}function Pa(r){if(!oe(r)||je(r)!=Ht)return!1;var o=Zs(r);if(o===null)return!0;var u=Ut.call(o,"constructor")&&o.constructor;return typeof u=="function"&&u instanceof u&&Ks.call(u)==zO}var uf=np?en(np):U2;function Hk(r){return Fv(r)&&r>=-U&&r<=U}var Xv=rp?en(rp):X2;function Cu(r){return typeof r=="string"||!Et(r)&&oe(r)&&je(r)==ae}function rn(r){return typeof r=="symbol"||oe(r)&&je(r)==hn}var Xo=ip?en(ip):H2;function Wk(r){return r===n}function Vk(r){return oe(r)&&Ce(r)==Kn}function Yk(r){return oe(r)&&je(r)==Ae}var qk=mu(Pc),Kk=mu(function(r,o){return r<=o});function Hv(r){if(!r)return[];if(Xe(r))return Cu(r)?Pn(r):Ue(r);if(_a&&r[_a])return CO(r[_a]());var o=Ce(r),u=o==jt?_c:o==kt?Vs:Ho;return u(r)}function Ir(r){if(!r)return r===0?r:0;if(r=_n(r),r===B||r===-B){var o=r<0?-1:1;return o*Q}return r===r?r:0}function Dt(r){var o=Ir(r),u=o%1;return o===o?u?o-u:o:0}function Wv(r){return r?Ki(Dt(r),0,G):0}function _n(r){if(typeof r=="number")return r;if(rn(r))return X;if(ne(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=ne(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=cp(r);var u=Zn.test(r);return u||Gr.test(r)?cO(r.slice(2),u?2:8):ji.test(r)?X:+r}function Vv(r){return ar(r,He(r))}function Gk(r){return r?Ki(Dt(r),-U,U):r===0?r:0}function Bt(r){return r==null?"":nn(r)}var Jk=Fo(function(r,o){if($a(o)||Xe(o)){ar(o,me(o),r);return}for(var u in o)Ut.call(o,u)&&Ca(r,u,o[u])}),Yv=Fo(function(r,o){ar(o,He(o),r)}),ku=Fo(function(r,o,u,f){ar(o,He(o),r,f)}),Qk=Fo(function(r,o,u,f){ar(o,me(o),r,f)}),Zk=Nr(kc);function tT(r,o){var u=zo(r);return o==null?u:Op(u,o)}var eT=Tt(function(r,o){r=Wt(r);var u=-1,f=o.length,m=f>2?o[2]:n;for(m&&Le(o[0],o[1],m)&&(f=1);++u<f;)for(var x=o[u],D=He(x),T=-1,$=D.length;++T<$;){var Y=D[T],q=r[Y];(q===n||Ln(q,jo[Y])&&!Ut.call(r,Y))&&(r[Y]=x[Y])}return r}),nT=Tt(function(r){return r.push(n,cv),tn(qv,n,r)});function rT(r,o){return ap(r,gt(o,3),or)}function iT(r,o){return ap(r,gt(o,3),Ac)}function oT(r,o){return r==null?r:Tc(r,gt(o,3),He)}function aT(r,o){return r==null?r:Ap(r,gt(o,3),He)}function sT(r,o){return r&&or(r,gt(o,3))}function uT(r,o){return r&&Ac(r,gt(o,3))}function lT(r){return r==null?[]:lu(r,me(r))}function cT(r){return r==null?[]:lu(r,He(r))}function lf(r,o,u){var f=r==null?n:Gi(r,o);return f===n?u:f}function fT(r,o){return r!=null&&dv(r,o,I2)}function cf(r,o){return r!=null&&dv(r,o,P2)}var hT=ov(function(r,o,u){o!=null&&typeof o.toString!="function"&&(o=Gs.call(o)),r[o]=u},hf(We)),dT=ov(function(r,o,u){o!=null&&typeof o.toString!="function"&&(o=Gs.call(o)),Ut.call(r,o)?r[o].push(u):r[o]=[u]},gt),gT=Tt(Ta);function me(r){return Xe(r)?Sp(r):Ic(r)}function He(r){return Xe(r)?Sp(r,!0):W2(r)}function pT(r,o){var u={};return o=gt(o,3),or(r,function(f,m,x){Tr(u,o(f,m,x),f)}),u}function vT(r,o){var u={};return o=gt(o,3),or(r,function(f,m,x){Tr(u,m,o(f,m,x))}),u}var mT=Fo(function(r,o,u){cu(r,o,u)}),qv=Fo(function(r,o,u,f){cu(r,o,u,f)}),yT=Nr(function(r,o){var u={};if(r==null)return u;var f=!1;o=Qt(o,function(x){return x=si(x,r),f||(f=x.length>1),x}),ar(r,qc(r),u),f&&(u=bn(u,v|p|b,hD));for(var m=o.length;m--;)Fc(u,o[m]);return u});function bT(r,o){return Kv(r,Ou(gt(o)))}var wT=Nr(function(r,o){return r==null?{}:Y2(r,o)});function Kv(r,o){if(r==null)return{};var u=Qt(qc(r),function(f){return[f]});return o=gt(o),Fp(r,u,function(f,m){return o(f,m[0])})}function xT(r,o,u){o=si(o,r);var f=-1,m=o.length;for(m||(m=1,r=n);++f<m;){var x=r==null?n:r[sr(o[f])];x===n&&(f=m,x=u),r=$r(x)?x.call(r):x}return r}function _T(r,o,u){return r==null?r:Na(r,o,u)}function ST(r,o,u,f){return f=typeof f=="function"?f:n,r==null?r:Na(r,o,u,f)}var Gv=uv(me),Jv=uv(He);function ET(r,o,u){var f=Et(r),m=f||li(r)||Xo(r);if(o=gt(o,4),u==null){var x=r&&r.constructor;m?u=f?new x:[]:ne(r)?u=$r(x)?zo(Zs(r)):{}:u={}}return(m?vn:or)(r,function(D,T,$){return o(u,D,T,$)}),u}function OT(r,o){return r==null?!0:Fc(r,o)}function DT(r,o,u){return r==null?r:Wp(r,o,Xc(u))}function CT(r,o,u,f){return f=typeof f=="function"?f:n,r==null?r:Wp(r,o,Xc(u),f)}function Ho(r){return r==null?[]:xc(r,me(r))}function kT(r){return r==null?[]:xc(r,He(r))}function TT(r,o,u){return u===n&&(u=o,o=n),u!==n&&(u=_n(u),u=u===u?u:0),o!==n&&(o=_n(o),o=o===o?o:0),Ki(_n(r),o,u)}function AT(r,o,u){return o=Ir(o),u===n?(u=o,o=0):u=Ir(u),r=_n(r),j2(r,o,u)}function NT(r,o,u){if(u&&typeof u!="boolean"&&Le(r,o,u)&&(o=u=n),u===n&&(typeof o=="boolean"?(u=o,o=n):typeof r=="boolean"&&(u=r,r=n)),r===n&&o===n?(r=0,o=1):(r=Ir(r),o===n?(o=r,r=0):o=Ir(o)),r>o){var f=r;r=o,o=f}if(u||r%1||o%1){var m=xp();return De(r+m*(o-r+lO("1e-"+((m+"").length-1))),o)}return Lc(r,o)}var RT=Bo(function(r,o,u){return o=o.toLowerCase(),r+(u?Qv(o):o)});function Qv(r){return ff(Bt(r).toLowerCase())}function Zv(r){return r=Bt(r),r&&r.replace(Oe,_O).replace(Nt,"")}function $T(r,o,u){r=Bt(r),o=nn(o);var f=r.length;u=u===n?f:Ki(Dt(u),0,f);var m=u;return u-=o.length,u>=0&&r.slice(u,m)==o}function IT(r){return r=Bt(r),r&&ie.test(r)?r.replace(Ni,SO):r}function PT(r){return r=Bt(r),r&&yr.test(r)?r.replace(mr,"\\$&"):r}var jT=Bo(function(r,o,u){return r+(u?"-":"")+o.toLowerCase()}),LT=Bo(function(r,o,u){return r+(u?" ":"")+o.toLowerCase()}),MT=nv("toLowerCase");function zT(r,o,u){r=Bt(r),o=Dt(o);var f=o?Io(r):0;if(!o||f>=o)return r;var m=(o-f)/2;return vu(ru(m),u)+r+vu(nu(m),u)}function FT(r,o,u){r=Bt(r),o=Dt(o);var f=o?Io(r):0;return o&&f<o?r+vu(o-f,u):r}function BT(r,o,u){r=Bt(r),o=Dt(o);var f=o?Io(r):0;return o&&f<o?vu(o-f,u)+r:r}function UT(r,o,u){return u||o==null?o=0:o&&(o=+o),KO(Bt(r).replace(Pe,""),o||0)}function XT(r,o,u){return(u?Le(r,o,u):o===n)?o=1:o=Dt(o),Mc(Bt(r),o)}function HT(){var r=arguments,o=Bt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var WT=Bo(function(r,o,u){return r+(u?"_":"")+o.toLowerCase()});function VT(r,o,u){return u&&typeof u!="number"&&Le(r,o,u)&&(o=u=n),u=u===n?G:u>>>0,u?(r=Bt(r),r&&(typeof o=="string"||o!=null&&!uf(o))&&(o=nn(o),!o&&$o(r))?ui(Pn(r),0,u):r.split(o,u)):[]}var YT=Bo(function(r,o,u){return r+(u?" ":"")+ff(o)});function qT(r,o,u){return r=Bt(r),u=u==null?0:Ki(Dt(u),0,r.length),o=nn(o),r.slice(u,u+o.length)==o}function KT(r,o,u){var f=y.templateSettings;u&&Le(r,o,u)&&(o=n),r=Bt(r),o=ku({},o,f,lv);var m=ku({},o.imports,f.imports,lv),x=me(m),D=xc(m,x),T,$,Y=0,q=o.interpolate||Jr,J="__p += '",ot=Sc((o.escape||Jr).source+"|"+q.source+"|"+(q===pr?xr:Jr).source+"|"+(o.evaluate||Jr).source+"|$","g"),dt="//# sourceURL="+(Ut.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xs+"]")+`
`;r.replace(ot,function(mt,At,$t,on,Me,an){return $t||($t=on),J+=r.slice(Y,an).replace(yo,EO),At&&(T=!0,J+=`' +
__e(`+At+`) +
'`),Me&&($=!0,J+=`';
`+Me+`;
__p += '`),$t&&(J+=`' +
((__t = (`+$t+`)) == null ? '' : __t) +
'`),Y=an+mt.length,mt}),J+=`';
`;var vt=Ut.call(o,"variable")&&o.variable;if(!vt)J=`with (obj) {
`+J+`
}
`;else if(wr.test(vt))throw new St(c);J=($?J.replace(Jn,""):J).replace(Tn,"$1").replace(Ie,"$1;"),J="function("+(vt||"obj")+`) {
`+(vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+($?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var Ct=e0(function(){return Lt(x,dt+"return "+J).apply(n,D)});if(Ct.source=J,sf(Ct))throw Ct;return Ct}function GT(r){return Bt(r).toLowerCase()}function JT(r){return Bt(r).toUpperCase()}function QT(r,o,u){if(r=Bt(r),r&&(u||o===n))return cp(r);if(!r||!(o=nn(o)))return r;var f=Pn(r),m=Pn(o),x=fp(f,m),D=hp(f,m)+1;return ui(f,x,D).join("")}function ZT(r,o,u){if(r=Bt(r),r&&(u||o===n))return r.slice(0,gp(r)+1);if(!r||!(o=nn(o)))return r;var f=Pn(r),m=hp(f,Pn(o))+1;return ui(f,0,m).join("")}function tA(r,o,u){if(r=Bt(r),r&&(u||o===n))return r.replace(Pe,"");if(!r||!(o=nn(o)))return r;var f=Pn(r),m=fp(f,Pn(o));return ui(f,m).join("")}function eA(r,o){var u=V,f=tt;if(ne(o)){var m="separator"in o?o.separator:m;u="length"in o?Dt(o.length):u,f="omission"in o?nn(o.omission):f}r=Bt(r);var x=r.length;if($o(r)){var D=Pn(r);x=D.length}if(u>=x)return r;var T=u-Io(f);if(T<1)return f;var $=D?ui(D,0,T).join(""):r.slice(0,T);if(m===n)return $+f;if(D&&(T+=$.length-T),uf(m)){if(r.slice(T).search(m)){var Y,q=$;for(m.global||(m=Sc(m.source,Bt(Pi.exec(m))+"g")),m.lastIndex=0;Y=m.exec(q);)var J=Y.index;$=$.slice(0,J===n?T:J)}}else if(r.indexOf(nn(m),T)!=T){var ot=$.lastIndexOf(m);ot>-1&&($=$.slice(0,ot))}return $+f}function nA(r){return r=Bt(r),r&&An.test(r)?r.replace(Ai,NO):r}var rA=Bo(function(r,o,u){return r+(u?" ":"")+o.toUpperCase()}),ff=nv("toUpperCase");function t0(r,o,u){return r=Bt(r),o=u?n:o,o===n?DO(r)?IO(r):mO(r):r.match(o)||[]}var e0=Tt(function(r,o){try{return tn(r,n,o)}catch(u){return sf(u)?u:new St(u)}}),iA=Nr(function(r,o){return vn(o,function(u){u=sr(u),Tr(r,u,of(r[u],r))}),r});function oA(r){var o=r==null?0:r.length,u=gt();return r=o?Qt(r,function(f){if(typeof f[1]!="function")throw new mn(l);return[u(f[0]),f[1]]}):[],Tt(function(f){for(var m=-1;++m<o;){var x=r[m];if(tn(x[0],this,f))return tn(x[1],this,f)}})}function aA(r){return N2(bn(r,v))}function hf(r){return function(){return r}}function sA(r,o){return r==null||r!==r?o:r}var uA=iv(),lA=iv(!0);function We(r){return r}function df(r){return Ip(typeof r=="function"?r:bn(r,v))}function cA(r){return jp(bn(r,v))}function fA(r,o){return Lp(r,bn(o,v))}var hA=Tt(function(r,o){return function(u){return Ta(u,r,o)}}),dA=Tt(function(r,o){return function(u){return Ta(r,u,o)}});function gf(r,o,u){var f=me(o),m=lu(o,f);u==null&&!(ne(o)&&(m.length||!f.length))&&(u=o,o=r,r=this,m=lu(o,me(o)));var x=!(ne(u)&&"chain"in u)||!!u.chain,D=$r(r);return vn(m,function(T){var $=o[T];r[T]=$,D&&(r.prototype[T]=function(){var Y=this.__chain__;if(x||Y){var q=r(this.__wrapped__),J=q.__actions__=Ue(this.__actions__);return J.push({func:$,args:arguments,thisArg:r}),q.__chain__=Y,q}return $.apply(r,ni([this.value()],arguments))})}),r}function gA(){return we._===this&&(we._=FO),this}function pf(){}function pA(r){return r=Dt(r),Tt(function(o){return Mp(o,r)})}var vA=Wc(Qt),mA=Wc(op),yA=Wc(vc);function n0(r){return Qc(r)?mc(sr(r)):q2(r)}function bA(r){return function(o){return r==null?n:Gi(r,o)}}var wA=av(),xA=av(!0);function vf(){return[]}function mf(){return!1}function _A(){return{}}function SA(){return""}function EA(){return!0}function OA(r,o){if(r=Dt(r),r<1||r>U)return[];var u=G,f=De(r,G);o=gt(o),r-=G;for(var m=wc(f,o);++u<r;)o(u);return m}function DA(r){return Et(r)?Qt(r,sr):rn(r)?[r]:Ue(_v(Bt(r)))}function CA(r){var o=++MO;return Bt(r)+o}var kA=pu(function(r,o){return r+o},0),TA=Vc("ceil"),AA=pu(function(r,o){return r/o},1),NA=Vc("floor");function RA(r){return r&&r.length?uu(r,We,Nc):n}function $A(r,o){return r&&r.length?uu(r,gt(o,2),Nc):n}function IA(r){return up(r,We)}function PA(r,o){return up(r,gt(o,2))}function jA(r){return r&&r.length?uu(r,We,Pc):n}function LA(r,o){return r&&r.length?uu(r,gt(o,2),Pc):n}var MA=pu(function(r,o){return r*o},1),zA=Vc("round"),FA=pu(function(r,o){return r-o},0);function BA(r){return r&&r.length?bc(r,We):0}function UA(r,o){return r&&r.length?bc(r,gt(o,2)):0}return y.after=ck,y.ary=$v,y.assign=Jk,y.assignIn=Yv,y.assignInWith=ku,y.assignWith=Qk,y.at=Zk,y.before=Iv,y.bind=of,y.bindAll=iA,y.bindKey=Pv,y.castArray=_k,y.chain=Av,y.chunk=ND,y.compact=RD,y.concat=$D,y.cond=oA,y.conforms=aA,y.constant=hf,y.countBy=BC,y.create=tT,y.curry=jv,y.curryRight=Lv,y.debounce=Mv,y.defaults=eT,y.defaultsDeep=nT,y.defer=fk,y.delay=hk,y.difference=ID,y.differenceBy=PD,y.differenceWith=jD,y.drop=LD,y.dropRight=MD,y.dropRightWhile=zD,y.dropWhile=FD,y.fill=BD,y.filter=XC,y.flatMap=VC,y.flatMapDeep=YC,y.flatMapDepth=qC,y.flatten=Dv,y.flattenDeep=UD,y.flattenDepth=XD,y.flip=dk,y.flow=uA,y.flowRight=lA,y.fromPairs=HD,y.functions=lT,y.functionsIn=cT,y.groupBy=KC,y.initial=VD,y.intersection=YD,y.intersectionBy=qD,y.intersectionWith=KD,y.invert=hT,y.invertBy=dT,y.invokeMap=JC,y.iteratee=df,y.keyBy=QC,y.keys=me,y.keysIn=He,y.map=_u,y.mapKeys=pT,y.mapValues=vT,y.matches=cA,y.matchesProperty=fA,y.memoize=Eu,y.merge=mT,y.mergeWith=qv,y.method=hA,y.methodOf=dA,y.mixin=gf,y.negate=Ou,y.nthArg=pA,y.omit=yT,y.omitBy=bT,y.once=gk,y.orderBy=ZC,y.over=vA,y.overArgs=pk,y.overEvery=mA,y.overSome=yA,y.partial=af,y.partialRight=zv,y.partition=tk,y.pick=wT,y.pickBy=Kv,y.property=n0,y.propertyOf=bA,y.pull=ZD,y.pullAll=kv,y.pullAllBy=tC,y.pullAllWith=eC,y.pullAt=nC,y.range=wA,y.rangeRight=xA,y.rearg=vk,y.reject=rk,y.remove=rC,y.rest=mk,y.reverse=nf,y.sampleSize=ok,y.set=_T,y.setWith=ST,y.shuffle=ak,y.slice=iC,y.sortBy=lk,y.sortedUniq=fC,y.sortedUniqBy=hC,y.split=VT,y.spread=yk,y.tail=dC,y.take=gC,y.takeRight=pC,y.takeRightWhile=vC,y.takeWhile=mC,y.tap=RC,y.throttle=bk,y.thru=xu,y.toArray=Hv,y.toPairs=Gv,y.toPairsIn=Jv,y.toPath=DA,y.toPlainObject=Vv,y.transform=ET,y.unary=wk,y.union=yC,y.unionBy=bC,y.unionWith=wC,y.uniq=xC,y.uniqBy=_C,y.uniqWith=SC,y.unset=OT,y.unzip=rf,y.unzipWith=Tv,y.update=DT,y.updateWith=CT,y.values=Ho,y.valuesIn=kT,y.without=EC,y.words=t0,y.wrap=xk,y.xor=OC,y.xorBy=DC,y.xorWith=CC,y.zip=kC,y.zipObject=TC,y.zipObjectDeep=AC,y.zipWith=NC,y.entries=Gv,y.entriesIn=Jv,y.extend=Yv,y.extendWith=ku,gf(y,y),y.add=kA,y.attempt=e0,y.camelCase=RT,y.capitalize=Qv,y.ceil=TA,y.clamp=TT,y.clone=Sk,y.cloneDeep=Ok,y.cloneDeepWith=Dk,y.cloneWith=Ek,y.conformsTo=Ck,y.deburr=Zv,y.defaultTo=sA,y.divide=AA,y.endsWith=$T,y.eq=Ln,y.escape=IT,y.escapeRegExp=PT,y.every=UC,y.find=HC,y.findIndex=Ev,y.findKey=rT,y.findLast=WC,y.findLastIndex=Ov,y.findLastKey=iT,y.floor=NA,y.forEach=Nv,y.forEachRight=Rv,y.forIn=oT,y.forInRight=aT,y.forOwn=sT,y.forOwnRight=uT,y.get=lf,y.gt=kk,y.gte=Tk,y.has=fT,y.hasIn=cf,y.head=Cv,y.identity=We,y.includes=GC,y.indexOf=WD,y.inRange=AT,y.invoke=gT,y.isArguments=Zi,y.isArray=Et,y.isArrayBuffer=Ak,y.isArrayLike=Xe,y.isArrayLikeObject=se,y.isBoolean=Nk,y.isBuffer=li,y.isDate=Rk,y.isElement=$k,y.isEmpty=Ik,y.isEqual=Pk,y.isEqualWith=jk,y.isError=sf,y.isFinite=Lk,y.isFunction=$r,y.isInteger=Fv,y.isLength=Du,y.isMap=Bv,y.isMatch=Mk,y.isMatchWith=zk,y.isNaN=Fk,y.isNative=Bk,y.isNil=Xk,y.isNull=Uk,y.isNumber=Uv,y.isObject=ne,y.isObjectLike=oe,y.isPlainObject=Pa,y.isRegExp=uf,y.isSafeInteger=Hk,y.isSet=Xv,y.isString=Cu,y.isSymbol=rn,y.isTypedArray=Xo,y.isUndefined=Wk,y.isWeakMap=Vk,y.isWeakSet=Yk,y.join=GD,y.kebabCase=jT,y.last=xn,y.lastIndexOf=JD,y.lowerCase=LT,y.lowerFirst=MT,y.lt=qk,y.lte=Kk,y.max=RA,y.maxBy=$A,y.mean=IA,y.meanBy=PA,y.min=jA,y.minBy=LA,y.stubArray=vf,y.stubFalse=mf,y.stubObject=_A,y.stubString=SA,y.stubTrue=EA,y.multiply=MA,y.nth=QD,y.noConflict=gA,y.noop=pf,y.now=Su,y.pad=zT,y.padEnd=FT,y.padStart=BT,y.parseInt=UT,y.random=NT,y.reduce=ek,y.reduceRight=nk,y.repeat=XT,y.replace=HT,y.result=xT,y.round=zA,y.runInContext=N,y.sample=ik,y.size=sk,y.snakeCase=WT,y.some=uk,y.sortedIndex=oC,y.sortedIndexBy=aC,y.sortedIndexOf=sC,y.sortedLastIndex=uC,y.sortedLastIndexBy=lC,y.sortedLastIndexOf=cC,y.startCase=YT,y.startsWith=qT,y.subtract=FA,y.sum=BA,y.sumBy=UA,y.template=KT,y.times=OA,y.toFinite=Ir,y.toInteger=Dt,y.toLength=Wv,y.toLower=GT,y.toNumber=_n,y.toSafeInteger=Gk,y.toString=Bt,y.toUpper=JT,y.trim=QT,y.trimEnd=ZT,y.trimStart=tA,y.truncate=eA,y.unescape=nA,y.uniqueId=CA,y.upperCase=rA,y.upperFirst=ff,y.each=Nv,y.eachRight=Rv,y.first=Cv,gf(y,function(){var r={};return or(y,function(o,u){Ut.call(y.prototype,u)||(r[u]=o)}),r}(),{chain:!1}),y.VERSION=i,vn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){y[r].placeholder=y}),vn(["drop","take"],function(r,o){Rt.prototype[r]=function(u){u=u===n?1:ve(Dt(u),0);var f=this.__filtered__&&!o?new Rt(this):this.clone();return f.__filtered__?f.__takeCount__=De(u,f.__takeCount__):f.__views__.push({size:De(u,G),type:r+(f.__dir__<0?"Right":"")}),f},Rt.prototype[r+"Right"]=function(u){return this.reverse()[r](u).reverse()}}),vn(["filter","map","takeWhile"],function(r,o){var u=o+1,f=u==k||u==R;Rt.prototype[r]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:gt(m,3),type:u}),x.__filtered__=x.__filtered__||f,x}}),vn(["head","last"],function(r,o){var u="take"+(o?"Right":"");Rt.prototype[r]=function(){return this[u](1).value()[0]}}),vn(["initial","tail"],function(r,o){var u="drop"+(o?"":"Right");Rt.prototype[r]=function(){return this.__filtered__?new Rt(this):this[u](1)}}),Rt.prototype.compact=function(){return this.filter(We)},Rt.prototype.find=function(r){return this.filter(r).head()},Rt.prototype.findLast=function(r){return this.reverse().find(r)},Rt.prototype.invokeMap=Tt(function(r,o){return typeof r=="function"?new Rt(this):this.map(function(u){return Ta(u,r,o)})}),Rt.prototype.reject=function(r){return this.filter(Ou(gt(r)))},Rt.prototype.slice=function(r,o){r=Dt(r);var u=this;return u.__filtered__&&(r>0||o<0)?new Rt(u):(r<0?u=u.takeRight(-r):r&&(u=u.drop(r)),o!==n&&(o=Dt(o),u=o<0?u.dropRight(-o):u.take(o-r)),u)},Rt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Rt.prototype.toArray=function(){return this.take(G)},or(Rt.prototype,function(r,o){var u=/^(?:filter|find|map|reject)|While$/.test(o),f=/^(?:head|last)$/.test(o),m=y[f?"take"+(o=="last"?"Right":""):o],x=f||/^find/.test(o);m&&(y.prototype[o]=function(){var D=this.__wrapped__,T=f?[1]:arguments,$=D instanceof Rt,Y=T[0],q=$||Et(D),J=function(At){var $t=m.apply(y,ni([At],T));return f&&ot?$t[0]:$t};q&&u&&typeof Y=="function"&&Y.length!=1&&($=q=!1);var ot=this.__chain__,dt=!!this.__actions__.length,vt=x&&!ot,Ct=$&&!dt;if(!x&&q){D=Ct?D:new Rt(this);var mt=r.apply(D,T);return mt.__actions__.push({func:xu,args:[J],thisArg:n}),new yn(mt,ot)}return vt&&Ct?r.apply(this,T):(mt=this.thru(J),vt?f?mt.value()[0]:mt.value():mt)})}),vn(["pop","push","shift","sort","splice","unshift"],function(r){var o=Ys[r],u=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",f=/^(?:pop|shift)$/.test(r);y.prototype[r]=function(){var m=arguments;if(f&&!this.__chain__){var x=this.value();return o.apply(Et(x)?x:[],m)}return this[u](function(D){return o.apply(Et(D)?D:[],m)})}}),or(Rt.prototype,function(r,o){var u=y[o];if(u){var f=u.name+"";Ut.call(Mo,f)||(Mo[f]=[]),Mo[f].push({name:o,func:u})}}),Mo[gu(n,S).name]=[{name:"wrapper",func:n}],Rt.prototype.clone=n2,Rt.prototype.reverse=r2,Rt.prototype.value=i2,y.prototype.at=$C,y.prototype.chain=IC,y.prototype.commit=PC,y.prototype.next=jC,y.prototype.plant=MC,y.prototype.reverse=zC,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=FC,y.prototype.first=y.prototype.head,_a&&(y.prototype[_a]=LC),y},Po=PO();Wi?((Wi.exports=Po)._=Po,hc._=Po):we._=Po}).call(ye)}(Ja,Ja.exports);var Vy=Ja.exports;const F=Ye(Vy),wh="DragDropBox",qt={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"},Xt={TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",HORIZON:"horizon",VERTICAL:"vertical"},zr={STRAIGHT:"straight",CURVE_AUTO:"curve-auto",BROKEN:"broken",BROKEN_ROUNDED:"broken-rounded"},ol={Shift:16,Ctrl:17,Alt:18,Delete:46,Backspace:8},Bn=52,Un=52,xh=10,_h=/(-\d+(\.\d+)?)|(\d+(\.\d+)?)/g,Yy=.1,qy=10,al=120,Qa=t=>t*(Math.PI/180);function Xn({node:t,deg:e,coord:{x:n,y:i}}){const a=t.width/2,s=t.height/2,l=n,c=i,h=l*Math.cos(Qa(e))-c*Math.sin(Qa(e)),d=c*Math.cos(Qa(e))+l*Math.sin(Qa(e));return{x:a+h,y:s+d}}function Fr(t,e){let n=[];const i=F.find(t,a=>a.id===e);return i?n=[i]:F.forEach(t,a=>{if(F.isEmpty(n)){const s=Fr(a.children||[],e);F.isEmpty(s)||(n=[a].concat(s))}}),n}function On(t,e){const n=Fr(t,e);if(!F.isEmpty(n)){const i=F.last(n);if(i){let a=0;const{relativeX:s,relativeY:l,absRotateDeg:c}=F.reduce(n,(h,d,g)=>{if(h.relativeX+=d.x||0,h.relativeY+=d.y||0,h.absRotateDeg+=+(d.rotateDeg||0),g>0&&(n[g-1].rotateDeg||a)){const v=n[g-1];v.rotateDeg&&(a+=+v.rotateDeg);const p=h.relativeX-(d.x||0),b=h.relativeY-(d.y||0),O=Xn({node:v,deg:a,coord:{x:(d.x||0)+d.width/2-v.width/2,y:(d.y||0)+d.height/2-v.height/2}}),C=p+O.x,w=b+O.y,S=C-(h.relativeX+d.width/2),P=w-(h.relativeY+d.height/2);h.relativeX+=S,h.relativeY+=P}return h},{relativeX:0,relativeY:0,absRotateDeg:0});return Mt(Z({},i),{absRotateDeg:c%360,relativeX:s,relativeY:l})}return i}}function Za(t,e,n=0,i=0){const a=F.find(t,s=>Ky(s,e,n,i));return a&&(Za(a.children||[],e,(a.x||0)+n,(a.y||0)+i)||a)}function Ky(t,e,n,i){let a=e.relativeX,s=e.relativeY,l=e.width,c=e.height;return e.expand===!1&&(a=((e==null?void 0:e.relativeX)||0)+((e.width||0)-52)/2,s=((e==null?void 0:e.relativeY)||0)+((e.height||0)-52)/2,l=52,c=52),t.expand!==!1&&t.id!==e.id&&t.draginDisabled!==!0&&(a||0)>=(t.x||0)+n&&(a||0)+l<=(t.x||0)+n+t.width&&(s||0)>=(t.y||0)+i&&(s||0)+c<=(t.y||0)+i+t.height}function sl(t,e){const n=Fr(t,(e==null?void 0:e.id)||"");return F.reduce(n,(i,a)=>(i+=+(a.rotateDeg||0),i),0)%360}function Gy(t){const{x:e=0,y:n=0,rotateDeg:i,width:a,height:s}=t||{},l=`translate(${e}, ${n})`;return i?`${l} rotate(${i} ${(a||0)/2} ${(s||0)/2})`:l}function Jy(t){const e=F.findIndex(t,n=>n.expand===!1);return e>-1?t.slice(0,e+1):t}function ul(t,e){const n=Fr(t,e);if(F.isEmpty(n))return null;const i=Jy(n);let a=0;const{relativeX:s,relativeY:l}=F.reduce(i,(v,p,b)=>{if(p.expand===!1?(v.relativeX+=(p.x||0)+(p.width-Bn)/2,v.relativeY+=(p.y||0)+(p.height-Un)/2):(v.relativeX+=p.x||0,v.relativeY+=p.y||0),b>0&&(i[b-1].rotateDeg||a)){const O=i[b-1];O.rotateDeg&&(a+=+O.rotateDeg);const C=v.relativeX-(p.x||0),w=v.relativeY-(p.y||0),S=Xn({node:O,deg:a,coord:{x:(p.x||0)+p.width/2-O.width/2,y:(p.y||0)+p.height/2-O.height/2}}),P=C+S.x,A=w+S.y,_=P-(v.relativeX+p.width/2),L=A-(v.relativeY+p.height/2);v.relativeX+=_,v.relativeY+=L}return v},{relativeX:0,relativeY:0}),c=F.last(i),h=F.reduce(i,(v,p)=>(v+=+(p.rotateDeg||0),v),0)%360,d=(c==null?void 0:c.expand)===!1?Bn:c==null?void 0:c.width,g=(c==null?void 0:c.expand)===!1?Un:c==null?void 0:c.height;return Mt(Z({},F.pick(c,["id","x","y","expand"])),{absRotateDeg:h,relativeX:s,relativeY:l,width:d||50,height:g||50,originWidth:c==null?void 0:c.width,originHeight:c==null?void 0:c.height})}function Hn(t,e,n){const[i,a]=(t==null?void 0:t.split("|"))||[];let s=+a;const l=F.includes([qt.LEFT,qt.RIGHT],i);s<1&&(s=l?s*e.height:s*e.width),e.expand===!1&&(s=l?s*e.height/(e==null?void 0:e.originHeight):s*e.width/(e==null?void 0:e.originWidth));const{relativeX:c=0,relativeY:h=0,width:d,height:g}=e;let v=0,p=0;const b=d/2,O=g/2;switch(i){case qt.TOP:v=s||b;break;case qt.RIGHT:v=d,p=s||O;break;case qt.BOTTOM:v=s||b,p=g;break;default:p=s||O;break}if(n){const C=Xn({node:e,deg:n,coord:{x:v-b,y:p-O}});v=C.x,p=C.y}return{x:c+v,y:h+p}}function Qy(t,e){const n=(e==null?void 0:e.children)||[];if(!F.isEmpty(n)){const i=F.minBy(n,g=>g.y),a=F.maxBy(n,g=>((g==null?void 0:g.x)||0)+g.width),s=F.maxBy(n,g=>((g==null?void 0:g.y)||0)+g.height),l=F.minBy(n,g=>g.x),c=4,h=((a==null?void 0:a.x)||0)+((a==null?void 0:a.width)||0)-((l==null?void 0:l.x)||0)+c*2,d=((s==null?void 0:s.y)||0)+((s==null?void 0:s.height)||0)-((i==null?void 0:i.y)||0)+c*2;if(t.width<h){const g=h-t.width,v=((l==null?void 0:l.x)||0)-c;t.width=h,e.width===h?t.x=e.x||0:(t.x!==e.x&&(t.x-=g-c),F.map(n,p=>{let b=(p==null?void 0:p.x)||0;return b-=v,b}))}if(t.height<d){const g=d-t.height,v=((l==null?void 0:l.y)||0)-c;t.height=d,e.height===d?t.y=e.y||0:(t.y!==e.y&&(t.y-=g-c),F.map(n,p=>{let b=(p==null?void 0:p.y)||0;return b-=v,b}))}}return t}function yi(t=[],e,n){const i=F.cloneDeep(t);return i&&i.length>0?F.map(i,a=>(a.id===e?a=typeof n=="function"?n(a):Z(Z({},a),n):a.children=yi(a.children,e,n),a)):i}function Sh(t){if(F.isEmpty(t))return[];const e=F.map(t,n=>[n].concat(Sh((n==null?void 0:n.children)||[])));return F.reduce(e,(n,i)=>n.concat(i),[])}function Zy(t,e,n){const i=[t],a=F.map(i,c=>Sh(c.children||[])),s=F.reduce(a,(c,h)=>c.concat(h||[]),[]),l=F.map(s.concat(i),"id");return F.map(n,c=>((F.includes(l,c.source)||F.includes(l,c.target))&&(c=Go(e,c)),c))}function Eh({node:t,nodes:e,chain:n}){let i=[...e];const a=Z({},t);n||(n=Fr(e,t.id));const s=n[n.length-2],l=Za(i,a);return F.isEqual(l,s)?s?i=yi(i,s.id,c=>{var h;const{x:d,y:g}=F.reduce(n.slice(0,-1),(p,b)=>({x:p.x+((b==null?void 0:b.x)||0),y:((p==null?void 0:p.y)||0)+((b==null?void 0:b.y)||0)}),{x:0,y:0}),v=F.findIndex(c.children,p=>p.id===a.id);return(h=c.children)!=null&&h[v]&&(c.children[v].x=((a==null?void 0:a.relativeX)||0)-d,c.children[v].y=((a==null?void 0:a.relativeY)||0)-g),c}):i=yi(i,a.id,c=>(c.x=a.relativeX,c.y=a.relativeY,c)):(s?i=yi(i,s.id,c=>(c.children=F.filter(c.children,h=>h.id!==a.id),c)):i=F.filter(i,c=>c.id!==a.id),l?i=yi(i,l.id,c=>{const{relativeX:h,relativeY:d}=On(i,(c==null?void 0:c.id)||"")||{relativeX:0,relativeY:0};return c.children=(c.children||[]).concat(Mt(Z({},a),{x:((a==null?void 0:a.relativeX)||0)-(h||0),y:((a==null?void 0:a.relativeY)||0)-(d||0)})),c}):i=i.concat(Mt(Z({},a),{x:a.relativeX,y:a.relativeY}))),i}function t1(t,e){return F.map(t,n=>ul(e,n.id))||[]}function e1(t){const[e,n]=t;return e>=Yy&&n<=qy&&e<n}function n1({entry:t,exit:e,edge:{sourceDirection:n,targetDirection:i},srcAbsRotateDeg:a,tgtAbsRotateDeg:s,entryExt:l=xh,exitExt:c=xh}){const h=new Map([[qt.TOP,[0,-1]],[qt.RIGHT,[1,0]],[qt.BOTTOM,[0,1]],[qt.LEFT,[-1,0]]]);let[d,g]=n.split("|"),[v,p]=i.split("|");t.centerX=t.width/2+t.relativeX,t.centerY=t.height/2+t.relativeY,e.centerX=e.width/2+e.relativeX,e.centerY=e.height/2+e.relativeY;const b=h.get(d)||[0,0],O=h.get(v)||[0,0],C=[t.centerX+b[0]*t.width/2,t.centerY+b[1]*t.height/2];if(g){const S=F.includes([qt.LEFT,qt.RIGHT],d);g<1&&(g=S?g*(t.originHeight||t.height):g*(t.originWidth||t.width));const P=S?1:0,A=S?t.height/2:t.width/2;t.expand===!1&&(g=S?g*t.height/(t.originHeight||t.height):g*t.width/(t.originWidth||t.width)),C[P]+=+g-A}const w=[e.centerX+O[0]*e.width/2,e.centerY+O[1]*e.height/2];if(p){const S=F.includes([qt.LEFT,qt.RIGHT],v);p<1&&(p=S?p*(e.originHeight||e.height):p*(e.originWidth||e.width));const P=S?1:0,A=S?e.height/2:e.width/2;e.expand===!1&&(p=S?p*e.height/(e.originHeight||e.height):p*e.width/(e.originWidth||e.width)),w[P]+=+p-A}if(a){const S=Xn({node:t,deg:a,coord:{x:C[0]-(t.relativeX+t.width/2),y:C[1]-(t.relativeY+t.height/2)}});C[0]=t.relativeX+S.x,C[1]=t.relativeY+S.y}if(s){const S=Xn({node:e,deg:s,coord:{x:w[0]-(e.relativeX+e.width/2),y:w[1]-(e.relativeY+e.height/2)}});w[0]=e.relativeX+S.x,w[1]=e.relativeY+S.y}return{entryPoint:C,entryDirection:b,entryExt:l,exitPoint:w,exitDirection:O,exitExt:c}}const bi=function(t,e){return[t[0]+e[0],t[1]+e[1]]},qo=function(t,e){return[t[0]*e,t[1]*e]},r1=function(t,e){return[e[0]-t[0],e[1]-t[1]]},Oh=function(t,e){return t[0]*e[1]-t[1]*e[0]===0},ll=function(t,e){return t[0]*e[0]+t[1]*e[1]},i1=function(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};function o1({entryPoint:t=[0,0],entryDirection:e=[0,1],exitPoint:n=[10,10],exitDirection:i=[1,0],entryExt:a=10,exitExt:s=10}={},l=.5){if(i===null||i.join()==="0,0"){const _=r1(n,t);Math.abs(_[0])>Math.abs(_[1])?i=[_[0]/Math.abs(_[0]),0]:i=[0,_[1]/Math.abs(_[1])]}const c=bi(t,qo(e,a)),h=bi(n,qo(i,s));i=qo(i,-1);const d=[h[0]-c[0],0],g=[0,h[1]-c[1]],v=[d,g];let p;const b=v.find(_=>Oh(_,e))||[0,0];ll(b,e)>0?p=b:p=cl(v,b);let O;const C=v.find(_=>Oh(_,i))||[0,0];ll(C,i)>0?O=C:O=cl(v,C);const w=ll(p,O)>0?2:1,S=cl(v,O),P=[];if(P.push({position:t,direction:null},{position:c,direction:e}),w===1){const _=bi(c,p),L=Ko(p),I=bi(_,O),M=Ko(O);P.push({position:_,direction:L},{position:I,direction:M})}else{const _=bi(c,qo(p,l)),L=Ko(p),I=bi(_,S),M=Ko(S),nt=bi(I,qo(O,1-l)),ct=Ko(O);P.push({position:_,direction:L},{position:I,direction:M,type:"pathMiddleP"},{position:nt,direction:ct})}P.push({position:n,direction:i});const A=P.filter(_=>_.direction!==!1);if(A.length===3){const _=JSON.parse(JSON.stringify(A[2]));_.position=[_.position[0]+s,_.position[1]],A.splice(2,0,_),A.splice(2,0,A[1],A[2])}return A.length===5&&(A.every(_=>_.position[0]===A[0].position[0])||A.every(_=>_.position[1]===A[0].position[1])?A.splice(2,1,A[1],A[3]):A[0].position[0]===A[1].position[0]?A[2].position[0]===A[0].position[0]?A.splice(3,0,A[3]):A.splice(2,0,A[1]):A[0].position[1]===A[1].position[1]&&(A[2].position[1]===A[0].position[1]?A.splice(3,0,A[3]):A.splice(2,0,A[1]))),A}function cl(t,e){return t.find(n=>n!==e)||[0,0]}function Ko(t){return t[0]===0&&t[1]===0?!1:t[0]===0?[0,t[1]/Math.abs(t[1])]:t[1]===0?[t[0]/Math.abs(t[0]),0]:i1(t)}const Dh=({srcNode:t,tgtNode:e,edge:n})=>{var i,a,s;const l=(n==null?void 0:n.type)||zr.STRAIGHT,{absRotateDeg:c,absRotateDeg:h}=t,d=n1({entry:t,exit:e,edge:n,srcRotate:c,tgtRotate:h}),g=o1(d),v=8;let p="",b=!1,O=!1;g.forEach((I,M)=>{if(M>0){const nt=g[M-1],[ct,V]=nt.position,[tt,rt]=I.position;b||(b=Math.abs(tt-ct)>v),O||(O=Math.abs(rt-V)>v);const[K,k]=nt.direction||[0,0],[j,R]=I.direction||[0,0];l===zr.BROKEN_ROUNDED&&b&&O&&(K!==j||k!==R)?p+=R===0?`L ${ct} ${V-k*v} Q ${ct} ${V} ${ct+j*v} ${V}`:`L ${ct-K*v} ${V} Q ${ct} ${V} ${ct} ${V+R*v}`:p+=`L ${ct} ${V}`}else p=`M ${I.position[0]} ${I.position[1]}`});const C=((i=g[g.length-1])==null?void 0:i.position)||[];p+=`L ${C[0]} ${C[1]}`;const w=g.findIndex(I=>I.type==="pathMiddleP"),S=w!==-1?w:Math.floor(g.length/2),P=((a=g[S])==null?void 0:a.position)||[],A=(s=g[S-1])==null?void 0:s.position,_=A[0]+(P[0]-A[0])/2,L=A[1]+(P[1]-A[1])/2;return{pathD:p,centerX:_,centerY:L}};function Ch(t,e){const n=(e.x||0)-(t.x||0),i=(e.y||0)-(t.y||0);return Math.sqrt(n*n+i*i)}const a1=({srcNode:t,tgtNode:e})=>{const n=t.absRotateDeg,i=e.absRotateDeg,{relativeX:a=0,relativeY:s=0}=t,{relativeX:l=0,relativeY:c=0}=e,[h,d]=a<l?[Hn(qt.RIGHT,t),Hn(qt.LEFT,e)]:[Hn(qt.LEFT,t),Hn(qt.RIGHT,e)],[g,v]=s<c?[Hn(qt.BOTTOM,t),Hn(qt.TOP,e)]:[Hn(qt.TOP,t),Hn(qt.BOTTOM,e)],p=Ch(h,d),b=Ch(g,v),O=p<b,[C,w]=O?[h,d]:[g,v];if(n){const I=Xn({node:t,deg:n,coord:{x:C.x-((t.relativeX||0)+t.width/2),y:C.y-((t.relativeY||0)+t.height/2)}});C.x=(t.relativeX||0)+I.x,C.y=(t.relativeY||0)+I.y}if(i){const I=Xn({node:e,deg:i,coord:{x:w.x-((e.relativeX||0)+e.width/2),y:w.y-((e.relativeY||0)+e.height/2)}});w.x=(e.relativeX||0)+I.x,w.y=(e.relativeY||0)+I.y}const S=80,P=O?C.x<w.x?1:-1:C.y<w.y?1:-1,A=O?`M ${C.x} ${C.y} C ${C.x+P*S} ${C.y} ${w.x-P*S} ${w.y} ${w.x} ${w.y}`:`M ${C.x} ${C.y} C ${C.x} ${C.y+P*S} ${w.x} ${w.y-P*S} ${w.x} ${w.y}`,_=C.x+(w.x-C.x)/2,L=C.y+(w.y-C.y)/2;return{pathD:A,centerX:_,centerY:L}},s1=({srcNode:t,tgtNode:e,edge:n})=>{const i=t.absRotateDeg,a=e.absRotateDeg,s=Hn(n==null?void 0:n.sourceDirection,t,i),l=Hn(n==null?void 0:n.targetDirection,e,a);return{centerX:s.x+(l.x-s.x)/2,centerY:s.y+(l.y-s.y)/2,pathD:`M ${s.x},${s.y} L ${l.x},${l.y}`}};function kh(t,e){return F.map(e,n=>Go(t||[],n))}function Go(t,e){var n;const i=ul(t,e.source),a=ul(t,e.target),s=e.type||zr.STRAIGHT;if(!i||!a)return Mt(Z({},e),{pathD:"",centerX:0,centerY:0});if(i.id===a.id)return Mt(Z({},e),{pathD:"",centerX:0,centerY:0});const l={[zr.STRAIGHT]:s1,[zr.CURVE_AUTO]:a1,[zr.BROKEN]:Dh,[zr.BROKEN_ROUNDED]:Dh};return Z(Z({},e),(n=l==null?void 0:l[s])==null?void 0:n.call(l,{srcNode:i,tgtNode:a,edge:e}))}function ro(){return"100080000000000".replace(/[018]/g,t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))}const ce=Py((t,e)=>({state:{width:0,height:0,nodes:[],edges:[],backupData:[],svgInfo:{},selectedNodes:[],selectedEdges:[],marqueeNodes:[],copyNode:null,targetInfo:null,gaussianBlur:26,centroidTick:0,uniqId:ro(),edgeProps:{},nodeProps:{}},setState:n=>{t(i=>({state:Z(Z({},i),n)}))},getState:()=>e().state,setNodes:n=>{t(ze(({state:i})=>{i.nodes=n}))},setEdges:n=>{t(ze(({state:i})=>{i.edges=n}))},insertEdge:n=>{t(ze(({state:i})=>{const a=Go(i.nodes,n);i.edges=i.edges.concat(a)}))},deleteNodeByIds:n=>{t(ze(({state:i})=>{i.nodes=F.filter(i.nodes,a=>!F.includes(n,a.id)),i.edges=F.filter(i.edges,a=>!F.includes(n,a.source)&&!F.includes(n,a.target))}))},deleteEdgeByIds:n=>{t(ze(({state:i})=>{i.edges=F.filter(i.edges,a=>!F.includes(n,a.id))}))},setSvgInfo:n=>{t(ze(({state:i})=>{i.svgInfo=n}))},setCanvasSize:n=>{t(ze(({state:i})=>{i.width=(n==null?void 0:n.width)||0,i.height=(n==null?void 0:n.height)||0}))},setSelectedNodes:n=>{t(ze(({state:i})=>{i.selectedNodes=n}))},setMarqueeNodes:n=>{t(ze(({state:i})=>{i.marqueeNodes=n}))},setSelectedEdges:n=>{t(ze(({state:i})=>{i.selectedEdges=n}))},updateEdge:n=>{let i=Array.isArray(n)?n:[n];t(ze(({state:a})=>{i=F.map(i,s=>(s.pathD||(s=Go(a.nodes,s)),s)),a.edges=F.map(a.edges,s=>{const l=F.findIndex(i,c=>c.id===s.id);return l>-1?i[l]:s})}))},resizeNode:(n,i)=>{t(ze(({state:a})=>{const{nodes:s,edges:l}=a,c=Fr(s,n==null?void 0:n.id),h=c[c.length-1];i=Qy(i,h);const d=yi(s,n==null?void 0:n.id,i),g=kh(d,l);a.nodes=d,a.edges=g}))},updateNodesAndEdges:(n,i,a="patch")=>{t(ze(({state:s})=>{var l;a==="patch"&&(s.backupData=(l=s.backupData)==null?void 0:l.concat({nodes:F.cloneDeep(s.nodes),edges:F.cloneDeep(s.edges)})),s.nodes=n,s.edges=i}))},updateNodes:n=>{t(ze(({state:i})=>{const a=F.map(i.edges,s=>Go(n,s));i.nodes=n,i.edges=a}))}}));var Th=function(){if(typeof Map<"u")return Map;function t(e,n){var i=-1;return e.some(function(a,s){return a[0]===n?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var i=t(this.__entries__,n),a=this.__entries__[i];return a&&a[1]},e.prototype.set=function(n,i){var a=t(this.__entries__,n);~a?this.__entries__[a][1]=i:this.__entries__.push([n,i])},e.prototype.delete=function(n){var i=this.__entries__,a=t(i,n);~a&&i.splice(a,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var a=0,s=this.__entries__;a<s.length;a++){var l=s[a];n.call(i,l[1],l[0])}},e}()}(),fl=typeof window<"u"&&typeof document<"u"&&window.document===document,ts=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),u1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ts):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),l1=2;function c1(t,e){var n=!1,i=!1,a=0;function s(){n&&(n=!1,t()),i&&c()}function l(){u1(s)}function c(){var h=Date.now();if(n){if(h-a<l1)return;i=!0}else n=!0,i=!1,setTimeout(l,e);a=h}return c}var f1=20,h1=["top","right","bottom","left","width","height","size","weight"],d1=typeof MutationObserver<"u",g1=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=c1(this.refresh.bind(this),f1)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,i=n.indexOf(e);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!fl||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d1?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!fl||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,i=n===void 0?"":n,a=h1.some(function(s){return!!~i.indexOf(s)});a&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Ah=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];Object.defineProperty(t,a,{value:e[a],enumerable:!1,writable:!1,configurable:!0})}return t},io=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||ts},Nh=ns(0,0,0,0);function es(t){return parseFloat(t)||0}function Rh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(i,a){var s=t["border-"+a+"-width"];return i+es(s)},0)}function p1(t){for(var e=["top","right","bottom","left"],n={},i=0,a=e;i<a.length;i++){var s=a[i],l=t["padding-"+s];n[s]=es(l)}return n}function v1(t){var e=t.getBBox();return ns(0,0,e.width,e.height)}function m1(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Nh;var i=io(t).getComputedStyle(t),a=p1(i),s=a.left+a.right,l=a.top+a.bottom,c=es(i.width),h=es(i.height);if(i.boxSizing==="border-box"&&(Math.round(c+s)!==e&&(c-=Rh(i,"left","right")+s),Math.round(h+l)!==n&&(h-=Rh(i,"top","bottom")+l)),!b1(t)){var d=Math.round(c+s)-e,g=Math.round(h+l)-n;Math.abs(d)!==1&&(c-=d),Math.abs(g)!==1&&(h-=g)}return ns(a.left,a.top,c,h)}var y1=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof io(t).SVGGraphicsElement}:function(t){return t instanceof io(t).SVGElement&&typeof t.getBBox=="function"}}();function b1(t){return t===io(t).document.documentElement}function w1(t){return fl?y1(t)?v1(t):m1(t):Nh}function x1(t){var e=t.x,n=t.y,i=t.width,a=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(s.prototype);return Ah(l,{x:e,y:n,width:i,height:a,top:n,right:e+i,bottom:a+n,left:e}),l}function ns(t,e,n,i){return{x:t,y:e,width:n,height:i}}var _1=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ns(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=w1(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),S1=function(){function t(e,n){var i=x1(n);Ah(this,{target:e,contentRect:i})}return t}(),E1=function(){function t(e,n,i){if(this.activeObservations_=[],this.observations_=new Th,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof io(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new _1(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof io(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new S1(i.target,i.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),$h=typeof WeakMap<"u"?new WeakMap:new Th,Ih=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=g1.getInstance(),i=new E1(e,n,this);$h.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Ih.prototype[t]=function(){var e;return(e=$h.get(this))[t].apply(e,arguments)}});var Ph=function(){return typeof ts.ResizeObserver<"u"?ts.ResizeObserver:Ih}();function O1(t){return typeof t=="function"}function hl(t,e){if(!t)return e;let n;return O1(t)?n=t():"current"in t?n=t.current:n=t,n}function D1(t){const e=(0,E.useRef)(t);return e.current=t,e}function jh(t){const e=D1(t);(0,E.useEffect)(()=>()=>{e.current()},[])}function Lh(t,e){if(t===e)return!0;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}function C1(t){return(e,n,i)=>{const a=(0,E.useRef)(!1),s=(0,E.useRef)([]),l=(0,E.useRef)([]),c=(0,E.useRef)();t(()=>{var h;const d=(Array.isArray(i)?i:[i]).map(g=>hl(g));if(!a.current){a.current=!0,s.current=d,l.current=n,c.current=e();return}(d.length!==s.current.length||!Lh(s.current,d)||!Lh(l.current,n))&&((h=c.current)==null||h.call(c),s.current=d,l.current=n,c.current=e())}),jh(()=>{var h;(h=c.current)==null||h.call(c),a.current=!1})}}function k1(t){const e=(0,E.useRef)(0),[n,i]=(0,E.useState)(t),a=(0,E.useCallback)(s=>{cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{i(s)})},[]);return jh(()=>{cancelAnimationFrame(e.current)}),[n,a]}function T1(t){const[e,n]=k1(()=>{const i=hl(t);return i?{width:i.clientWidth,height:i.clientHeight}:void 0});return C1(E.useLayoutEffect)(()=>{const i=hl(t);if(!i)return;const a=new Ph(s=>{s.forEach(l=>{const{clientWidth:c,clientHeight:h}=l.target;n({width:c,height:h})})});return a.observe(i),()=>{a.disconnect()}},[],t),e}var A1={value:()=>{}};function rs(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new is(n)}function is(t){this._=t}function N1(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}is.prototype=rs.prototype={constructor:is,on:function(t,e){var n=this._,i=N1(t+"",n),a,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((a=(t=i[s]).type)&&(a=R1(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<l;)if(a=(t=i[s]).type)n[a]=Mh(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Mh(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new is(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,s;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,a=s.length;i<a;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,s=i.length;a<s;++a)i[a].value.apply(e,n)}};function R1(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function Mh(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=A1,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var dl="http://www.w3.org/1999/xhtml";const zh={svg:"http://www.w3.org/2000/svg",xhtml:dl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function os(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),zh.hasOwnProperty(e)?{space:zh[e],local:t}:t}function $1(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===dl&&e.documentElement.namespaceURI===dl?e.createElement(t):e.createElementNS(n,t)}}function I1(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fh(t){var e=os(t);return(e.local?I1:$1)(e)}function P1(){}function gl(t){return t==null?P1:function(){return this.querySelector(t)}}function j1(t){typeof t!="function"&&(t=gl(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s=e[a],l=s.length,c=i[a]=new Array(l),h,d,g=0;g<l;++g)(h=s[g])&&(d=t.call(h,h.__data__,g,s))&&("__data__"in h&&(d.__data__=h.__data__),c[g]=d);return new Je(i,this._parents)}function L1(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function M1(){return[]}function Bh(t){return t==null?M1:function(){return this.querySelectorAll(t)}}function z1(t){return function(){return L1(t.apply(this,arguments))}}function F1(t){typeof t=="function"?t=z1(t):t=Bh(t);for(var e=this._groups,n=e.length,i=[],a=[],s=0;s<n;++s)for(var l=e[s],c=l.length,h,d=0;d<c;++d)(h=l[d])&&(i.push(t.call(h,h.__data__,d,l)),a.push(h));return new Je(i,a)}function Uh(t){return function(){return this.matches(t)}}function Xh(t){return function(e){return e.matches(t)}}var B1=Array.prototype.find;function U1(t){return function(){return B1.call(this.children,t)}}function X1(){return this.firstElementChild}function H1(t){return this.select(t==null?X1:U1(typeof t=="function"?t:Xh(t)))}var W1=Array.prototype.filter;function V1(){return Array.from(this.children)}function Y1(t){return function(){return W1.call(this.children,t)}}function q1(t){return this.selectAll(t==null?V1:Y1(typeof t=="function"?t:Xh(t)))}function K1(t){typeof t!="function"&&(t=Uh(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s=e[a],l=s.length,c=i[a]=[],h,d=0;d<l;++d)(h=s[d])&&t.call(h,h.__data__,d,s)&&c.push(h);return new Je(i,this._parents)}function Hh(t){return new Array(t.length)}function G1(){return new Je(this._enter||this._groups.map(Hh),this._parents)}function as(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}as.prototype={constructor:as,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function J1(t){return function(){return t}}function Q1(t,e,n,i,a,s){for(var l=0,c,h=e.length,d=s.length;l<d;++l)(c=e[l])?(c.__data__=s[l],i[l]=c):n[l]=new as(t,s[l]);for(;l<h;++l)(c=e[l])&&(a[l]=c)}function Z1(t,e,n,i,a,s,l){var c,h,d=new Map,g=e.length,v=s.length,p=new Array(g),b;for(c=0;c<g;++c)(h=e[c])&&(p[c]=b=l.call(h,h.__data__,c,e)+"",d.has(b)?a[c]=h:d.set(b,h));for(c=0;c<v;++c)b=l.call(t,s[c],c,s)+"",(h=d.get(b))?(i[c]=h,h.__data__=s[c],d.delete(b)):n[c]=new as(t,s[c]);for(c=0;c<g;++c)(h=e[c])&&d.get(p[c])===h&&(a[c]=h)}function tb(t){return t.__data__}function eb(t,e){if(!arguments.length)return Array.from(this,tb);var n=e?Z1:Q1,i=this._parents,a=this._groups;typeof t!="function"&&(t=J1(t));for(var s=a.length,l=new Array(s),c=new Array(s),h=new Array(s),d=0;d<s;++d){var g=i[d],v=a[d],p=v.length,b=nb(t.call(g,g&&g.__data__,d,i)),O=b.length,C=c[d]=new Array(O),w=l[d]=new Array(O),S=h[d]=new Array(p);n(g,v,C,w,S,b,e);for(var P=0,A=0,_,L;P<O;++P)if(_=C[P]){for(P>=A&&(A=P+1);!(L=w[A])&&++A<O;);_._next=L||null}}return l=new Je(l,i),l._enter=c,l._exit=h,l}function nb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function rb(){return new Je(this._exit||this._groups.map(Hh),this._parents)}function ib(t,e,n){var i=this.enter(),a=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?s.remove():n(s),i&&a?i.merge(a).order():a}function ob(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,s=i.length,l=Math.min(a,s),c=new Array(a),h=0;h<l;++h)for(var d=n[h],g=i[h],v=d.length,p=c[h]=new Array(v),b,O=0;O<v;++O)(b=d[O]||g[O])&&(p[O]=b);for(;h<a;++h)c[h]=n[h];return new Je(c,this._parents)}function ab(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,s=i[a],l;--a>=0;)(l=i[a])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function sb(t){t||(t=ub);function e(v,p){return v&&p?t(v.__data__,p.__data__):!v-!p}for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var l=n[s],c=l.length,h=a[s]=new Array(c),d,g=0;g<c;++g)(d=l[g])&&(h[g]=d);h.sort(e)}return new Je(a,this._parents).order()}function ub(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function cb(){return Array.from(this)}function fb(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,s=i.length;a<s;++a){var l=i[a];if(l)return l}return null}function hb(){let t=0;for(const e of this)++t;return t}function db(){return!this.node()}function gb(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],s=0,l=a.length,c;s<l;++s)(c=a[s])&&t.call(c,c.__data__,s,a);return this}function pb(t){return function(){this.removeAttribute(t)}}function vb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mb(t,e){return function(){this.setAttribute(t,e)}}function yb(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xb(t,e){var n=os(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?vb:pb:typeof e=="function"?n.local?wb:bb:n.local?yb:mb)(n,e))}function Wh(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _b(t){return function(){this.style.removeProperty(t)}}function Sb(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Eb(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ob(t,e,n){return arguments.length>1?this.each((e==null?_b:typeof e=="function"?Eb:Sb)(t,e,n!=null?n:"")):oo(this.node(),t)}function oo(t,e){return t.style.getPropertyValue(e)||Wh(t).getComputedStyle(t,null).getPropertyValue(e)}function Db(t){return function(){delete this[t]}}function Cb(t,e){return function(){this[t]=e}}function kb(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Tb(t,e){return arguments.length>1?this.each((e==null?Db:typeof e=="function"?kb:Cb)(t,e)):this.node()[t]}function Vh(t){return t.trim().split(/^|\s+/)}function pl(t){return t.classList||new Yh(t)}function Yh(t){this._node=t,this._names=Vh(t.getAttribute("class")||"")}Yh.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qh(t,e){for(var n=pl(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function Kh(t,e){for(var n=pl(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function Ab(t){return function(){qh(this,t)}}function Nb(t){return function(){Kh(this,t)}}function Rb(t,e){return function(){(e.apply(this,arguments)?qh:Kh)(this,t)}}function $b(t,e){var n=Vh(t+"");if(arguments.length<2){for(var i=pl(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?Rb:e?Ab:Nb)(n,e))}function Ib(){this.textContent=""}function Pb(t){return function(){this.textContent=t}}function jb(t){return function(){var e=t.apply(this,arguments);this.textContent=e!=null?e:""}}function Lb(t){return arguments.length?this.each(t==null?Ib:(typeof t=="function"?jb:Pb)(t)):this.node().textContent}function Mb(){this.innerHTML=""}function zb(t){return function(){this.innerHTML=t}}function Fb(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e!=null?e:""}}function Bb(t){return arguments.length?this.each(t==null?Mb:(typeof t=="function"?Fb:zb)(t)):this.node().innerHTML}function Ub(){this.nextSibling&&this.parentNode.appendChild(this)}function Xb(){return this.each(Ub)}function Hb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wb(){return this.each(Hb)}function Vb(t){var e=typeof t=="function"?t:Fh(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Yb(){return null}function qb(t,e){var n=typeof t=="function"?t:Fh(t),i=e==null?Yb:typeof e=="function"?e:gl(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Kb(){var t=this.parentNode;t&&t.removeChild(this)}function Gb(){return this.each(Kb)}function Jb(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qb(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zb(t){return this.select(t?Qb:Jb)}function tw(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ew(t){return function(e){t.call(this,e,this.__data__)}}function nw(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function rw(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,s;n<a;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function iw(t,e,n){return function(){var i=this.__on,a,s=ew(e);if(i){for(var l=0,c=i.length;l<c;++l)if((a=i[l]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=e;return}}this.addEventListener(t.type,s,n),a={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(a):this.__on=[a]}}function ow(t,e,n){var i=nw(t+""),a,s=i.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var h=0,d=c.length,g;h<d;++h)for(a=0,g=c[h];a<s;++a)if((l=i[a]).type===g.type&&l.name===g.name)return g.value}return}for(c=e?iw:rw,a=0;a<s;++a)this.each(c(i[a],e,n));return this}function Gh(t,e,n){var i=Wh(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function aw(t,e){return function(){return Gh(this,t,e)}}function sw(t,e){return function(){return Gh(this,t,e.apply(this,arguments))}}function uw(t,e){return this.each((typeof e=="function"?sw:aw)(t,e))}function*lw(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,s=i.length,l;a<s;++a)(l=i[a])&&(yield l)}var Jh=[null];function Je(t,e){this._groups=t,this._parents=e}function Jo(){return new Je([[document.documentElement]],Jh)}function cw(){return this}Je.prototype=Jo.prototype={constructor:Je,select:j1,selectAll:F1,selectChild:H1,selectChildren:q1,filter:K1,data:eb,enter:G1,exit:rb,join:ib,merge:ob,selection:cw,order:ab,sort:sb,call:lb,nodes:cb,node:fb,size:hb,empty:db,each:gb,attr:xb,style:Ob,property:Tb,classed:$b,text:Lb,html:Bb,raise:Xb,lower:Wb,append:Vb,insert:qb,remove:Gb,clone:Zb,datum:tw,on:ow,dispatch:uw,[Symbol.iterator]:lw};function be(t){return typeof t=="string"?new Je([[document.querySelector(t)]],[document.documentElement]):new Je([[t]],Jh)}function fw(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ur(t,e){if(t=fw(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const hw={passive:!1},Qo={capture:!0,passive:!1};function vl(t){t.stopImmediatePropagation()}function ao(t){t.preventDefault(),t.stopImmediatePropagation()}function Qh(t){var e=t.document.documentElement,n=be(t).on("dragstart.drag",ao,Qo);"onselectstart"in e?n.on("selectstart.drag",ao,Qo):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zh(t,e){var n=t.document.documentElement,i=be(t).on("dragstart.drag",null);e&&(i.on("click.drag",ao,Qo),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ss=t=>()=>t;function ml(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:s,x:l,y:c,dx:h,dy:d,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:g}})}ml.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function dw(t){return!t.ctrlKey&&!t.button}function gw(){return this.parentNode}function pw(t,e){return e!=null?e:{x:t.x,y:t.y}}function vw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zo(){var t=dw,e=gw,n=pw,i=vw,a={},s=rs("start","drag","end"),l=0,c,h,d,g,v=0;function p(_){_.on("mousedown.drag",b).filter(i).on("touchstart.drag",w).on("touchmove.drag",S,hw).on("touchend.drag touchcancel.drag",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(_,L){if(!(g||!t.call(this,_,L))){var I=A(this,e.call(this,_,L),_,L,"mouse");I&&(be(_.view).on("mousemove.drag",O,Qo).on("mouseup.drag",C,Qo),Qh(_.view),vl(_),d=!1,c=_.clientX,h=_.clientY,I("start",_))}}function O(_){if(ao(_),!d){var L=_.clientX-c,I=_.clientY-h;d=L*L+I*I>v}a.mouse("drag",_)}function C(_){be(_.view).on("mousemove.drag mouseup.drag",null),Zh(_.view,d),ao(_),a.mouse("end",_)}function w(_,L){if(t.call(this,_,L)){var I=_.changedTouches,M=e.call(this,_,L),nt=I.length,ct,V;for(ct=0;ct<nt;++ct)(V=A(this,M,_,L,I[ct].identifier,I[ct]))&&(vl(_),V("start",_,I[ct]))}}function S(_){var L=_.changedTouches,I=L.length,M,nt;for(M=0;M<I;++M)(nt=a[L[M].identifier])&&(ao(_),nt("drag",_,L[M]))}function P(_){var L=_.changedTouches,I=L.length,M,nt;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),M=0;M<I;++M)(nt=a[L[M].identifier])&&(vl(_),nt("end",_,L[M]))}function A(_,L,I,M,nt,ct){var V=s.copy(),tt=ur(ct||I,L),rt,K,k;if((k=n.call(_,new ml("beforestart",{sourceEvent:I,target:p,identifier:nt,active:l,x:tt[0],y:tt[1],dx:0,dy:0,dispatch:V}),M))!=null)return rt=k.x-tt[0]||0,K=k.y-tt[1]||0,function j(R,B,U){var Q=tt,X;switch(R){case"start":a[nt]=j,X=l++;break;case"end":delete a[nt],--l;case"drag":tt=ur(U||B,L),X=l;break}V.call(R,_,new ml(R,{sourceEvent:B,subject:k,target:p,identifier:nt,active:X,x:tt[0]+rt,y:tt[1]+K,dx:tt[0]-Q[0],dy:tt[1]-Q[1],dispatch:V}),M)}}return p.filter=function(_){return arguments.length?(t=typeof _=="function"?_:ss(!!_),p):t},p.container=function(_){return arguments.length?(e=typeof _=="function"?_:ss(_),p):e},p.subject=function(_){return arguments.length?(n=typeof _=="function"?_:ss(_),p):n},p.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:ss(!!_),p):i},p.on=function(){var _=s.on.apply(s,arguments);return _===s?p:_},p.clickDistance=function(_){return arguments.length?(v=(_=+_)*_,p):Math.sqrt(v)},p}function yl(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function td(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ta(){}var ea=.7,us=1/ea,so="\\s*([+-]?\\d+)\\s*",na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mw=/^#([0-9a-f]{3,8})$/,yw=new RegExp(`^rgb\\(${so},${so},${so}\\)$`),bw=new RegExp(`^rgb\\(${Wn},${Wn},${Wn}\\)$`),ww=new RegExp(`^rgba\\(${so},${so},${so},${na}\\)$`),xw=new RegExp(`^rgba\\(${Wn},${Wn},${Wn},${na}\\)$`),_w=new RegExp(`^hsl\\(${na},${Wn},${Wn}\\)$`),Sw=new RegExp(`^hsla\\(${na},${Wn},${Wn},${na}\\)$`),ed={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yl(ta,ra,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nd,formatHex:nd,formatHex8:Ew,formatHsl:Ow,formatRgb:rd,toString:rd});function nd(){return this.rgb().formatHex()}function Ew(){return this.rgb().formatHex8()}function Ow(){return ud(this).formatHsl()}function rd(){return this.rgb().formatRgb()}function ra(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mw.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?id(e):n===3?new Fe(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ls(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ls(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yw.exec(t))?new Fe(e[1],e[2],e[3],1):(e=bw.exec(t))?new Fe(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ww.exec(t))?ls(e[1],e[2],e[3],e[4]):(e=xw.exec(t))?ls(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_w.exec(t))?sd(e[1],e[2]/100,e[3]/100,1):(e=Sw.exec(t))?sd(e[1],e[2]/100,e[3]/100,e[4]):ed.hasOwnProperty(t)?id(ed[t]):t==="transparent"?new Fe(NaN,NaN,NaN,0):null}function id(t){return new Fe(t>>16&255,t>>8&255,t&255,1)}function ls(t,e,n,i){return i<=0&&(t=e=n=NaN),new Fe(t,e,n,i)}function Dw(t){return t instanceof ta||(t=ra(t)),t?(t=t.rgb(),new Fe(t.r,t.g,t.b,t.opacity)):new Fe}function bl(t,e,n,i){return arguments.length===1?Dw(t):new Fe(t,e,n,i!=null?i:1)}function Fe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}yl(Fe,bl,td(ta,{brighter(t){return t=t==null?us:Math.pow(us,t),new Fe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ea:Math.pow(ea,t),new Fe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fe(wi(this.r),wi(this.g),wi(this.b),cs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:od,formatHex:od,formatHex8:Cw,formatRgb:ad,toString:ad}));function od(){return`#${xi(this.r)}${xi(this.g)}${xi(this.b)}`}function Cw(){return`#${xi(this.r)}${xi(this.g)}${xi(this.b)}${xi((isNaN(this.opacity)?1:this.opacity)*255)}`}function ad(){const t=cs(this.opacity);return`${t===1?"rgb(":"rgba("}${wi(this.r)}, ${wi(this.g)}, ${wi(this.b)}${t===1?")":`, ${t})`}`}function cs(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xi(t){return t=wi(t),(t<16?"0":"")+t.toString(16)}function sd(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Dn(t,e,n,i)}function ud(t){if(t instanceof Dn)return new Dn(t.h,t.s,t.l,t.opacity);if(t instanceof ta||(t=ra(t)),!t)return new Dn;if(t instanceof Dn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),s=Math.max(e,n,i),l=NaN,c=s-a,h=(s+a)/2;return c?(e===s?l=(n-i)/c+(n<i)*6:n===s?l=(i-e)/c+2:l=(e-n)/c+4,c/=h<.5?s+a:2-s-a,l*=60):c=h>0&&h<1?0:l,new Dn(l,c,h,t.opacity)}function kw(t,e,n,i){return arguments.length===1?ud(t):new Dn(t,e,n,i!=null?i:1)}function Dn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}yl(Dn,kw,td(ta,{brighter(t){return t=t==null?us:Math.pow(us,t),new Dn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ea:Math.pow(ea,t),new Dn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new Fe(wl(t>=240?t-240:t+120,a,i),wl(t,a,i),wl(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Dn(ld(this.h),fs(this.s),fs(this.l),cs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cs(this.opacity);return`${t===1?"hsl(":"hsla("}${ld(this.h)}, ${fs(this.s)*100}%, ${fs(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ld(t){return t=(t||0)%360,t<0?t+360:t}function fs(t){return Math.max(0,Math.min(1,t||0))}function wl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const cd=t=>()=>t;function Tw(t,e){return function(n){return t+n*e}}function Aw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Nw(t){return(t=+t)==1?fd:function(e,n){return n-e?Aw(e,n,t):cd(isNaN(e)?n:e)}}function fd(t,e){var n=e-t;return n?Tw(t,n):cd(isNaN(t)?e:t)}const hd=function t(e){var n=Nw(e);function i(a,s){var l=n((a=bl(a)).r,(s=bl(s)).r),c=n(a.g,s.g),h=n(a.b,s.b),d=fd(a.opacity,s.opacity);return function(g){return a.r=l(g),a.g=c(g),a.b=h(g),a.opacity=d(g),a+""}}return i.gamma=t,i}(1);function Br(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_l=new RegExp(xl.source,"g");function Rw(t){return function(){return t}}function $w(t){return function(e){return t(e)+""}}function Iw(t,e){var n=xl.lastIndex=_l.lastIndex=0,i,a,s,l=-1,c=[],h=[];for(t=t+"",e=e+"";(i=xl.exec(t))&&(a=_l.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),c[l]?c[l]+=s:c[++l]=s),(i=i[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,h.push({i:l,x:Br(i,a)})),n=_l.lastIndex;return n<e.length&&(s=e.slice(n),c[l]?c[l]+=s:c[++l]=s),c.length<2?h[0]?$w(h[0].x):Rw(e):(e=h.length,function(d){for(var g=0,v;g<e;++g)c[(v=h[g]).i]=v.x(d);return c.join("")})}var dd=180/Math.PI,gd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pd(t,e,n,i,a,s){var l,c,h;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(h=t*n+e*i)&&(n-=t*h,i-=e*h),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,h/=c),t*i<e*n&&(t=-t,e=-e,h=-h,l=-l),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*dd,skewX:Math.atan(h)*dd,scaleX:l,scaleY:c}}var hs;function Pw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gd:pd(e.a,e.b,e.c,e.d,e.e,e.f)}function jw(t){return t==null||(hs||(hs=document.createElementNS("http://www.w3.org/2000/svg","g")),hs.setAttribute("transform",t),!(t=hs.transform.baseVal.consolidate()))?gd:(t=t.matrix,pd(t.a,t.b,t.c,t.d,t.e,t.f))}function vd(t,e,n,i){function a(d){return d.length?d.pop()+" ":""}function s(d,g,v,p,b,O){if(d!==v||g!==p){var C=b.push("translate(",null,e,null,n);O.push({i:C-4,x:Br(d,v)},{i:C-2,x:Br(g,p)})}else(v||p)&&b.push("translate("+v+e+p+n)}function l(d,g,v,p){d!==g?(d-g>180?g+=360:g-d>180&&(d+=360),p.push({i:v.push(a(v)+"rotate(",null,i)-2,x:Br(d,g)})):g&&v.push(a(v)+"rotate("+g+i)}function c(d,g,v,p){d!==g?p.push({i:v.push(a(v)+"skewX(",null,i)-2,x:Br(d,g)}):g&&v.push(a(v)+"skewX("+g+i)}function h(d,g,v,p,b,O){if(d!==v||g!==p){var C=b.push(a(b)+"scale(",null,",",null,")");O.push({i:C-4,x:Br(d,v)},{i:C-2,x:Br(g,p)})}else(v!==1||p!==1)&&b.push(a(b)+"scale("+v+","+p+")")}return function(d,g){var v=[],p=[];return d=t(d),g=t(g),s(d.translateX,d.translateY,g.translateX,g.translateY,v,p),l(d.rotate,g.rotate,v,p),c(d.skewX,g.skewX,v,p),h(d.scaleX,d.scaleY,g.scaleX,g.scaleY,v,p),d=g=null,function(b){for(var O=-1,C=p.length,w;++O<C;)v[(w=p[O]).i]=w.x(b);return v.join("")}}}var Lw=vd(Pw,"px, ","px)","deg)"),Mw=vd(jw,", ",")",")"),zw=1e-12;function md(t){return((t=Math.exp(t))+1/t)/2}function Fw(t){return((t=Math.exp(t))-1/t)/2}function Bw(t){return((t=Math.exp(2*t))-1)/(t+1)}const Uw=function t(e,n,i){function a(s,l){var c=s[0],h=s[1],d=s[2],g=l[0],v=l[1],p=l[2],b=g-c,O=v-h,C=b*b+O*O,w,S;if(C<zw)S=Math.log(p/d)/e,w=function(M){return[c+M*b,h+M*O,d*Math.exp(e*M*S)]};else{var P=Math.sqrt(C),A=(p*p-d*d+i*C)/(2*d*n*P),_=(p*p-d*d-i*C)/(2*p*n*P),L=Math.log(Math.sqrt(A*A+1)-A),I=Math.log(Math.sqrt(_*_+1)-_);S=(I-L)/e,w=function(M){var nt=M*S,ct=md(L),V=d/(n*P)*(ct*Bw(e*nt+L)-Fw(L));return[c+V*b,h+V*O,d*ct/md(e*nt+L)]}}return w.duration=S*1e3*e/Math.SQRT2,w}return a.rho=function(s){var l=Math.max(.001,+s),c=l*l,h=c*c;return t(l,c,h)},a}(Math.SQRT2,2,4);var uo=0,ia=0,oa=0,yd=1e3,ds,aa,gs=0,_i=0,ps=0,sa=typeof performance=="object"&&performance.now?performance:Date,bd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Sl(){return _i||(bd(Xw),_i=sa.now()+ps)}function Xw(){_i=0}function vs(){this._call=this._time=this._next=null}vs.prototype=wd.prototype={constructor:vs,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Sl():+n)+(e==null?0:+e),!this._next&&aa!==this&&(aa?aa._next=this:ds=this,aa=this),this._call=t,this._time=n,El()},stop:function(){this._call&&(this._call=null,this._time=1/0,El())}};function wd(t,e,n){var i=new vs;return i.restart(t,e,n),i}function Hw(){Sl(),++uo;for(var t=ds,e;t;)(e=_i-t._time)>=0&&t._call.call(void 0,e),t=t._next;--uo}function xd(){_i=(gs=sa.now())+ps,uo=ia=0;try{Hw()}finally{uo=0,Vw(),_i=0}}function Ww(){var t=sa.now(),e=t-gs;e>yd&&(ps-=e,gs=t)}function Vw(){for(var t,e=ds,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ds=n);aa=t,El(i)}function El(t){if(!uo){ia&&(ia=clearTimeout(ia));var e=t-_i;e>24?(t<1/0&&(ia=setTimeout(xd,t-sa.now()-ps)),oa&&(oa=clearInterval(oa))):(oa||(gs=sa.now(),oa=setInterval(Ww,yd)),uo=1,bd(xd))}}function _d(t,e,n){var i=new vs;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var Yw=rs("start","end","cancel","interrupt"),qw=[],Sd=0,Ed=1,Ol=2,ms=3,Od=4,Dl=5,ys=6;function bs(t,e,n,i,a,s){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;Kw(t,n,{name:e,index:i,group:a,on:Yw,tween:qw,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Sd})}function Cl(t,e){var n=Cn(t,e);if(n.state>Sd)throw new Error("too late; already scheduled");return n}function Vn(t,e){var n=Cn(t,e);if(n.state>ms)throw new Error("too late; already running");return n}function Cn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kw(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=wd(s,0,n.time);function s(d){n.state=Ed,n.timer.restart(l,n.delay,n.time),n.delay<=d&&l(d-n.delay)}function l(d){var g,v,p,b;if(n.state!==Ed)return h();for(g in i)if(b=i[g],b.name===n.name){if(b.state===ms)return _d(l);b.state===Od?(b.state=ys,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete i[g]):+g<e&&(b.state=ys,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete i[g])}if(_d(function(){n.state===ms&&(n.state=Od,n.timer.restart(c,n.delay,n.time),c(d))}),n.state=Ol,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ol){for(n.state=ms,a=new Array(p=n.tween.length),g=0,v=-1;g<p;++g)(b=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(a[++v]=b);a.length=v+1}}function c(d){for(var g=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(h),n.state=Dl,1),v=-1,p=a.length;++v<p;)a[v].call(t,g);n.state===Dl&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){n.state=ys,n.timer.stop(),delete i[e];for(var d in i)return;delete t.__transition}}function ws(t,e){var n=t.__transition,i,a,s=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((i=n[l]).name!==e){s=!1;continue}a=i.state>Ol&&i.state<Dl,i.state=ys,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[l]}s&&delete t.__transition}}function Gw(t){return this.each(function(){ws(this,t)})}function Jw(t,e){var n,i;return function(){var a=Vn(this,t),s=a.tween;if(s!==n){i=n=s;for(var l=0,c=i.length;l<c;++l)if(i[l].name===e){i=i.slice(),i.splice(l,1);break}}a.tween=i}}function Qw(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var s=Vn(this,t),l=s.tween;if(l!==i){a=(i=l).slice();for(var c={name:e,value:n},h=0,d=a.length;h<d;++h)if(a[h].name===e){a[h]=c;break}h===d&&a.push(c)}s.tween=a}}function Zw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Cn(this.node(),n).tween,a=0,s=i.length,l;a<s;++a)if((l=i[a]).name===t)return l.value;return null}return this.each((e==null?Jw:Qw)(n,t,e))}function kl(t,e,n){var i=t._id;return t.each(function(){var a=Vn(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return Cn(a,i).value[e]}}function Dd(t,e){var n;return(typeof e=="number"?Br:e instanceof ra?hd:(n=ra(e))?(e=n,hd):Iw)(t,e)}function tx(t){return function(){this.removeAttribute(t)}}function ex(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nx(t,e,n){var i,a=n+"",s;return function(){var l=this.getAttribute(t);return l===a?null:l===i?s:s=e(i=l,n)}}function rx(t,e,n){var i,a=n+"",s;return function(){var l=this.getAttributeNS(t.space,t.local);return l===a?null:l===i?s:s=e(i=l,n)}}function ix(t,e,n){var i,a,s;return function(){var l,c=n(this),h;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),h=c+"",l===h?null:l===i&&h===a?s:(a=h,s=e(i=l,c)))}}function ox(t,e,n){var i,a,s;return function(){var l,c=n(this),h;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),h=c+"",l===h?null:l===i&&h===a?s:(a=h,s=e(i=l,c)))}}function ax(t,e){var n=os(t),i=n==="transform"?Mw:Dd;return this.attrTween(t,typeof e=="function"?(n.local?ox:ix)(n,i,kl(this,"attr."+t,e)):e==null?(n.local?ex:tx)(n):(n.local?rx:nx)(n,i,e))}function sx(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ux(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function lx(t,e){var n,i;function a(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&ux(t,s)),n}return a._value=e,a}function cx(t,e){var n,i;function a(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&sx(t,s)),n}return a._value=e,a}function fx(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=os(t);return this.tween(n,(i.local?lx:cx)(i,e))}function hx(t,e){return function(){Cl(this,t).delay=+e.apply(this,arguments)}}function dx(t,e){return e=+e,function(){Cl(this,t).delay=e}}function gx(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hx:dx)(e,t)):Cn(this.node(),e).delay}function px(t,e){return function(){Vn(this,t).duration=+e.apply(this,arguments)}}function vx(t,e){return e=+e,function(){Vn(this,t).duration=e}}function mx(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?px:vx)(e,t)):Cn(this.node(),e).duration}function yx(t,e){if(typeof e!="function")throw new Error;return function(){Vn(this,t).ease=e}}function bx(t){var e=this._id;return arguments.length?this.each(yx(e,t)):Cn(this.node(),e).ease}function wx(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Vn(this,t).ease=n}}function xx(t){if(typeof t!="function")throw new Error;return this.each(wx(this._id,t))}function _x(t){typeof t!="function"&&(t=Uh(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var s=e[a],l=s.length,c=i[a]=[],h,d=0;d<l;++d)(h=s[d])&&t.call(h,h.__data__,d,s)&&c.push(h);return new lr(i,this._parents,this._name,this._id)}function Sx(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,s=Math.min(i,a),l=new Array(i),c=0;c<s;++c)for(var h=e[c],d=n[c],g=h.length,v=l[c]=new Array(g),p,b=0;b<g;++b)(p=h[b]||d[b])&&(v[b]=p);for(;c<i;++c)l[c]=e[c];return new lr(l,this._parents,this._name,this._id)}function Ex(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ox(t,e,n){var i,a,s=Ex(e)?Cl:Vn;return function(){var l=s(this,t),c=l.on;c!==i&&(a=(i=c).copy()).on(e,n),l.on=a}}function Dx(t,e){var n=this._id;return arguments.length<2?Cn(this.node(),n).on.on(t):this.each(Ox(n,t,e))}function Cx(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function kx(){return this.on("end.remove",Cx(this._id))}function Tx(t){var e=this._name,n=this._id;typeof t!="function"&&(t=gl(t));for(var i=this._groups,a=i.length,s=new Array(a),l=0;l<a;++l)for(var c=i[l],h=c.length,d=s[l]=new Array(h),g,v,p=0;p<h;++p)(g=c[p])&&(v=t.call(g,g.__data__,p,c))&&("__data__"in g&&(v.__data__=g.__data__),d[p]=v,bs(d[p],e,n,p,d,Cn(g,n)));return new lr(s,this._parents,e,n)}function Ax(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bh(t));for(var i=this._groups,a=i.length,s=[],l=[],c=0;c<a;++c)for(var h=i[c],d=h.length,g,v=0;v<d;++v)if(g=h[v]){for(var p=t.call(g,g.__data__,v,h),b,O=Cn(g,n),C=0,w=p.length;C<w;++C)(b=p[C])&&bs(b,e,n,C,p,O);s.push(p),l.push(g)}return new lr(s,l,e,n)}var Nx=Jo.prototype.constructor;function Rx(){return new Nx(this._groups,this._parents)}function $x(t,e){var n,i,a;return function(){var s=oo(this,t),l=(this.style.removeProperty(t),oo(this,t));return s===l?null:s===n&&l===i?a:a=e(n=s,i=l)}}function Cd(t){return function(){this.style.removeProperty(t)}}function Ix(t,e,n){var i,a=n+"",s;return function(){var l=oo(this,t);return l===a?null:l===i?s:s=e(i=l,n)}}function Px(t,e,n){var i,a,s;return function(){var l=oo(this,t),c=n(this),h=c+"";return c==null&&(h=c=(this.style.removeProperty(t),oo(this,t))),l===h?null:l===i&&h===a?s:(a=h,s=e(i=l,c))}}function jx(t,e){var n,i,a,s="style."+e,l="end."+s,c;return function(){var h=Vn(this,t),d=h.on,g=h.value[s]==null?c||(c=Cd(e)):void 0;(d!==n||a!==g)&&(i=(n=d).copy()).on(l,a=g),h.on=i}}function Lx(t,e,n){var i=(t+="")=="transform"?Lw:Dd;return e==null?this.styleTween(t,$x(t,i)).on("end.style."+t,Cd(t)):typeof e=="function"?this.styleTween(t,Px(t,i,kl(this,"style."+t,e))).each(jx(this._id,t)):this.styleTween(t,Ix(t,i,e),n).on("end.style."+t,null)}function Mx(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function zx(t,e,n){var i,a;function s(){var l=e.apply(this,arguments);return l!==a&&(i=(a=l)&&Mx(t,l,n)),i}return s._value=e,s}function Fx(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,zx(t,e,n!=null?n:""))}function Bx(t){return function(){this.textContent=t}}function Ux(t){return function(){var e=t(this);this.textContent=e!=null?e:""}}function Xx(t){return this.tween("text",typeof t=="function"?Ux(kl(this,"text",t)):Bx(t==null?"":t+""))}function Hx(t){return function(e){this.textContent=t.call(this,e)}}function Wx(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Hx(a)),e}return i._value=t,i}function Vx(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Wx(t))}function Yx(){for(var t=this._name,e=this._id,n=kd(),i=this._groups,a=i.length,s=0;s<a;++s)for(var l=i[s],c=l.length,h,d=0;d<c;++d)if(h=l[d]){var g=Cn(h,e);bs(h,t,n,d,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new lr(i,this._parents,t,n)}function qx(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(s,l){var c={value:l},h={value:function(){--a===0&&s()}};n.each(function(){var d=Vn(this,i),g=d.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(h)),d.on=e}),a===0&&s()})}var Kx=0;function lr(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function kd(){return++Kx}var cr=Jo.prototype;lr.prototype={constructor:lr,select:Tx,selectAll:Ax,selectChild:cr.selectChild,selectChildren:cr.selectChildren,filter:_x,merge:Sx,selection:Rx,transition:Yx,call:cr.call,nodes:cr.nodes,node:cr.node,size:cr.size,empty:cr.empty,each:cr.each,on:Dx,attr:ax,attrTween:fx,style:Lx,styleTween:Fx,text:Xx,textTween:Vx,remove:kx,tween:Zw,delay:gx,duration:mx,ease:bx,easeVarying:xx,end:qx,[Symbol.iterator]:cr[Symbol.iterator]};function Gx(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Jx={time:null,delay:0,duration:250,ease:Gx};function Qx(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Zx(t){var e,n;t instanceof lr?(e=t._id,t=t._name):(e=kd(),(n=Jx).time=Sl(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var l=i[s],c=l.length,h,d=0;d<c;++d)(h=l[d])&&bs(h,t,e,d,l,n||Qx(h,e));return new lr(i,this._parents,t,e)}Jo.prototype.interrupt=Gw,Jo.prototype.transition=Zx;const xs=t=>()=>t;function t_(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function fr(t,e,n){this.k=t,this.x=e,this.y=n}fr.prototype={constructor:fr,scale:function(t){return t===1?this:new fr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new fr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _s=new fr(1,0,0);ua.prototype=fr.prototype;function ua(t){for(;!t.__zoom;)if(!(t=t.parentNode))return _s;return t.__zoom}function Tl(t){t.stopImmediatePropagation()}function la(t){t.preventDefault(),t.stopImmediatePropagation()}function e_(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function n_(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Td(){return this.__zoom||_s}function r_(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function i_(){return navigator.maxTouchPoints||"ontouchstart"in this}function o_(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function a_(){var t=e_,e=n_,n=o_,i=r_,a=i_,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,h=Uw,d=rs("start","zoom","end"),g,v,p,b=500,O=150,C=0,w=10;function S(k){k.property("__zoom",Td).on("wheel.zoom",nt,{passive:!1}).on("mousedown.zoom",ct).on("dblclick.zoom",V).filter(a).on("touchstart.zoom",tt).on("touchmove.zoom",rt).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(k,j,R,B){var U=k.selection?k.selection():k;U.property("__zoom",Td),k!==U?L(k,j,R,B):U.interrupt().each(function(){I(this,arguments).event(B).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},S.scaleBy=function(k,j,R,B){S.scaleTo(k,function(){var U=this.__zoom.k,Q=typeof j=="function"?j.apply(this,arguments):j;return U*Q},R,B)},S.scaleTo=function(k,j,R,B){S.transform(k,function(){var U=e.apply(this,arguments),Q=this.__zoom,X=R==null?_(U):typeof R=="function"?R.apply(this,arguments):R,G=Q.invert(X),et=typeof j=="function"?j.apply(this,arguments):j;return n(A(P(Q,et),X,G),U,l)},R,B)},S.translateBy=function(k,j,R,B){S.transform(k,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof R=="function"?R.apply(this,arguments):R),e.apply(this,arguments),l)},null,B)},S.translateTo=function(k,j,R,B,U){S.transform(k,function(){var Q=e.apply(this,arguments),X=this.__zoom,G=B==null?_(Q):typeof B=="function"?B.apply(this,arguments):B;return n(_s.translate(G[0],G[1]).scale(X.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof R=="function"?-R.apply(this,arguments):-R),Q,l)},B,U)};function P(k,j){return j=Math.max(s[0],Math.min(s[1],j)),j===k.k?k:new fr(j,k.x,k.y)}function A(k,j,R){var B=j[0]-R[0]*k.k,U=j[1]-R[1]*k.k;return B===k.x&&U===k.y?k:new fr(k.k,B,U)}function _(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function L(k,j,R,B){k.on("start.zoom",function(){I(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(B).end()}).tween("zoom",function(){var U=this,Q=arguments,X=I(U,Q).event(B),G=e.apply(U,Q),et=R==null?_(G):typeof R=="function"?R.apply(U,Q):R,it=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),at=U.__zoom,ut=typeof j=="function"?j.apply(U,Q):j,wt=h(at.invert(et).concat(it/at.k),ut.invert(et).concat(it/ut.k));return function(yt){if(yt===1)yt=ut;else{var ht=wt(yt),bt=it/ht[2];yt=new fr(bt,et[0]-ht[0]*bt,et[1]-ht[1]*bt)}X.zoom(null,yt)}})}function I(k,j,R){return!R&&k.__zooming||new M(k,j)}function M(k,j){this.that=k,this.args=j,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,j),this.taps=0}M.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,j){return this.mouse&&k!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var j=be(this.that).datum();d.call(k,this.that,new t_(k,{sourceEvent:this.sourceEvent,target:S,type:k,transform:this.that.__zoom,dispatch:d}),j)}};function nt(k,...j){if(!t.apply(this,arguments))return;var R=I(this,j).event(k),B=this.__zoom,U=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,i.apply(this,arguments)))),Q=ur(k);if(R.wheel)(R.mouse[0][0]!==Q[0]||R.mouse[0][1]!==Q[1])&&(R.mouse[1]=B.invert(R.mouse[0]=Q)),clearTimeout(R.wheel);else{if(B.k===U)return;R.mouse=[Q,B.invert(Q)],ws(this),R.start()}la(k),R.wheel=setTimeout(X,O),R.zoom("mouse",n(A(P(B,U),R.mouse[0],R.mouse[1]),R.extent,l));function X(){R.wheel=null,R.end()}}function ct(k,...j){if(p||!t.apply(this,arguments))return;var R=k.currentTarget,B=I(this,j,!0).event(k),U=be(k.view).on("mousemove.zoom",et,!0).on("mouseup.zoom",it,!0),Q=ur(k,R),X=k.clientX,G=k.clientY;Qh(k.view),Tl(k),B.mouse=[Q,this.__zoom.invert(Q)],ws(this),B.start();function et(at){if(la(at),!B.moved){var ut=at.clientX-X,wt=at.clientY-G;B.moved=ut*ut+wt*wt>C}B.event(at).zoom("mouse",n(A(B.that.__zoom,B.mouse[0]=ur(at,R),B.mouse[1]),B.extent,l))}function it(at){U.on("mousemove.zoom mouseup.zoom",null),Zh(at.view,B.moved),la(at),B.event(at).end()}}function V(k,...j){if(t.apply(this,arguments)){var R=this.__zoom,B=ur(k.changedTouches?k.changedTouches[0]:k,this),U=R.invert(B),Q=R.k*(k.shiftKey?.5:2),X=n(A(P(R,Q),B,U),e.apply(this,j),l);la(k),c>0?be(this).transition().duration(c).call(L,X,B,k):be(this).call(S.transform,X,B,k)}}function tt(k,...j){if(t.apply(this,arguments)){var R=k.touches,B=R.length,U=I(this,j,k.changedTouches.length===B).event(k),Q,X,G,et;for(Tl(k),X=0;X<B;++X)G=R[X],et=ur(G,this),et=[et,this.__zoom.invert(et),G.identifier],U.touch0?!U.touch1&&U.touch0[2]!==et[2]&&(U.touch1=et,U.taps=0):(U.touch0=et,Q=!0,U.taps=1+!!g);g&&(g=clearTimeout(g)),Q&&(U.taps<2&&(v=et[0],g=setTimeout(function(){g=null},b)),ws(this),U.start())}}function rt(k,...j){if(this.__zooming){var R=I(this,j).event(k),B=k.changedTouches,U=B.length,Q,X,G,et;for(la(k),Q=0;Q<U;++Q)X=B[Q],G=ur(X,this),R.touch0&&R.touch0[2]===X.identifier?R.touch0[0]=G:R.touch1&&R.touch1[2]===X.identifier&&(R.touch1[0]=G);if(X=R.that.__zoom,R.touch1){var it=R.touch0[0],at=R.touch0[1],ut=R.touch1[0],wt=R.touch1[1],yt=(yt=ut[0]-it[0])*yt+(yt=ut[1]-it[1])*yt,ht=(ht=wt[0]-at[0])*ht+(ht=wt[1]-at[1])*ht;X=P(X,Math.sqrt(yt/ht)),G=[(it[0]+ut[0])/2,(it[1]+ut[1])/2],et=[(at[0]+wt[0])/2,(at[1]+wt[1])/2]}else if(R.touch0)G=R.touch0[0],et=R.touch0[1];else return;R.zoom("touch",n(A(X,G,et),R.extent,l))}}function K(k,...j){if(this.__zooming){var R=I(this,j).event(k),B=k.changedTouches,U=B.length,Q,X;for(Tl(k),p&&clearTimeout(p),p=setTimeout(function(){p=null},b),Q=0;Q<U;++Q)X=B[Q],R.touch0&&R.touch0[2]===X.identifier?delete R.touch0:R.touch1&&R.touch1[2]===X.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(X=ur(X,this),Math.hypot(v[0]-X[0],v[1]-X[1])<w)){var G=be(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return S.wheelDelta=function(k){return arguments.length?(i=typeof k=="function"?k:xs(+k),S):i},S.filter=function(k){return arguments.length?(t=typeof k=="function"?k:xs(!!k),S):t},S.touchable=function(k){return arguments.length?(a=typeof k=="function"?k:xs(!!k),S):a},S.extent=function(k){return arguments.length?(e=typeof k=="function"?k:xs([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),S):e},S.scaleExtent=function(k){return arguments.length?(s[0]=+k[0],s[1]=+k[1],S):[s[0],s[1]]},S.translateExtent=function(k){return arguments.length?(l[0][0]=+k[0][0],l[1][0]=+k[1][0],l[0][1]=+k[0][1],l[1][1]=+k[1][1],S):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},S.constrain=function(k){return arguments.length?(n=k,S):n},S.duration=function(k){return arguments.length?(c=+k,S):c},S.interpolate=function(k){return arguments.length?(h=k,S):h},S.on=function(){var k=d.on.apply(d,arguments);return k===d?S:k},S.clickDistance=function(k){return arguments.length?(C=(k=+k)*k,S):Math.sqrt(C)},S.tapDistance=function(k){return arguments.length?(w=+k,S):w},S}function Ss(t,e=0,n,i){var a;const s=document.fullscreenEnabled?{width:window.innerWidth,height:window.innerHeight}:((a=t==null?void 0:t.svgDOM)==null?void 0:a.getBoundingClientRect())||{width:0,height:0},l=t.svgZoomArea.node().getBBox(),c=.95,h=s.width*c/l.width,d=s.height*c/l.height,g=Math.min(h,d,1),v={x:s.width/2-g*(l.width/2+l.x),y:s.height/2-g*(l.height/2+l.y)},p=()=>_s.translate(v.x,v.y).scale(n||g);e>0?t.svg.transition().duration(e).call(t.zoom.transform,p).on("end",i):t.svg.call(t.zoom.transform,p)}function s_(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Ad={};function Al(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&Ad[e[0]]||(typeof e[0]=="string"&&(Ad[e[0]]=new Date),s_(...e))}const Nd=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function Rd(t,e,n){t.loadNamespaces(e,Nd(t,n))}function $d(t,e,n,i){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,Nd(t,i))}function u_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.languages[0],a=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const l=(c,h)=>{const d=e.services.backendConnector.state[`${c}|${h}`];return d===-1||d===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!l(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(i,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||l(i,t)&&(!a||l(s,t)))}function l_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Al("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!a(i.isLanguageChangingTo,t))return!1}}):u_(t,e,n)}const c_=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,f_={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},h_=t=>f_[t];let Nl={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:t=>t.replace(c_,h_)};function d_(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Nl=Z(Z({},Nl),t)}function g_(){return Nl}let Id;function p_(t){Id=t}function v_(){return Id}const m_={type:"3rdParty",init(t){d_(t.options.react),p_(t)}},y_=(0,E.createContext)();class b_{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const w_=(t,e)=>{const n=(0,E.useRef)();return(0,E.useEffect)(()=>{n.current=t},[t,e]),n.current};function Pd(t,e,n,i){return t.getFixedT(e,n,i)}function x_(t,e,n,i){return(0,E.useCallback)(Pd(t,e,n,i),[t,e,n,i])}function Ur(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:i,defaultNS:a}=(0,E.useContext)(y_)||{},s=n||i||v_();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new b_),!s){Al("You will need to pass in an i18next instance by using initReactI18next");const _=(I,M)=>typeof M=="string"?M:M&&typeof M=="object"&&typeof M.defaultValue=="string"?M.defaultValue:Array.isArray(I)?I[I.length-1]:I,L=[_,{},!1];return L.t=_,L.i18n={},L.ready=!1,L}s.options.react&&s.options.react.wait!==void 0&&Al("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l=Z(Z(Z({},g_()),s.options.react),e),{useSuspense:c,keyPrefix:h}=l;let d=a||s.options&&s.options.defaultNS;d=typeof d=="string"?[d]:d||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(d);const g=(s.isInitialized||s.initializedStoreOnce)&&d.every(_=>l_(_,s,l)),v=x_(s,e.lng||null,l.nsMode==="fallback"?d:d[0],h),p=()=>v,b=()=>Pd(s,e.lng||null,l.nsMode==="fallback"?d:d[0],h),[O,C]=(0,E.useState)(p);let w=d.join();e.lng&&(w=`${e.lng}${w}`);const S=w_(w),P=(0,E.useRef)(!0);(0,E.useEffect)(()=>{const{bindI18n:_,bindI18nStore:L}=l;P.current=!0,!g&&!c&&(e.lng?$d(s,e.lng,d,()=>{P.current&&C(b)}):Rd(s,d,()=>{P.current&&C(b)})),g&&S&&S!==w&&P.current&&C(b);function I(){P.current&&C(b)}return _&&s&&s.on(_,I),L&&s&&s.store.on(L,I),()=>{P.current=!1,_&&s&&_.split(" ").forEach(M=>s.off(M,I)),L&&s&&L.split(" ").forEach(M=>s.store.off(M,I))}},[s,w]),(0,E.useEffect)(()=>{P.current&&g&&C(p)},[s,h,g]);const A=[O,s,g];if(A.t=O,A.i18n=s,A.ready=g,g||!g&&!c)return A;throw new Promise(_=>{e.lng?$d(s,e.lng,d,()=>_()):Rd(s,d,()=>_())})}class __{constructor({keyCode:e,keydown:n,keyup:i,dom:a,canRepeat:s=!1}){_e(this,"element"),_e(this,"keys"),_e(this,"keydown"),_e(this,"keyup"),_e(this,"canRepeat"),this.element=a||document,this.keys=Array.isArray(e)?e:[e],this.keydown=n,this.keyup=i,this.canRepeat=s,this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.addEvent()}handleKeyDown(e){!this.canRepeat&&e.repeat||e.target instanceof HTMLElement&&e.target.tagName!=="TEXTAREA"&&e.target.tagName!=="INPUT"&&F.includes(this.keys,e.keyCode)&&this.keydown&&this.keydown(e)}handleKeyUp(e){F.includes(this.keys,e.keyCode)&&this.keyup&&this.keyup(e)}addEvent(){this.element&&(this.element.addEventListener("keydown",this.handleKeyDown),this.element.addEventListener("keyup",this.handleKeyUp))}removeEvent(){this.element&&(this.element.removeEventListener("keydown",this.handleKeyDown),this.element.removeEventListener("keyup",this.handleKeyUp))}}const S_=t=>{const l=t,{type:e,className:n,style:i,title:a}=l,s=jr(l,["type","className","style","title"]);return W.jsx("i",Z({title:a,style:i,className:le("iconfont",e,n)},s))};function E_(t){var e=t.children,n=t.prefixCls,i=t.id,a=t.overlayInnerStyle,s=t.className,l=t.style;return E.createElement("div",{className:le("".concat(n,"-content"),s),style:l},E.createElement("div",{className:"".concat(n,"-inner"),id:i,role:"tooltip",style:a},typeof e=="function"?e():e))}function Si(){return Si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Si.apply(this,arguments)}function O_(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Es(t,e){if(t==null)return{};var n=O_(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function D_(t){if(Array.isArray(t))return t}function C_(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,l,c=[],h=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(i=s.call(n)).done)&&(c.push(i.value),c.length!==e);h=!0);}catch(g){d=!0,a=g}finally{try{if(!h&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return c}}function Rl(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function jd(t,e){if(t){if(typeof t=="string")return Rl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rl(t,e)}}function k_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(t,e){return D_(t)||C_(t,e)||jd(t,e)||k_()}function hr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var $l={},T_=[],A_=function(t){T_.push(t)};function N_(t,e){if(!1)var n}function R_(t,e){if(!1)var n}function $_(){$l={}}function Ld(t,e,n){!e&&!$l[n]&&(t(!1,n),$l[n]=!0)}function Il(t,e){Ld(N_,t,e)}function I_(t,e){Ld(R_,t,e)}Il.preMessage=A_,Il.resetWarned=$_,Il.noteOnce=I_;var Md={exports:{}},zt={};var zd;function P_(){if(zd)return zt;zd=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),O;O=Symbol.for("react.module.reference");function C(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case t:switch(w=w.type,w){case n:case a:case i:case d:case g:return w;default:switch(w=w&&w.$$typeof,w){case c:case l:case h:case p:case v:case s:return w;default:return S}}case e:return S}}}return zt.ContextConsumer=l,zt.ContextProvider=s,zt.Element=t,zt.ForwardRef=h,zt.Fragment=n,zt.Lazy=p,zt.Memo=v,zt.Portal=e,zt.Profiler=a,zt.StrictMode=i,zt.Suspense=d,zt.SuspenseList=g,zt.isAsyncMode=function(){return!1},zt.isConcurrentMode=function(){return!1},zt.isContextConsumer=function(w){return C(w)===l},zt.isContextProvider=function(w){return C(w)===s},zt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},zt.isForwardRef=function(w){return C(w)===h},zt.isFragment=function(w){return C(w)===n},zt.isLazy=function(w){return C(w)===p},zt.isMemo=function(w){return C(w)===v},zt.isPortal=function(w){return C(w)===e},zt.isProfiler=function(w){return C(w)===a},zt.isStrictMode=function(w){return C(w)===i},zt.isSuspense=function(w){return C(w)===d},zt.isSuspenseList=function(w){return C(w)===g},zt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===a||w===i||w===d||w===g||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===v||w.$$typeof===s||w.$$typeof===l||w.$$typeof===h||w.$$typeof===O||w.getModuleId!==void 0)},zt.typeOf=C,zt}var j_={};var Fd;function QA(){return Fd||(Fd=1),j_}Md.exports=P_();var Os=Md.exports;function L_(t,e,n){var i=E.useRef({});return(!("value"in i.current)||n(i.current.condition,e))&&(i.current.value=t(),i.current.condition=e),i.current.value}function Pl(t,e){typeof t=="function"?t(e):Sn(t)==="object"&&t&&"current"in t&&(t.current=e)}function Bd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.filter(function(a){return a});return i.length<=1?i[0]:function(a){e.forEach(function(s){Pl(s,a)})}}function jl(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return L_(function(){return Bd.apply(void 0,e)},e,function(i,a){return i.length!==a.length||i.every(function(s,l){return s!==a[l]})})}function Ds(t){var e,n,i=Os.isMemo(t)?t.type.type:t.type;return!(typeof i=="function"&&!((e=i.prototype)!==null&&e!==void 0&&e.render)&&i.$$typeof!==Os.ForwardRef||typeof t=="function"&&!((n=t.prototype)!==null&&n!==void 0&&n.render)&&t.$$typeof!==Os.ForwardRef)}var Ud=E.createContext(null);function M_(t){if(Array.isArray(t))return Rl(t)}function z_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ll(t){return M_(t)||z_(t)||jd(t)||F_()}var Xd=hr()?E.useLayoutEffect:E.useEffect,Qe=function(t,e){var n=E.useRef(!0);Xd(function(){return t(n.current)},e),Xd(function(){return n.current=!1,function(){n.current=!0}},[])},Hd=[];function B_(t,e){var n=E.useState(function(){if(!hr())return null;var O=document.createElement("div");return O}),i=Pt(n,1),a=i[0],s=E.useRef(!1),l=E.useContext(Ud),c=E.useState(Hd),h=Pt(c,2),d=h[0],g=h[1],v=l||(s.current?void 0:function(O){g(function(C){var w=[O].concat(Ll(C));return w})});function p(){a.parentElement||document.body.appendChild(a),s.current=!0}function b(){var O;(O=a.parentElement)===null||O===void 0||O.removeChild(a),s.current=!1}return Qe(function(){return t?l?l(p):p():b(),b},[t]),Qe(function(){d.length&&(d.forEach(function(O){return O()}),g(Hd))},[d]),[a,v]}function U_(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var Wd="data-rc-order",Vd="data-rc-priority",X_="rc-util-key",Ml=new Map;function Yd(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):X_}function Cs(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function H_(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function zl(t){return Array.from((Ml.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function qd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hr())return null;var n=e.csp,i=e.prepend,a=e.priority,s=a===void 0?0:a,l=H_(i),c=l==="prependQueue",h=document.createElement("style");h.setAttribute(Wd,l),c&&s&&h.setAttribute(Vd,"".concat(s)),n!=null&&n.nonce&&(h.nonce=n==null?void 0:n.nonce),h.innerHTML=t;var d=Cs(e),g=d.firstChild;if(i){if(c){var v=(e.styles||zl(d)).filter(function(p){if(!["prepend","prependQueue"].includes(p.getAttribute(Wd)))return!1;var b=Number(p.getAttribute(Vd)||0);return s>=b});if(v.length)return d.insertBefore(h,v[v.length-1].nextSibling),h}d.insertBefore(h,g)}else d.appendChild(h);return h}function Kd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Cs(e);return(e.styles||zl(n)).find(function(i){return i.getAttribute(Yd(e))===t})}function Fl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Kd(t,e);if(n){var i=Cs(e);i.removeChild(n)}}function W_(t,e){var n=Ml.get(t);if(!n||!U_(document,n)){var i=qd("",e),a=i.parentNode;Ml.set(t,a),t.removeChild(i)}}function Gd(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Cs(n),a=zl(i),s=xt(xt({},n),{},{styles:a});W_(i,s);var l=Kd(e,s);if(l){var c,h;if((c=s.csp)!==null&&c!==void 0&&c.nonce&&l.nonce!==((h=s.csp)===null||h===void 0?void 0:h.nonce)){var d;l.nonce=(d=s.csp)===null||d===void 0?void 0:d.nonce}return l.innerHTML!==t&&(l.innerHTML=t),l}var g=qd(t,s);return g.setAttribute(Yd(s),e),g}function V_(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var i=n.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var a,s;if(t){var l=getComputedStyle(t);i.scrollbarColor=l.scrollbarColor,i.scrollbarWidth=l.scrollbarWidth;var c=getComputedStyle(t,"::-webkit-scrollbar"),h=parseInt(c.width,10),d=parseInt(c.height,10);try{var g=h?"width: ".concat(c.width,";"):"",v=d?"height: ".concat(c.height,";"):"";Gd(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(g,`
`).concat(v,`
}`),e)}catch(O){console.error(O),a=h,s=d}}document.body.appendChild(n);var p=t&&a&&!isNaN(a)?a:n.offsetWidth-n.clientWidth,b=t&&s&&!isNaN(s)?s:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),Fl(e),{width:p,height:b}}function Y_(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:V_(t)}function q_(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var K_="rc-util-locker-".concat(Date.now()),Jd=0;function G_(t){var e=!!t,n=E.useState(function(){return Jd+=1,"".concat(K_,"_").concat(Jd)}),i=Pt(n,1),a=i[0];Qe(function(){if(e){var s=Y_(document.body).width,l=q_();Gd(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(s,"px);"):"",`
}`),a)}else Fl(a);return function(){Fl(a)}},[e,a])}var J_=!1;function Q_(t){return J_}var Qd=function(t){return t===!1?!1:!hr()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},Zd=E.forwardRef(function(t,e){var n=t.open,i=t.autoLock,a=t.getContainer,s=t.debug,l=t.autoDestroy,c=l===void 0?!0:l,h=t.children,d=E.useState(n),g=Pt(d,2),v=g[0],p=g[1],b=v||n;E.useEffect(function(){(c||n)&&p(n)},[n,c]);var O=E.useState(function(){return Qd(a)}),C=Pt(O,2),w=C[0],S=C[1];E.useEffect(function(){var rt=Qd(a);S(rt!=null?rt:null)});var P=B_(b&&!w,s),A=Pt(P,2),_=A[0],L=A[1],I=w!=null?w:_;G_(i&&n&&hr()&&(I===_||I===document.body));var M=null;if(h&&Ds(h)&&e){var nt=h;M=nt.ref}var ct=jl(M,e);if(!b||!hr()||w===void 0)return null;var V=I===!1||Q_(),tt=h;return e&&(tt=E.cloneElement(h,{ref:ct})),E.createElement(Ud.Provider,{value:L},V?tt:(0,Lr.createPortal)(tt,I))});function Bl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return E.Children.forEach(t,function(i){i==null&&!e.keepEmpty||(Array.isArray(i)?n=n.concat(Bl(i)):Os.isFragment(i)&&i.props?n=n.concat(Bl(i.props.children,e)):n.push(i))}),n}function ks(t){return t instanceof HTMLElement||t instanceof SVGElement}function Ts(t){return ks(t)?t:t instanceof E.Component?Lr.findDOMNode(t):null}var Ul=E.createContext(null);function Z_(t){var e=t.children,n=t.onBatchResize,i=E.useRef(0),a=E.useRef([]),s=E.useContext(Ul),l=E.useCallback(function(c,h,d){i.current+=1;var g=i.current;a.current.push({size:c,element:h,data:d}),Promise.resolve().then(function(){g===i.current&&(n==null||n(a.current),a.current=[])}),s==null||s(c,h,d)},[n,s]);return E.createElement(Ul.Provider,{value:l},e)}var Xr=new Map;function tS(t){t.forEach(function(e){var n,i=e.target;(n=Xr.get(i))===null||n===void 0||n.forEach(function(a){return a(i)})})}var tg=new Ph(tS);function eS(t,e){Xr.has(t)||(Xr.set(t,new Set),tg.observe(t)),Xr.get(t).add(e)}function nS(t,e){Xr.has(t)&&(Xr.get(t).delete(e),Xr.get(t).size||(tg.unobserve(t),Xr.delete(t)))}function Xl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eg(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wf(i.key),i)}}function Hl(t,e,n){return e&&eg(t.prototype,e),n&&eg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wl(t,e){return Wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Wl(t,e)}function Vl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wl(t,e)}function As(t){return As=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},As(t)}function ng(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ng=function(){return!!t})()}function Yl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rS(t,e){if(e&&(Sn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yl(t)}function ql(t){var e=ng();return function(){var n=As(t),i;if(e){var a=As(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return rS(this,i)}}var iS=function(t){Vl(n,t);var e=ql(n);function n(){return Xl(this,n),e.apply(this,arguments)}return Hl(n,[{key:"render",value:function(){return this.props.children}}]),n}(E.Component);function oS(t,e){var n=t.children,i=t.disabled,a=E.useRef(null),s=E.useRef(null),l=E.useContext(Ul),c=typeof n=="function",h=c?n(a):n,d=E.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),g=!c&&E.isValidElement(h)&&Ds(h),v=g?h.ref:null,p=jl(v,a),b=function(){var w;return Ts(a.current)||(a.current&&Sn(a.current)==="object"?Ts((w=a.current)===null||w===void 0?void 0:w.nativeElement):null)||Ts(s.current)};E.useImperativeHandle(e,function(){return b()});var O=E.useRef(t);O.current=t;var C=E.useCallback(function(w){var S=O.current,P=S.onResize,A=S.data,_=w.getBoundingClientRect(),L=_.width,I=_.height,M=w.offsetWidth,nt=w.offsetHeight,ct=Math.floor(L),V=Math.floor(I);if(d.current.width!==ct||d.current.height!==V||d.current.offsetWidth!==M||d.current.offsetHeight!==nt){var tt={width:ct,height:V,offsetWidth:M,offsetHeight:nt};d.current=tt;var rt=M===Math.round(L)?L:M,K=nt===Math.round(I)?I:nt,k=xt(xt({},tt),{},{offsetWidth:rt,offsetHeight:K});l==null||l(k,w,A),P&&Promise.resolve().then(function(){P(k,w)})}},[]);return E.useEffect(function(){var w=b();return w&&!i&&eS(w,C),function(){return nS(w,C)}},[a.current,i]),E.createElement(iS,{ref:s},g?E.cloneElement(h,{ref:p}):h)}var aS=E.forwardRef(oS),sS="rc-observer-key";function uS(t,e){var n=t.children,i=typeof n=="function"?[n]:Bl(n);return i.map(function(a,s){var l=(a==null?void 0:a.key)||"".concat(sS,"-").concat(s);return E.createElement(aS,Si({},t,{key:l,ref:s===0?e:void 0}),a)})}var Kl=E.forwardRef(uS);Kl.Collection=Z_;function rg(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function lS(t){return rg(t)instanceof ShadowRoot}function Gl(t){return lS(t)?rg(t):null}function Ei(t){var e=E.useRef();e.current=t;var n=E.useCallback(function(){for(var i,a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(s))},[]);return n}function cS(){var t=xt({},zn);return t.useId}var ig=0,og=cS();const fS=og?function(t){var e=og();return t||e}:function(t){var e=E.useState("ssr-id"),n=Pt(e,2),i=n[0],a=n[1];return E.useEffect(function(){var s=ig;ig+=1,a("rc_unique_".concat(s))},[]),t||i},hS=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var dS=E.createContext({}),gS=function(t){Vl(n,t);var e=ql(n);function n(){return Xl(this,n),e.apply(this,arguments)}return Hl(n,[{key:"render",value:function(){return this.props.children}}]),n}(E.Component);function Ns(t){var e=E.useRef(!1),n=E.useState(t),i=Pt(n,2),a=i[0],s=i[1];E.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function l(c,h){h&&e.current||s(c)}return[a,l]}var Oi="none",Rs="appear",$s="enter",Is="leave",ag="none",kn="prepare",lo="start",co="active",Jl="end",sg="prepared";function ug(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function pS(t,e){var n={animationend:ug("Animation","AnimationEnd"),transitionend:ug("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var vS=pS(hr(),typeof window<"u"?window:{}),lg={};if(hr()){var mS=document.createElement("div");lg=mS.style}var Ps={};function cg(t){if(Ps[t])return Ps[t];var e=vS[t];if(e)for(var n=Object.keys(e),i=n.length,a=0;a<i;a+=1){var s=n[a];if(Object.prototype.hasOwnProperty.call(e,s)&&s in lg)return Ps[t]=e[s],Ps[t]}return""}var fg=cg("animationend"),hg=cg("transitionend"),dg=!!(fg&&hg),gg=fg||"animationend",pg=hg||"transitionend";function vg(t,e){if(!t)return null;if(Sn(t)==="object"){var n=e.replace(/-\w/g,function(i){return i[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const yS=function(t){var e=(0,E.useRef)(),n=(0,E.useRef)(t);n.current=t;var i=E.useCallback(function(l){n.current(l)},[]);function a(l){l&&(l.removeEventListener(pg,i),l.removeEventListener(gg,i))}function s(l){e.current&&e.current!==l&&a(e.current),l&&l!==e.current&&(l.addEventListener(pg,i),l.addEventListener(gg,i),e.current=l)}return E.useEffect(function(){return function(){a(e.current)}},[]),[s,a]};var mg=hr()?E.useLayoutEffect:E.useEffect,yg=function(t){return+setTimeout(t,16)},bg=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(yg=function(t){return window.requestAnimationFrame(t)},bg=function(t){return window.cancelAnimationFrame(t)});var wg=0,Ql=new Map;function xg(t){Ql.delete(t)}var Zl=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;wg+=1;var n=wg;function i(a){if(a===0)xg(n),t();else{var s=yg(function(){i(a-1)});Ql.set(n,s)}}return i(e),n};Zl.cancel=function(t){var e=Ql.get(t);return xg(t),bg(e)};const bS=function(){var t=E.useRef(null);function e(){Zl.cancel(t.current)}function n(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Zl(function(){a<=1?i({isCanceled:function(){return s!==t.current}}):n(i,a-1)});t.current=s}return E.useEffect(function(){return function(){e()}},[]),[n,e]};var wS=[kn,lo,co,Jl],xS=[kn,sg],_g=!1,_S=!0;function Sg(t){return t===co||t===Jl}const SS=function(t,e,n){var i=Ns(ag),a=Pt(i,2),s=a[0],l=a[1],c=bS(),h=Pt(c,2),d=h[0],g=h[1];function v(){l(kn,!0)}var p=e?xS:wS;return mg(function(){if(s!==ag&&s!==Jl){var b=p.indexOf(s),O=p[b+1],C=n(s);C===_g?l(O,!0):O&&d(function(w){function S(){w.isCanceled()||l(O,!0)}C===!0?S():Promise.resolve(C).then(S)})}},[t,s]),E.useEffect(function(){return function(){g()}},[]),[v,s]};function ES(t,e,n,i){var a=i.motionEnter,s=a===void 0?!0:a,l=i.motionAppear,c=l===void 0?!0:l,h=i.motionLeave,d=h===void 0?!0:h,g=i.motionDeadline,v=i.motionLeaveImmediately,p=i.onAppearPrepare,b=i.onEnterPrepare,O=i.onLeavePrepare,C=i.onAppearStart,w=i.onEnterStart,S=i.onLeaveStart,P=i.onAppearActive,A=i.onEnterActive,_=i.onLeaveActive,L=i.onAppearEnd,I=i.onEnterEnd,M=i.onLeaveEnd,nt=i.onVisibleChanged,ct=Ns(),V=Pt(ct,2),tt=V[0],rt=V[1],K=Ns(Oi),k=Pt(K,2),j=k[0],R=k[1],B=Ns(null),U=Pt(B,2),Q=U[0],X=U[1],G=(0,E.useRef)(!1),et=(0,E.useRef)(null);function it(){return n()}var at=(0,E.useRef)(!1);function ut(){R(Oi,!0),X(null,!0)}function wt(_t){var It=it();if(!(_t&&!_t.deadline&&_t.target!==It)){var kt=at.current,ae;j===Rs&&kt?ae=L==null?void 0:L(It,_t):j===$s&&kt?ae=I==null?void 0:I(It,_t):j===Is&&kt&&(ae=M==null?void 0:M(It,_t)),j!==Oi&&kt&&ae!==!1&&ut()}}var yt=yS(wt),ht=Pt(yt,1),bt=ht[0],fe=function(_t){var It,kt,ae;switch(_t){case Rs:return It={},ke(It,kn,p),ke(It,lo,C),ke(It,co,P),It;case $s:return kt={},ke(kt,kn,b),ke(kt,lo,w),ke(kt,co,A),kt;case Is:return ae={},ke(ae,kn,O),ke(ae,lo,S),ke(ae,co,_),ae;default:return{}}},Jt=E.useMemo(function(){return fe(j)},[j]),Te=SS(j,!t,function(_t){if(_t===kn){var It=Jt[kn];return It?It(it()):_g}if(re in Jt){var kt;X(((kt=Jt[re])===null||kt===void 0?void 0:kt.call(Jt,it(),null))||null)}return re===co&&(bt(it()),g>0&&(clearTimeout(et.current),et.current=setTimeout(function(){wt({deadline:!0})},g))),re===sg&&ut(),_S}),Ze=Pt(Te,2),jt=Ze[0],re=Ze[1],Be=Sg(re);at.current=Be,mg(function(){rt(e);var _t=G.current;G.current=!0;var It;!_t&&e&&c&&(It=Rs),_t&&e&&s&&(It=$s),(_t&&!e&&d||!_t&&v&&!e&&d)&&(It=Is);var kt=fe(It);It&&(t||kt[kn])?(R(It),jt()):R(Oi)},[e]),(0,E.useEffect)(function(){(j===Rs&&!c||j===$s&&!s||j===Is&&!d)&&R(Oi)},[c,s,d]),(0,E.useEffect)(function(){return function(){G.current=!1,clearTimeout(et.current)}},[]);var Ht=E.useRef(!1);(0,E.useEffect)(function(){tt&&(Ht.current=!0),tt!==void 0&&j===Oi&&((Ht.current||tt)&&(nt==null||nt(tt)),Ht.current=!0)},[tt,j]);var fn=Q;return Jt[kn]&&re===lo&&(fn=xt({transition:"none"},fn)),[j,re,fn,tt!=null?tt:e]}function OS(t){var e=t;Sn(t)==="object"&&(e=t.transitionSupport);function n(a,s){return!!(a.motionName&&e&&s!==!1)}var i=E.forwardRef(function(a,s){var l=a.visible,c=l===void 0?!0:l,h=a.removeOnLeave,d=h===void 0?!0:h,g=a.forceRender,v=a.children,p=a.motionName,b=a.leavedClassName,O=a.eventProps,C=E.useContext(dS),w=C.motion,S=n(a,w),P=(0,E.useRef)(),A=(0,E.useRef)();function _(){try{return P.current instanceof HTMLElement?P.current:Ts(A.current)}catch(X){return null}}var L=ES(S,c,_,a),I=Pt(L,4),M=I[0],nt=I[1],ct=I[2],V=I[3],tt=E.useRef(V);V&&(tt.current=!0);var rt=E.useCallback(function(X){P.current=X,Pl(s,X)},[s]),K,k=xt(xt({},O),{},{visible:c});if(!v)K=null;else if(M===Oi)V?K=v(xt({},k),rt):!d&&tt.current&&b?K=v(xt(xt({},k),{},{className:b}),rt):g||!d&&!b?K=v(xt(xt({},k),{},{style:{display:"none"}}),rt):K=null;else{var j,R;nt===kn?R="prepare":Sg(nt)?R="active":nt===lo&&(R="start");var B=vg(p,"".concat(M,"-").concat(R));K=v(xt(xt({},k),{},{className:le(vg(p,M),(j={},ke(j,B,B&&R),ke(j,p,typeof p=="string"),j)),style:ct}),rt)}if(E.isValidElement(K)&&Ds(K)){var U=K,Q=U.ref;Q||(K=E.cloneElement(K,{ref:rt}))}return E.createElement(gS,{ref:A},K)});return i.displayName="CSSMotion",i}const tc=OS(dg);var ec="add",nc="keep",rc="remove",ic="removed";function DS(t){var e;return t&&Sn(t)==="object"&&"key"in t?e=t:e={key:t},xt(xt({},e),{},{key:String(e.key)})}function oc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(DS)}function CS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],i=0,a=e.length,s=oc(t),l=oc(e);s.forEach(function(d){for(var g=!1,v=i;v<a;v+=1){var p=l[v];if(p.key===d.key){i<v&&(n=n.concat(l.slice(i,v).map(function(b){return xt(xt({},b),{},{status:ec})})),i=v),n.push(xt(xt({},p),{},{status:nc})),i+=1,g=!0;break}}g||n.push(xt(xt({},d),{},{status:rc}))}),i<a&&(n=n.concat(l.slice(i).map(function(d){return xt(xt({},d),{},{status:ec})})));var c={};n.forEach(function(d){var g=d.key;c[g]=(c[g]||0)+1});var h=Object.keys(c).filter(function(d){return c[d]>1});return h.forEach(function(d){n=n.filter(function(g){var v=g.key,p=g.status;return v!==d||p!==rc}),n.forEach(function(g){g.key===d&&(g.status=nc)})}),n}var kS=["component","children","onVisibleChanged","onAllRemoved"],TS=["status"],AS=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function NS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tc,n=function(i){Vl(s,i);var a=ql(s);function s(){var l;Xl(this,s);for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return l=a.call.apply(a,[this].concat(h)),ke(Yl(l),"state",{keyEntities:[]}),ke(Yl(l),"removeKey",function(g){var v=l.state.keyEntities,p=v.map(function(b){return b.key!==g?b:xt(xt({},b),{},{status:ic})});return l.setState({keyEntities:p}),p.filter(function(b){var O=b.status;return O!==ic}).length}),l}return Hl(s,[{key:"render",value:function(){var l=this,c=this.state.keyEntities,h=this.props,d=h.component,g=h.children,v=h.onVisibleChanged,p=h.onAllRemoved,b=Es(h,kS),O=d||E.Fragment,C={};return AS.forEach(function(w){C[w]=b[w],delete b[w]}),delete b.keys,E.createElement(O,b,c.map(function(w,S){var P=w.status,A=Es(w,TS),_=P===ec||P===nc;return E.createElement(e,Si({},C,{key:A.key,visible:_,eventProps:A,onVisibleChanged:function(L){if(v==null||v(L,{key:A.key}),!L){var I=l.removeKey(A.key);I===0&&p&&p()}}}),function(L,I){return g(xt(xt({},L),{},{index:S}),I)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,c){var h=l.keys,d=c.keyEntities,g=oc(h),v=CS(d,g);return{keyEntities:v.filter(function(p){var b=d.find(function(O){var C=O.key;return p.key===C});return!(b&&b.status===ic&&p.status===rc)})}}}]),s}(E.Component);return ke(n,"defaultProps",{component:"div"}),n}NS(dg);function RS(t){var e=t.prefixCls,n=t.align,i=t.arrow,a=t.arrowPos,s=i||{},l=s.className,c=s.content,h=a.x,d=h===void 0?0:h,g=a.y,v=g===void 0?0:g,p=E.useRef();if(!n||!n.points)return null;var b={position:"absolute"};if(n.autoArrow!==!1){var O=n.points[0],C=n.points[1],w=O[0],S=O[1],P=C[0],A=C[1];w===P||!["t","b"].includes(w)?b.top=v:w==="t"?b.top=0:b.bottom=0,S===A||!["l","r"].includes(S)?b.left=d:S==="l"?b.left=0:b.right=0}return E.createElement("div",{ref:p,className:le("".concat(e,"-arrow"),l),style:b},c)}function $S(t){var e=t.prefixCls,n=t.open,i=t.zIndex,a=t.mask,s=t.motion;return a?E.createElement(tc,Si({},s,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(l){var c=l.className;return E.createElement("div",{style:{zIndex:i},className:le("".concat(e,"-mask"),c)})}):null}var IS=E.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),PS=E.forwardRef(function(t,e){var n=t.popup,i=t.className,a=t.prefixCls,s=t.style,l=t.target,c=t.onVisibleChanged,h=t.open,d=t.keepDom,g=t.fresh,v=t.onClick,p=t.mask,b=t.arrow,O=t.arrowPos,C=t.align,w=t.motion,S=t.maskMotion,P=t.forceRender,A=t.getPopupContainer,_=t.autoDestroy,L=t.portal,I=t.zIndex,M=t.onMouseEnter,nt=t.onMouseLeave,ct=t.onPointerEnter,V=t.ready,tt=t.offsetX,rt=t.offsetY,K=t.offsetR,k=t.offsetB,j=t.onAlign,R=t.onPrepare,B=t.stretch,U=t.targetWidth,Q=t.targetHeight,X=typeof n=="function"?n():n,G=h||d,et=(A==null?void 0:A.length)>0,it=E.useState(!A||!et),at=Pt(it,2),ut=at[0],wt=at[1];if(Qe(function(){!ut&&et&&l&&wt(!0)},[ut,et,l]),!ut)return null;var yt="auto",ht={left:"-1000vw",top:"-1000vh",right:yt,bottom:yt};if(V||!h){var bt,fe=C.points,Jt=C.dynamicInset||((bt=C._experimental)===null||bt===void 0?void 0:bt.dynamicInset),Te=Jt&&fe[0][1]==="r",Ze=Jt&&fe[0][0]==="b";Te?(ht.right=K,ht.left=yt):(ht.left=tt,ht.right=yt),Ze?(ht.bottom=k,ht.top=yt):(ht.top=rt,ht.bottom=yt)}var jt={};return B&&(B.includes("height")&&Q?jt.height=Q:B.includes("minHeight")&&Q&&(jt.minHeight=Q),B.includes("width")&&U?jt.width=U:B.includes("minWidth")&&U&&(jt.minWidth=U)),h||(jt.pointerEvents="none"),E.createElement(L,{open:P||G,getContainer:A&&function(){return A(l)},autoDestroy:_},E.createElement($S,{prefixCls:a,open:h,zIndex:I,mask:p,motion:S}),E.createElement(Kl,{onResize:j,disabled:!h},function(re){return E.createElement(tc,Si({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:P,leavedClassName:"".concat(a,"-hidden")},w,{onAppearPrepare:R,onEnterPrepare:R,visible:h,onVisibleChanged:function(Be){var Ht;w==null||(Ht=w.onVisibleChanged)===null||Ht===void 0||Ht.call(w,Be),c(Be)}}),function(Be,Ht){var fn=Be.className,_t=Be.style,It=le(a,fn,i);return E.createElement("div",{ref:Bd(re,e,Ht),className:It,style:xt(xt(xt(xt({"--arrow-x":"".concat(O.x||0,"px"),"--arrow-y":"".concat(O.y||0,"px")},ht),jt),_t),{},{boxSizing:"border-box",zIndex:I},s),onMouseEnter:M,onMouseLeave:nt,onPointerEnter:ct,onClick:v},b&&E.createElement(RS,{prefixCls:a,arrow:b,arrowPos:O,align:C}),E.createElement(IS,{cache:!h&&!g},X))})}))}),jS=E.forwardRef(function(t,e){var n=t.children,i=t.getTriggerDOMNode,a=Ds(n),s=E.useCallback(function(c){Pl(e,i?i(c):c)},[i]),l=jl(s,n.ref);return a?E.cloneElement(n,{ref:l}):n}),Eg=E.createContext(null);function Og(t){return t?Array.isArray(t)?t:[t]:[]}function LS(t,e,n,i){return E.useMemo(function(){var a=Og(n!=null?n:e),s=Og(i!=null?i:e),l=new Set(a),c=new Set(s);return t&&(l.has("hover")&&(l.delete("hover"),l.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[l,c]},[t,e,n,i])}const MS=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,i=e.height;if(n||i)return!0}if(t.getBoundingClientRect){var a=t.getBoundingClientRect(),s=a.width,l=a.height;if(s||l)return!0}}return!1};function zS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function FS(t,e,n,i){for(var a=n.points,s=Object.keys(t),l=0;l<s.length;l+=1){var c,h=s[l];if(zS((c=t[h])===null||c===void 0?void 0:c.points,a,i))return"".concat(e,"-placement-").concat(h)}return""}function Dg(t,e,n,i){return e||(n?{motionName:"".concat(t,"-").concat(n)}:i?{motionName:i}:null)}function ca(t){return t.ownerDocument.defaultView}function ac(t){for(var e=[],n=t==null?void 0:t.parentElement,i=["hidden","scroll","clip","auto"];n;){var a=ca(n).getComputedStyle(n),s=a.overflowX,l=a.overflowY,c=a.overflow;[s,l,c].some(function(h){return i.includes(h)})&&e.push(n),n=n.parentElement}return e}function fa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function ha(t){return fa(parseFloat(t),0)}function Cg(t,e){var n=xt({},t);return(e||[]).forEach(function(i){if(!(i instanceof HTMLBodyElement||i instanceof HTMLHtmlElement)){var a=ca(i).getComputedStyle(i),s=a.overflow,l=a.overflowClipMargin,c=a.borderTopWidth,h=a.borderBottomWidth,d=a.borderLeftWidth,g=a.borderRightWidth,v=i.getBoundingClientRect(),p=i.offsetHeight,b=i.clientHeight,O=i.offsetWidth,C=i.clientWidth,w=ha(c),S=ha(h),P=ha(d),A=ha(g),_=fa(Math.round(v.width/O*1e3)/1e3),L=fa(Math.round(v.height/p*1e3)/1e3),I=(O-C-P-A)*_,M=(p-b-w-S)*L,nt=w*L,ct=S*L,V=P*_,tt=A*_,rt=0,K=0;if(s==="clip"){var k=ha(l);rt=k*_,K=k*L}var j=v.x+V-rt,R=v.y+nt-K,B=j+v.width+2*rt-V-tt-I,U=R+v.height+2*K-nt-ct-M;n.left=Math.max(n.left,j),n.top=Math.max(n.top,R),n.right=Math.min(n.right,B),n.bottom=Math.min(n.bottom,U)}}),n}function kg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(e),i=n.match(/^(.*)\%$/);return i?t*(parseFloat(i[1])/100):parseFloat(n)}function Tg(t,e){var n=e||[],i=Pt(n,2),a=i[0],s=i[1];return[kg(t.width,a),kg(t.height,s)]}function Ag(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function fo(t,e){var n=e[0],i=e[1],a,s;return n==="t"?s=t.y:n==="b"?s=t.y+t.height:s=t.y+t.height/2,i==="l"?a=t.x:i==="r"?a=t.x+t.width:a=t.x+t.width/2,{x:a,y:s}}function Hr(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map(function(i,a){return a===e?n[i]||"c":i}).join("")}function BS(t,e,n,i,a,s,l){var c=E.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[i]||{}}),h=Pt(c,2),d=h[0],g=h[1],v=E.useRef(0),p=E.useMemo(function(){return e?ac(e):[]},[e]),b=E.useRef({}),O=function(){b.current={}};t||O();var C=Ei(function(){if(e&&n&&t){let de=function(rr,ir){var Or=arguments.length>2&&arguments[2]!==void 0?arguments[2]:It,Ui=X.x+rr,Dr=X.y+ir,Xi=Ui+bt,Hi=Dr+ht,To=Math.max(Ui,Or.left),ya=Math.max(Dr,Or.top),Ao=Math.min(Xi,Or.right),ba=Math.min(Hi,Or.bottom);return Math.max(0,(Ao-To)*(ba-ya))},Bi=function(){br=X.y+Zt,wr=br+ht,Nn=X.x+ie,xr=Nn+bt};var P,A,_=e,L=_.ownerDocument,I=ca(_),M=I.getComputedStyle(_),nt=M.width,ct=M.height,V=M.position,tt=_.style.left,rt=_.style.top,K=_.style.right,k=_.style.bottom,j=_.style.overflow,R=xt(xt({},a[i]),s),B=L.createElement("div");(P=_.parentElement)===null||P===void 0||P.appendChild(B),B.style.left="".concat(_.offsetLeft,"px"),B.style.top="".concat(_.offsetTop,"px"),B.style.position=V,B.style.height="".concat(_.offsetHeight,"px"),B.style.width="".concat(_.offsetWidth,"px"),_.style.left="0",_.style.top="0",_.style.right="auto",_.style.bottom="auto",_.style.overflow="hidden";var U;if(Array.isArray(n))U={x:n[0],y:n[1],width:0,height:0};else{var Q=n.getBoundingClientRect();U={x:Q.x,y:Q.y,width:Q.width,height:Q.height}}var X=_.getBoundingClientRect(),G=L.documentElement,et=G.clientWidth,it=G.clientHeight,at=G.scrollWidth,ut=G.scrollHeight,wt=G.scrollTop,yt=G.scrollLeft,ht=X.height,bt=X.width,fe=U.height,Jt=U.width,Te={left:0,top:0,right:et,bottom:it},Ze={left:-yt,top:-wt,right:at-yt,bottom:ut-wt},jt=R.htmlRegion,re="visible",Be="visibleFirst";jt!=="scroll"&&jt!==Be&&(jt=re);var Ht=jt===Be,fn=Cg(Ze,p),_t=Cg(Te,p),It=jt===re?_t:fn,kt=Ht?_t:It;_.style.left="auto",_.style.top="auto",_.style.right="0",_.style.bottom="0";var ae=_.getBoundingClientRect();_.style.left=tt,_.style.top=rt,_.style.right=K,_.style.bottom=k,_.style.overflow=j,(A=_.parentElement)===null||A===void 0||A.removeChild(B);var hn=fa(Math.round(bt/parseFloat(nt)*1e3)/1e3),dr=fa(Math.round(ht/parseFloat(ct)*1e3)/1e3);if(hn===0||dr===0||ks(n)&&!MS(n))return;var Kn=R.offset,Ae=R.targetOffset,gr=Tg(X,Kn),dn=Pt(gr,2),Ne=dn[0],Re=dn[1],Yr=Tg(U,Ae),$e=Pt(Yr,2),ki=$e[0],qr=$e[1];U.x-=ki,U.y-=qr;var Ti=R.points||[],Gn=Pt(Ti,2),Ee=Gn[0],Jn=Gn[1],Tn=Ag(Jn),Ie=Ag(Ee),Ai=fo(U,Tn),Ni=fo(X,Ie),An=xt({},R),ie=Ai.x-Ni.x+Ne,Zt=Ai.y-Ni.y+Re,te=de(ie,Zt),pr=de(ie,Zt,_t),Qn=fo(U,["t","l"]),vr=fo(X,["t","l"]),Ri=fo(U,["b","r"]),mr=fo(X,["b","r"]),yr=R.overflow||{},Pe=yr.adjustX,va=yr.adjustY,$i=yr.shiftX,Kr=yr.shiftY,Ii=function(rr){return typeof rr=="boolean"?rr:rr>=0},br,wr,Nn,xr;Bi();var Pi=Ii(va),ji=Ie[0]===Tn[0];if(Pi&&Ie[0]==="t"&&(wr>kt.bottom||b.current.bt)){var Zn=Zt;ji?Zn-=ht-fe:Zn=Qn.y-mr.y-Re;var mo=de(ie,Zn),Gr=de(ie,Zn,_t);mo>te||mo===te&&(!Ht||Gr>=pr)?(b.current.bt=!0,Zt=Zn,Re=-Re,An.points=[Hr(Ie,0),Hr(Tn,0)]):b.current.bt=!1}if(Pi&&Ie[0]==="b"&&(br<kt.top||b.current.tb)){var _r=Zt;ji?_r+=ht-fe:_r=Ri.y-vr.y-Re;var Oe=de(ie,_r),Jr=de(ie,_r,_t);Oe>te||Oe===te&&(!Ht||Jr>=pr)?(b.current.tb=!0,Zt=_r,Re=-Re,An.points=[Hr(Ie,0),Hr(Tn,0)]):b.current.tb=!1}var yo=Ii(Pe),Sr=Ie[1]===Tn[1];if(yo&&Ie[1]==="l"&&(xr>kt.right||b.current.rl)){var Er=ie;Sr?Er-=bt-Jt:Er=Qn.x-mr.x-Ne;var bo=de(Er,Zt),ma=de(Er,Zt,_t);bo>te||bo===te&&(!Ht||ma>=pr)?(b.current.rl=!0,ie=Er,Ne=-Ne,An.points=[Hr(Ie,1),Hr(Tn,1)]):b.current.rl=!1}if(yo&&Ie[1]==="r"&&(Nn<kt.left||b.current.lr)){var tr=ie;Sr?tr+=bt-Jt:tr=Ri.x-vr.x-Ne;var Li=de(tr,Zt),wo=de(tr,Zt,_t);Li>te||Li===te&&(!Ht||wo>=pr)?(b.current.lr=!0,ie=tr,Ne=-Ne,An.points=[Hr(Ie,1),Hr(Tn,1)]):b.current.lr=!1}Bi();var gn=$i===!0?0:$i;typeof gn=="number"&&(Nn<_t.left&&(ie-=Nn-_t.left-Ne,U.x+Jt<_t.left+gn&&(ie+=U.x-_t.left+Jt-gn)),xr>_t.right&&(ie-=xr-_t.right-Ne,U.x>_t.right-gn&&(ie+=U.x-_t.right+gn)));var Rn=Kr===!0?0:Kr;typeof Rn=="number"&&(br<_t.top&&(Zt-=br-_t.top-Re,U.y+fe<_t.top+Rn&&(Zt+=U.y-_t.top+fe-Rn)),wr>_t.bottom&&(Zt-=wr-_t.bottom-Re,U.y>_t.bottom-Rn&&(Zt+=U.y-_t.bottom+Rn)));var Mi=X.x+ie,xo=Mi+bt,$n=X.y+Zt,er=$n+ht,Qr=U.x,nr=Qr+Jt,In=U.y,_o=In+fe,Zr=Math.max(Mi,Qr),So=Math.min(xo,nr),Eo=(Zr+So)/2,Oo=Eo-Mi,Do=Math.max($n,In),zi=Math.min(er,_o),Co=(Do+zi)/2,ko=Co-$n;l==null||l(e,An);var Fi=ae.right-X.x-(ie+X.width),ti=ae.bottom-X.y-(Zt+X.height);g({ready:!0,offsetX:ie/hn,offsetY:Zt/dr,offsetR:Fi/hn,offsetB:ti/dr,arrowX:Oo/hn,arrowY:ko/dr,scaleX:hn,scaleY:dr,align:An})}}),w=function(){v.current+=1;var P=v.current;Promise.resolve().then(function(){v.current===P&&C()})},S=function(){g(function(P){return xt(xt({},P),{},{ready:!1})})};return Qe(S,[i]),Qe(function(){t||S()},[t]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,w]}function US(t,e,n,i,a){Qe(function(){if(t&&e&&n){let v=function(){i(),a()};var s=e,l=n,c=ac(s),h=ac(l),d=ca(l),g=new Set([d].concat(Ll(c),Ll(h)));return g.forEach(function(p){p.addEventListener("scroll",v,{passive:!0})}),d.addEventListener("resize",v,{passive:!0}),i(),function(){g.forEach(function(p){p.removeEventListener("scroll",v),d.removeEventListener("resize",v)})}}},[t,e,n])}function XS(t,e,n,i,a,s,l,c){var h=E.useRef(t);h.current=t,E.useEffect(function(){if(e&&i&&(!a||s)){var d=function(w){var S=w.target;h.current&&!l(S)&&c(!1)},g=ca(i);g.addEventListener("mousedown",d,!0),g.addEventListener("contextmenu",d,!0);var v=Gl(n);if(v&&(v.addEventListener("mousedown",d,!0),v.addEventListener("contextmenu",d,!0)),!1)var p,b,O,C;return function(){g.removeEventListener("mousedown",d,!0),g.removeEventListener("contextmenu",d,!0),v&&(v.removeEventListener("mousedown",d,!0),v.removeEventListener("contextmenu",d,!0))}}},[e,n,i,a,s])}var HS=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function WS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zd,e=E.forwardRef(function(n,i){var a=n.prefixCls,s=a===void 0?"rc-trigger-popup":a,l=n.children,c=n.action,h=c===void 0?"hover":c,d=n.showAction,g=n.hideAction,v=n.popupVisible,p=n.defaultPopupVisible,b=n.onPopupVisibleChange,O=n.afterPopupVisibleChange,C=n.mouseEnterDelay,w=n.mouseLeaveDelay,S=w===void 0?.1:w,P=n.focusDelay,A=n.blurDelay,_=n.mask,L=n.maskClosable,I=L===void 0?!0:L,M=n.getPopupContainer,nt=n.forceRender,ct=n.autoDestroy,V=n.destroyPopupOnHide,tt=n.popup,rt=n.popupClassName,K=n.popupStyle,k=n.popupPlacement,j=n.builtinPlacements,R=j===void 0?{}:j,B=n.popupAlign,U=n.zIndex,Q=n.stretch,X=n.getPopupClassNameFromAlign,G=n.fresh,et=n.alignPoint,it=n.onPopupClick,at=n.onPopupAlign,ut=n.arrow,wt=n.popupMotion,yt=n.maskMotion,ht=n.popupTransitionName,bt=n.popupAnimation,fe=n.maskTransitionName,Jt=n.maskAnimation,Te=n.className,Ze=n.getTriggerDOMNode,jt=Es(n,HS),re=ct||V||!1,Be=E.useState(!1),Ht=Pt(Be,2),fn=Ht[0],_t=Ht[1];Qe(function(){_t(hS())},[]);var It=E.useRef({}),kt=E.useContext(Eg),ae=E.useMemo(function(){return{registerSubPopup:function(st,Nt){It.current[st]=Nt,kt==null||kt.registerSubPopup(st,Nt)}}},[kt]),hn=fS(),dr=E.useState(null),Kn=Pt(dr,2),Ae=Kn[0],gr=Kn[1],dn=E.useRef(null),Ne=Ei(function(st){dn.current=st,ks(st)&&Ae!==st&&gr(st),kt==null||kt.registerSubPopup(hn,st)}),Re=E.useState(null),Yr=Pt(Re,2),$e=Yr[0],ki=Yr[1],qr=E.useRef(null),Ti=Ei(function(st){ks(st)&&$e!==st&&(ki(st),qr.current=st)}),Gn=E.Children.only(l),Ee=(Gn==null?void 0:Gn.props)||{},Jn={},Tn=Ei(function(st){var Nt,he,ge=$e;return(ge==null?void 0:ge.contains(st))||((Nt=Gl(ge))===null||Nt===void 0?void 0:Nt.host)===st||st===ge||(Ae==null?void 0:Ae.contains(st))||((he=Gl(Ae))===null||he===void 0?void 0:he.host)===st||st===Ae||Object.values(It.current).some(function(ee){return(ee==null?void 0:ee.contains(st))||st===ee})}),Ie=Dg(s,wt,bt,ht),Ai=Dg(s,yt,Jt,fe),Ni=E.useState(p||!1),An=Pt(Ni,2),ie=An[0],Zt=An[1],te=v!=null?v:ie,pr=Ei(function(st){v===void 0&&Zt(st)});Qe(function(){Zt(v||!1)},[v]);var Qn=E.useRef(te);Qn.current=te;var vr=E.useRef([]);vr.current=[];var Ri=Ei(function(st){var Nt;pr(st),((Nt=vr.current[vr.current.length-1])!==null&&Nt!==void 0?Nt:te)!==st&&(vr.current.push(st),b==null||b(st))}),mr=E.useRef(),yr=function(){clearTimeout(mr.current)},Pe=function(st){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;yr(),Nt===0?Ri(st):mr.current=setTimeout(function(){Ri(st)},Nt*1e3)};E.useEffect(function(){return yr},[]);var va=E.useState(!1),$i=Pt(va,2),Kr=$i[0],Ii=$i[1];Qe(function(st){(!st||te)&&Ii(!0)},[te]);var br=E.useState(null),wr=Pt(br,2),Nn=wr[0],xr=wr[1],Pi=E.useState([0,0]),ji=Pt(Pi,2),Zn=ji[0],mo=ji[1],Gr=function(st){mo([st.clientX,st.clientY])},_r=BS(te,Ae,et?Zn:$e,k,R,B,at),Oe=Pt(_r,11),Jr=Oe[0],yo=Oe[1],Sr=Oe[2],Er=Oe[3],bo=Oe[4],ma=Oe[5],tr=Oe[6],Li=Oe[7],wo=Oe[8],gn=Oe[9],Rn=Oe[10],Mi=LS(fn,h,d,g),xo=Pt(Mi,2),$n=xo[0],er=xo[1],Qr=$n.has("click"),nr=er.has("click")||er.has("contextMenu"),In=Ei(function(){Kr||Rn()}),_o=function(){Qn.current&&et&&nr&&Pe(!1)};US(te,$e,Ae,In,_o),Qe(function(){In()},[Zn,k]),Qe(function(){te&&!(R!=null&&R[k])&&In()},[JSON.stringify(B)]);var Zr=E.useMemo(function(){var st=FS(R,s,gn,et);return le(st,X==null?void 0:X(gn))},[gn,X,R,s,et]);E.useImperativeHandle(i,function(){return{nativeElement:qr.current,popupElement:dn.current,forceAlign:In}});var So=E.useState(0),Eo=Pt(So,2),Oo=Eo[0],Do=Eo[1],zi=E.useState(0),Co=Pt(zi,2),ko=Co[0],Fi=Co[1],ti=function(){if(Q&&$e){var st=$e.getBoundingClientRect();Do(st.width),Fi(st.height)}},de=function(){ti(),In()},Bi=function(st){Ii(!1),Rn(),O==null||O(st)},rr=function(){return new Promise(function(st){ti(),xr(function(){return st})})};Qe(function(){Nn&&(Rn(),Nn(),xr(null))},[Nn]);function ir(st,Nt,he,ge){Jn[st]=function(ee){var No;ge==null||ge(ee),Pe(Nt,he);for(var wa=arguments.length,Xs=new Array(wa>1?wa-1:0),Ft=1;Ft<wa;Ft++)Xs[Ft-1]=arguments[Ft];(No=Ee[st])===null||No===void 0||No.call.apply(No,[Ee,ee].concat(Xs))}}(Qr||nr)&&(Jn.onClick=function(st){var Nt;Qn.current&&nr?Pe(!1):!Qn.current&&Qr&&(Gr(st),Pe(!0));for(var he=arguments.length,ge=new Array(he>1?he-1:0),ee=1;ee<he;ee++)ge[ee-1]=arguments[ee];(Nt=Ee.onClick)===null||Nt===void 0||Nt.call.apply(Nt,[Ee,st].concat(ge))}),XS(te,nr,$e,Ae,_,I,Tn,Pe);var Or=$n.has("hover"),Ui=er.has("hover"),Dr,Xi;Or&&(ir("onMouseEnter",!0,C,function(st){Gr(st)}),ir("onPointerEnter",!0,C,function(st){Gr(st)}),Dr=function(st){(te||Kr)&&Ae!==null&&Ae!==void 0&&Ae.contains(st.target)&&Pe(!0,C)},et&&(Jn.onMouseMove=function(st){var Nt;(Nt=Ee.onMouseMove)===null||Nt===void 0||Nt.call(Ee,st)})),Ui&&(ir("onMouseLeave",!1,S),ir("onPointerLeave",!1,S),Xi=function(){Pe(!1,S)}),$n.has("focus")&&ir("onFocus",!0,P),er.has("focus")&&ir("onBlur",!1,A),$n.has("contextMenu")&&(Jn.onContextMenu=function(st){var Nt;Qn.current&&er.has("contextMenu")?Pe(!1):(Gr(st),Pe(!0)),st.preventDefault();for(var he=arguments.length,ge=new Array(he>1?he-1:0),ee=1;ee<he;ee++)ge[ee-1]=arguments[ee];(Nt=Ee.onContextMenu)===null||Nt===void 0||Nt.call.apply(Nt,[Ee,st].concat(ge))}),Te&&(Jn.className=le(Ee.className,Te));var Hi=xt(xt({},Ee),Jn),To={},ya=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ya.forEach(function(st){jt[st]&&(To[st]=function(){for(var Nt,he=arguments.length,ge=new Array(he),ee=0;ee<he;ee++)ge[ee]=arguments[ee];(Nt=Hi[st])===null||Nt===void 0||Nt.call.apply(Nt,[Hi].concat(ge)),jt[st].apply(jt,ge)})});var Ao=E.cloneElement(Gn,xt(xt({},Hi),To)),ba={x:ma,y:tr},fc=ut?xt({},ut!==!0?ut:{}):null;return E.createElement(E.Fragment,null,E.createElement(Kl,{disabled:!te,ref:Ti,onResize:de},E.createElement(jS,{getTriggerDOMNode:Ze},Ao)),E.createElement(Eg.Provider,{value:ae},E.createElement(PS,{portal:t,ref:Ne,prefixCls:s,popup:tt,className:le(rt,Zr),style:K,target:$e,onMouseEnter:Dr,onMouseLeave:Xi,onPointerEnter:Dr,zIndex:U,open:te,keepDom:Kr,fresh:G,onClick:it,mask:_,motion:Ie,maskMotion:Ai,onVisibleChanged:Bi,onPrepare:rr,forceRender:nt,autoDestroy:re,getPopupContainer:M,align:gn,arrow:fc,arrowPos:ba,ready:Jr,offsetX:yo,offsetY:Sr,offsetR:Er,offsetB:bo,onAlign:In,stretch:Q,targetWidth:Oo/Li,targetHeight:ko/wo})))});return e}const VS=WS(Zd);var ho={shiftX:64,adjustY:1},go={adjustX:1,shiftY:!0},cn=[0,0],YS={left:{points:["cr","cl"],overflow:go,offset:[-4,0],targetOffset:cn},right:{points:["cl","cr"],overflow:go,offset:[4,0],targetOffset:cn},top:{points:["bc","tc"],overflow:ho,offset:[0,-4],targetOffset:cn},bottom:{points:["tc","bc"],overflow:ho,offset:[0,4],targetOffset:cn},topLeft:{points:["bl","tl"],overflow:ho,offset:[0,-4],targetOffset:cn},leftTop:{points:["tr","tl"],overflow:go,offset:[-4,0],targetOffset:cn},topRight:{points:["br","tr"],overflow:ho,offset:[0,-4],targetOffset:cn},rightTop:{points:["tl","tr"],overflow:go,offset:[4,0],targetOffset:cn},bottomRight:{points:["tr","br"],overflow:ho,offset:[0,4],targetOffset:cn},rightBottom:{points:["bl","br"],overflow:go,offset:[4,0],targetOffset:cn},bottomLeft:{points:["tl","bl"],overflow:ho,offset:[0,4],targetOffset:cn},leftBottom:{points:["br","bl"],overflow:go,offset:[-4,0],targetOffset:cn}},qS=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],KS=function(t,e){var n=t.overlayClassName,i=t.trigger,a=i===void 0?["hover"]:i,s=t.mouseEnterDelay,l=s===void 0?0:s,c=t.mouseLeaveDelay,h=c===void 0?.1:c,d=t.overlayStyle,g=t.prefixCls,v=g===void 0?"rc-tooltip":g,p=t.children,b=t.onVisibleChange,O=t.afterVisibleChange,C=t.transitionName,w=t.animation,S=t.motion,P=t.placement,A=P===void 0?"right":P,_=t.align,L=_===void 0?{}:_,I=t.destroyTooltipOnHide,M=I===void 0?!1:I,nt=t.defaultVisible,ct=t.getTooltipContainer,V=t.overlayInnerStyle;t.arrowContent;var tt=t.overlay,rt=t.id,K=t.showArrow,k=K===void 0?!0:K,j=Es(t,qS),R=(0,E.useRef)(null);(0,E.useImperativeHandle)(e,function(){return R.current});var B=xt({},j);"visible"in t&&(B.popupVisible=t.visible);var U=function(){return E.createElement(E_,{key:"content",prefixCls:v,id:rt,overlayInnerStyle:V},tt)};return E.createElement(VS,Si({popupClassName:n,prefixCls:v,popup:U,action:a,builtinPlacements:YS,popupPlacement:A,ref:R,popupAlign:L,getPopupContainer:ct,onPopupVisibleChange:b,afterPopupVisibleChange:O,popupTransitionName:C,popupAnimation:w,popupMotion:S,defaultPopupVisible:nt,autoDestroy:M,mouseLeaveDelay:h,popupStyle:d,mouseEnterDelay:l,arrow:k},B),p)};const GS=(0,E.forwardRef)(KS),JS=t=>{const l=t,{children:e,title:n,content:i,className:a}=l,s=jr(l,["children","title","content","className"]);return W.jsx(GS,Mt(Z({prefixCls:"fiagram-tooltip",motion:{motionName:"fiagram-tooltip-fade"}},s),{children:W.jsx("span",{className:a,children:e})}))},QS={rightTop:{offset:[14,0],targetOffset:[0,7]},bottom:{offset:[0,14],targetOffset:[-7,0]}},ZS=t=>{const{icon:e,title:n,trigger:i="hover",onClick:a,overlay:s,placement:l="bottom",active:c=!1,disabled:h=!1}=t,{state:d}=ce(v=>v),{svgInfo:g}=d;return(0,E.useEffect)(()=>{var v;let p=null;return g!=null&&g.svgDOM&&t.keyCodes&&(p=new __({keyCode:t.keyCodes,keydown:t.onKeyDown,keyup:t.onKeyUp,dom:(v=g==null?void 0:g.svgDOM)==null?void 0:v.parentNode})),()=>{p&&p.removeEvent()}},[g==null?void 0:g.svgDOM,t.disabled,t.active]),W.jsx(JS,{trigger:i,overlay:s||n||"",align:QS[l],placement:l,className:le("fiagram-tools-item",{active:c,disabled:h}),children:W.jsx(S_,{type:e,onClick:a,style:e==="icon-marquee"?{position:"relative",left:"2px",top:"1px"}:{}})})},Wr=t=>{const{group:e,trigger:n,placement:i}=t;return W.jsx("div",{className:"fiagram-tools-group",children:e.map(l=>{var c=l,{key:a}=c,s=jr(c,["key"]);return W.jsx(ZS,Z({trigger:n,placement:i},s),a)})})};function sc(t){t!=null&&t.svg&&(t.svg.classed("marquee-finished",!1),t.svg.call(t.zoom).on("dblclick.zoom",null),t==null||t.marqueeSelect.attr("d","M 0 0").attr("transform",""),t==null||t.marqueeSelectCopy.attr("d","M 0 0").attr("transform",""),t==null||t.marqueeSelectCopy.on("mousedown.drag",null))}const Ng=()=>{const{t}=Ur(),[e,n]=(0,E.useState)(!1),{state:i,setMarqueeNodes:a,getState:s,updateNodes:l}=ce(w=>w),{svgInfo:c,nodes:h}=i;function d(){let w=!1;const S={x:0,y:0},P=0,A=0;return Zo().on("start",_=>{w=!1,c==null||c.svg.classed("marquee",!0),c==null||c.svg.classed("marquee-finished",!1),S.x=_.x-P,S.y=_.y-A}).on("drag",_=>{w=!0;const L={x:0,y:0};L.x=_.x-P,L.y=_.y-A,c==null||c.marqueeSelect.attr("d",`M ${S.x} ${S.y} H ${L.x} V ${L.y} H ${S.x} Z`)}).on("end",_=>{if(w){const L={x:0,y:0};L.x=_.x-P,L.y=_.y-A;const I={x1:S.x,y1:S.y,x2:L.x,y2:L.y};L.x<S.x&&(I.x2=S.x,I.x1=L.x),L.y<S.y&&(I.y2=S.y,I.y1=L.y);const M=p(h||[],I);a(M),C()}})}function g(w,S){return S.x>w.x1&&S.x<w.x2&&S.y>w.y1&&S.y<w.y2}function v(w,S){const P={x:0,y:0},A={x:0,y:0},_={x:0,y:0},L={x:0,y:0},I=ua(c==null?void 0:c.svg.node()),M=On(h||[],(S==null?void 0:S.id)||"");return P.x=((M==null?void 0:M.relativeX)||0)*I.k+I.x,P.y=((M==null?void 0:M.relativeY)||0)*I.k+I.y,A.x=(((M==null?void 0:M.relativeX)||0)+((M==null?void 0:M.width)||0))*I.k+I.x,A.y=((M==null?void 0:M.relativeY)||0)*I.k+I.y,_.x=((M==null?void 0:M.relativeX)||0)*I.k+I.x,_.y=(((M==null?void 0:M.relativeY)||0)+((M==null?void 0:M.height)||0))*I.k+I.y,L.x=(((M==null?void 0:M.relativeX)||0)+((M==null?void 0:M.width)||0))*I.k+I.x,L.y=(((M==null?void 0:M.relativeY)||0)+((M==null?void 0:M.height)||0))*I.k+I.y,g(w,P)&&g(w,A)&&g(w,_)&&g(w,L)}function p(w,S){if(F.isEmpty(w))return[];let P=[];return F.map(w,A=>{v(S,A)&&(P=P.concat(A))}),P}function b(){let w=0,S=0,P={x:0,y:0};c==null||c.marqueeSelectCopy.attr("d",c==null?void 0:c.marqueeSelect.attr("d"));function A(_){let L=0,I=0;const M=_.attr("transform");return M&&([L,I]=M.match(/(-?[0-9.]+)/g)),[+L,+I]}return Zo().on("start",_=>{const[L,I]=A(c==null?void 0:c.marqueeSelectCopy);w=_.x-L,S=_.y-I}).on("drag",_=>{c==null||c.marqueeSelectCopy.attr("transform",`translate(${_.x-w}, ${_.y-S})`)}).on("end",()=>{const{marqueeNodes:_,nodes:L}=s();let I=F.cloneDeep(L);const M=F.map(_,"id"),[nt,ct]=A(c==null?void 0:c.marqueeSelectCopy),V=ua(c==null?void 0:c.svg.node()),tt=nt-P.x,rt=ct-P.y,K=tt/V.k,k=rt/V.k;I=F.map(F.cloneDeep(I),j=>(F.includes(M,j.id)&&(j.x+=K,j.y+=k),j)),P={x:nt,y:ct},c==null||c.marqueeSelect.attr("transform",c==null?void 0:c.marqueeSelectCopy.attr("transform")),l(I)})}function O(){c==null||c.svg.on("mousedown.zoom",null),c==null||c.svg.call(d()),n(!0)}const C=()=>{c==null||c.svg.on("mousedown.drag",null),c==null||c.svg.classed("marquee",!1),c==null||c.svg.classed("marquee-finished",!0),c==null||c.marqueeSelectCopy.call(b()),n(!1)};return W.jsx(Wr,{group:[{key:"marquee",title:t("translation:marquee"),icon:"icon-marquee",keyCodes:ol.Alt,active:e,onKeyDown:O,onKeyUp:()=>{c!=null&&c.svg.classed("marquee")||c!=null&&c.svg.classed("marquee-finished")||(C(),sc(c))},onClick:e?C:O}]})};function tE(t,e,n){const{state:i,setSvgInfo:a,setState:s}=ce(S=>S),{svgInfo:l,zoomConfig:c,selectedNodes:h,selectedEdges:d}=i,{wheelZoomDisabled:g,dragZoomDisabled:v,scaleExtent:p}=n,b=e.current,O=t.current,C=S=>a_().scaleExtent(p&&e1(p)?p:[1/5,4]).on("zoom",P=>{S.attr("transform",P.transform)}),w=(S,P)=>{S.call(P).on("dblclick.zoom",null),g&&S.on("wheel.zoom",null),v&&S.on("mousedown.zoom",null)};return(0,E.useEffect)(()=>{if(!O||!b)return;const S=be(O),P=S.select(".zoom-area"),A=S.select(".marquee-wrap"),_={svg:S,svgDOM:O,svgZoomArea:P,auxiliary:S.select(".auxiliary"),zoom:(c||C)(P),marqueeSelect:A.select(".marquee-select"),marqueeSelectCopy:A.select(".marquee-select-copy")};w(S,_.zoom),Array.from((b==null?void 0:b.childNodes)||[]).forEach(L=>{const I=L==null?void 0:L.getAttribute("data-svg-key");_[I]=S.select(`#${L.id}`)}),S.on("contextmenu",L=>{L.preventDefault()}),Ss(Z({},_)),a(_)},[b,O]),(0,E.useEffect)(()=>{const{svg:S}=i.svgInfo||{};S&&S.on("click",P=>{var A;if(P.preventDefault(),((A=P==null?void 0:P.srcElement)==null?void 0:A.tagName)==="svg"){const _=F.cloneDeep(i);(S.classed("marquee-finished")||S.classed("marquee"))&&(sc(l),_.marqueeNodes=[]),h&&h.length>0&&(_.selectedNodes=[]),d&&d.length>0&&(_.selectedEdges=[]),s(_)}})}),(0,E.useEffect)(()=>{l!=null&&l.svg&&w(l.svg,l.zoom)},[g,v]),null}function eE(t,e){if(!t||!e)return{display:"none"};const{x:n,y:i}=e,a=`translate(${n}px, ${i}px)`;return{transform:a,WebkitTransform:a}}function nE({item:t,monitor:e,svgRef:n,svgInfo:i,nodes:a}){var s;const{left:l,top:c}=((s=n==null?void 0:n.current)==null?void 0:s.getBoundingClientRect())||{left:0,top:0},{x:h,y:d}=e.getSourceClientOffset(),g=i?ua(i.svg.node()):{x:0,y:0,k:1},v=(h-l-g.x)/g.k,p=(d-c-g.y)/g.k,b=Mt(Z({},t),{id:ro(),width:t.width||50,height:t.height||50,x:v,y:p}),O=[...a],C=Za(O,Mt(Z({},b),{relativeX:v,relativeY:p}));if(C){const{relativeX:w,relativeY:S}=On(O,(C==null?void 0:C.id)||ro())||{relativeX:0,relativeY:0};C.children=(C.children||[]).concat(Mt(Z({},b),{x:((b==null?void 0:b.x)||0)-(w||0),y:((b==null?void 0:b.y)||0)-(S||0)}))}else O.push(b);return delete b.component,delete b.type,{newNodes:O,newNode:b}}function rE(t){const{state:e,setNodes:n}=ce(c=>c),{nodes:i=[],svgInfo:a,uniqId:s}=e,[,l]=ay({accept:`${wh}-${s}`,drop:(c,h)=>{const{newNodes:d}=nE({item:c,monitor:h,svgRef:t,svgInfo:a,nodes:i});n(d)}});return l(t),null}function iE(t){const{nodes:e=[],edges:n=[]}=t,[i,a]=(0,E.useState)(!1),{updateNodesAndEdges:s,setState:l}=ce(c=>c);return(0,E.useEffect)(()=>{const d=t,{restChilds:c}=d,h=jr(d,["restChilds"]);l(h)},[t]),(0,E.useEffect)(()=>{const c=F.cloneDeep(e||[]),h=kh(c,F.cloneDeep(n||[]));a(!0),s(c,h,i?"patch":"all")},[e,n]),null}const Di=t=>({id:"flow-id",x:0,y:0,width:130,height:35,shape:`flow-${t}`}),Ci=({color:t,y:e,label:n})=>W.jsx("text",{x:"50%",y:e||"51%",textAnchor:"middle",dominantBaseline:"middle",fill:t||"white",fontSize:"13",fontWeight:"600",letterSpacing:"0em",children:n}),Rg=[{shape:"flow-start",label:"Start",nodeInfo:Di("start"),component:({width:t,height:e,label:n})=>W.jsxs("svg",{width:t,height:e,viewBox:`0 0 ${t} ${e}`,fill:"none",children:[W.jsx("rect",{width:t,height:e,rx:e/2,fill:"#3A3D87"}),W.jsx(Ci,{label:n})]})},{shape:"flow-process",label:"Process",nodeInfo:Di("process"),component:({width:t,height:e,label:n})=>W.jsxs("svg",{width:t+2,height:e+3,viewBox:`0 0 ${t} ${e}`,fill:"none",children:[W.jsx("rect",{x:1.5,y:0,width:t-3,height:e,rx:"6",fill:"#DB9730",fillOpacity:"0.2"}),W.jsx("rect",{x:1.5,y:0,width:t-3,height:e,rx:"6",stroke:"#DB9730",strokeWidth:"2"}),W.jsx(Ci,{label:n,color:"#DB9730"})]})},{shape:"flow-condition",label:"Condition",nodeInfo:Di("condition"),component:({width:t,height:e,label:n})=>{const i=e*1.3,a=t/350,s=i/188;return W.jsxs("svg",{width:t,height:i,viewBox:`0 0 ${t} ${i-2}`,fill:"none",children:[W.jsx("path",{d:`M${172.231*a} ${1.75346*s}L${10.2412*a} ${85.9881*s}C${5.93029*a} ${88.2297*s} ${5.93029*a} ${94.3972*s} ${10.2412*a} ${96.6389*s}L${172.231*a} ${180.873*s}C${173.967*a} ${181.776*s} ${176.033*a} ${181.776*s} ${177.769*a} ${180.873*s}L${339.759*a} ${96.6389*s}C${344.07*a} ${94.3972*s} ${344.07*a} ${88.2297*s} ${339.759*a} ${85.9881*s}L${177.769*a} ${1.75347*s}C${176.033*a} ${.850845*s} ${173.967*a} ${.850838*s} ${172.231*a} ${1.75346*s}Z`,fill:"#888DFF",fillOpacity:"0.2",stroke:"#888DFF",strokeWidth:2}),W.jsx(Ci,{label:n,color:"#888DFF"})]})}},{shape:"flow-database",label:"Database",nodeInfo:Di("database"),component:({width:t,height:e,label:n})=>{const i=e*1.3,a=t/234,s=i/148;return W.jsxs("svg",{width:t,height:i,viewBox:`0 0 ${t} ${i-2}`,fill:"none",children:[W.jsx("path",{d:`M${1.50226*a} ${30.5377*s}C${1.50226*a} ${14.3976*s} ${53.2129*a} ${1.31348*s} ${117.001*a} ${1.31348*s}C${180.789*a} ${1.31348*s} ${232.5*a} ${14.3976*s} ${232.5*a} ${30.5377*s}V${112.089*s}C${232.5*a} ${128.229*s} ${180.789*a} ${141.313*s} ${117.001*a} ${141.313*s}C${53.2129*a} ${141.313*s} ${1.50226*a} ${128.229*s} ${1.50226*a} ${112.089*s}V${30.8006*s}C${1.4994*a} ${30.7101*s} ${1.4991*a} ${30.6214*s} ${1.50226*a} ${30.5377*s}Z`,fill:"#E5C105",fillOpacity:"0.18"}),W.jsx("path",{d:`M${232.5*a} ${30.5377*s}C${232.5*a} ${46.6777*s} ${180.789*a} ${59.7619*s} ${117.001*a} ${59.7619*s}C${54.9297*a} ${59.7619*s} ${4.29455*a} ${47.3726*s} ${1.61386*a} ${31.834*s}C${1.56953*a} ${31.5913*s} ${1.48515*a} ${30.9921*s} ${1.50226*a} ${30.5377*s}M${232.5*a} ${30.5377*s}C${232.5*a} ${14.3976*s} ${180.789*a} ${1.31348*s} ${117.001*a} ${1.31348*s}C${53.2129*a} ${1.31348*s} ${1.50226*a} ${14.3976*s} ${1.50226*a} ${30.5377*s}M${232.5*a} ${30.5377*s}V${112.089*s}C${232.5*a} ${128.229*s} ${180.789*a} ${141.313*s} ${117.001*a} ${141.313*s}C${53.2129*a} ${141.313*s} ${1.50226*a} ${128.229*s} ${1.50226*a} ${112.089*s}V${30.5377*s}`,stroke:"#E5C105",strokeWidth:"2"}),W.jsx(Ci,{label:n,color:"#E5C105",y:"70%"})]})}},{shape:"flow-exegesis",label:"Exegesis",nodeInfo:Di("exegesis"),component:({width:t,height:e,label:n})=>W.jsxs("svg",{width:t+2,height:e+3,viewBox:`0 0 ${t} ${e}`,fill:"none",children:[W.jsx("rect",{x:1.5,y:0,width:t-3,height:e,rx:"6",fill:"#30C687",fillOpacity:"0.2"}),W.jsx("rect",{x:1.5,y:0,width:t-3,height:e,rx:"6",stroke:"#30C687",strokeWidth:"2",strokeDasharray:"8 2"}),W.jsx(Ci,{label:n,color:"#30C687"})]})},{shape:"flow-decision",label:"Decision",nodeInfo:Di("decision"),component:({width:t,height:e,label:n})=>{const i=t/350,a=e/104;return W.jsxs("svg",{width:t,height:e,viewBox:`0 0 ${t} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[W.jsx("path",{d:`M${41.2019*i} ${5.45596*a}L${3.57566*i} ${93.4512*a}C${1.88229*i} ${97.4114*a} ${4.7876*i} ${101.813*a} ${9.09467*i} ${101.813*a}H${303.279*i}C${305.682*i} ${101.813*a} ${307.853*i} ${100.38*a} ${308.798*i} ${98.171*a}L${346.424*i} ${10.1758*a}C${348.118*i} ${6.21554*a} ${345.212*i} ${1.81348*a} ${340.905*i} ${1.81348*a}H${46.7209*i}C${44.318*i} ${1.81348*a} ${42.1466*i} ${3.24655*a} ${41.2019*i} ${5.45596*a}Z`,fill:"#3A3D87",fillOpacity:"0.2",stroke:"#3A3D87",strokeWidth:"2"}),W.jsx(Ci,{label:n,color:"#3A3D87"})]})}},{shape:"flow-end",label:"End",nodeInfo:Di("end"),component:({width:t,height:e,label:n})=>W.jsxs("svg",{width:t,height:e,viewBox:`0 0 ${t} ${e}`,fill:"none",children:[W.jsx("rect",{width:t,height:e,rx:e/2,fill:"#1CB273"}),W.jsx(Ci,{label:n})]})}];function oE({props:t,ref:e,dragDisabled:n}){const{state:i,setNodes:a,updateNodesAndEdges:s}=ce(V=>V),{svgInfo:l,nodes:c=[],edges:h=[],copyNodeDisabled:d,selectedNodes:g}=i;let v=null,p=[];const b=12,O=sl(c||[],t.data);function C(V,tt,rt,K){const k=F.includes(["top","bottom"],rt),j=k?"relativeY":"relativeX",R=k?"height":"width",B=F.minBy(V,X=>{const G=Math.abs(((X==null?void 0:X[j])||0)-K),et=Math.abs(((X==null?void 0:X[j])||0)+X[R]-K);return tt.id===X.id?99999:F.minBy([G,et])}),U=Math.abs(((B==null?void 0:B[j])||0)-K),Q=Math.abs(((B==null?void 0:B[j])||0)+((B==null?void 0:B[R])||0)-K);return U<Q&&U<b?{sourceDirect:rt,targetDirect:k?"top":"left",node:B,gap:U}:Q<b?{sourceDirect:rt,targetDirect:k?"bottom":"right",node:B,gap:Q}:null}const w=(V,tt,rt)=>{let K=0;return V.replace(_h,k=>(K+=1,K===tt?`${rt}`:k))},S=F.debounce((V,tt,rt,K)=>{if(!(l!=null&&l.svg.classed("draging-node")))return;const k=F.sortBy(F.compact([C(K,V,"top",rt),C(K,V,"bottom",rt+V.height),C(K,V,"left",tt),C(K,V,"right",tt+V.width)]),X=>X.gap).slice(0,2);let j=l==null?void 0:l.dragingNode.attr("transform");const R={x:1,y:2},B=F.map(k,X=>{var G,et,it,at;let ut=null;const wt=((G=X==null?void 0:X.node)==null?void 0:G.width)||0,yt=((et=X==null?void 0:X.node)==null?void 0:et.height)||0,ht=((it=X==null?void 0:X.node)==null?void 0:it.relativeX)||0,bt=((at=X==null?void 0:X.node)==null?void 0:at.relativeY)||0;switch(X.sourceDirect){case"top":X.targetDirect==="top"?(ut=`M ${ht+wt/2} ${bt} L ${tt} ${bt}`,j=w(j,R.y,bt)):(ut=`M ${ht+wt/2} ${bt+yt} L ${tt} ${bt+yt}`,j=w(j,R.y,bt+yt));break;case"left":X.targetDirect==="left"?(ut=`M ${ht} ${bt+yt/2} L ${ht} ${rt}`,j=w(j,R.x,ht)):(ut=`M ${ht+wt} ${bt+yt/2} L ${ht+wt} ${rt}`,j=w(j,R.x,ht+wt));break;case"right":X.targetDirect==="left"?(ut=`M ${ht} ${bt+yt/2} L ${ht} ${rt}`,j=w(j,R.x,ht-V.width)):(ut=`M ${ht+wt} ${bt+yt/2} L ${ht+wt} ${rt}`,j=w(j,R.x,ht+wt-V.width));break;default:X.targetDirect==="top"?(ut=`M ${ht+wt/2} ${bt} L ${tt} ${bt}`,j=w(j,R.y,bt-V.height)):(ut=`M ${ht+wt/2} ${bt+yt} L ${tt} ${bt+yt}`,j=w(j,R.y,bt+yt-V.height));break}return ut});v=l==null?void 0:l.svgZoomArea.selectAll("path.drag-align").data(B).attr("d",X=>X),p=v.enter().append("path").classed("drag-align",!0).attr("d",X=>X).attr("stroke","#00ff00").attr("fill","node").attr("stroke-width","1px");const[U,Q]=j.match(_h);l==null||l.dragingNode.attr("transform",j),l==null||l.dragingNode.datum({translateX:Math.round(U),translateY:Math.round(Q)}),v.exit().remove()},100);function P(V,tt,rt){const K=V.length>1&&F.some(V,k=>k.id===t.data.id);if(rt!=="ctrl"&&K){const k="multi-draging-node";return l==null?void 0:l.auxiliary.selectAll(`.${k}`).data(F.map(V,j=>(j.absRotateDeg=sl(tt,j),j))).enter().append("rect").classed([k],!0)}return null}function A(V,tt,rt){V.datum(K=>{let k=rt.x-tt[(K==null?void 0:K.id)||""].relativeOffsetX,j=rt.y-tt[(K==null?void 0:K.id)||""].relativeOffsetY;return K.expand===!1&&(k=k+(K.width-Bn)/2,j=j+(K.height-Un)/2),K.translateX=k,K.translateY=j,K}).attr("width",K=>K.expand===!1?Bn:K.width).attr("height",K=>K.expand===!1?Un:K.height).attr("transform",K=>{const k=K.expand===!1?`rotate(${K.absRotateDeg} ${Bn/2} ${Un/2})`:`rotate(${K.absRotateDeg}, ${K.width/2}, ${K.height/2})`,j=`translate(${K.translateX} ${K.translateY})`;return K.absRotateDeg?`${j} ${k}`:j})}function _(V,tt=0,rt=0,K){var k;v&&v.remove(),p&&((k=p==null?void 0:p.remove)==null||k.call(p)),t.data.expand===!1?l==null||l.dragingNode.datum({translateX:tt+(t.data.width-Bn)/2,translateY:rt+(t.data.height-Un)/2}).attr("width",Bn).attr("height",Un).attr("transform",j=>{const R=`translate(${j.translateX} ${j.translateY})`;return O?`${R} rotate(${O} ${Bn/2} ${Un/2})`:R}):(l==null||l.dragingNode.datum({translateX:tt,translateY:rt}).attr("width",t.data.width).attr("height",t.data.height).attr("transform",j=>{const R=`translate(${j.translateX} ${j.translateY})`;return O?`${R} rotate(${O} ${t.data.width/2} ${t.data.height/2})`:R}),!O&&!F.isEmpty(K)&&S(V,tt,rt,K))}function L(V){return F.isEmpty(V)?V:F.map(V,tt=>Mt(Z({},tt),{id:ro(),children:L(tt.children||[])}))}function I(V){return Mt(Z({},V),{id:ro(),x:V.relativeX,y:V.relativeY,children:L((V==null?void 0:V.children)||[])})}function M({chain:V,eventX:tt,eventY:rt,nodes:K,edges:k,isMultipleMove:j,type:R}){let B=[...K];const U=V.slice(0,-1),Q=Z({},F.last(V));Q.x=tt,Q.y=rt;const{x:X,y:G}=F.reduce(U,(it,at)=>({x:it.x+((at==null?void 0:at.x)||0),y:it.y+((at==null?void 0:at.y)||0)}),{x:0,y:0});if(Q.relativeX=tt+X,Q.relativeY=rt+G,!j&&R==="shift"&&!d){const it=I(Q),at=Za(K,it);return at?(B=yi(K,at.id,ut=>{const{relativeX:wt,relativeY:yt}=On(K,(ut==null?void 0:ut.id)||"")||{relativeX:0,relativeY:0};return ut.children=(ut.children||[]).concat(Mt(Z({},it),{x:((Q==null?void 0:Q.relativeX)||0)-(wt||0),y:((Q==null?void 0:Q.relativeY)||0)-(yt||0)})),ut}),a(B)):a(K.concat(it)),[B,k]}B=Eh({nodes:B,node:Z({},Q),chain:V});const et=Zy(Q,B,k);return[B,et]}function nt({type:V,eventX:tt,eventY:rt,chain:K}){var k;v&&v.remove(),p&&((k=p==null?void 0:p.remove)==null||k.call(p));const j=K.length>1;function R(){const G=l==null?void 0:l.dragingNode.datum();if(G){const{translateX:et}=G;return t.data.expand===!1?et-(t.data.width-Bn)/2:et}}function B(){const G=l==null?void 0:l.dragingNode.datum();if(G){const{translateY:et}=G;return t.data.expand===!1?et-(t.data.height-Un)/2:et}}l==null||l.dragingNode.attr("x",0).attr("y",0).attr("width",0).attr("height",0);const U=j?tt:R(),Q=j?rt:B();if(!U||!Q)return;const X=M({chain:K,nodes:c,edges:h,eventX:U,eventY:Q,type:V});if(X){const[G,et]=X;s(G,et,"patch")}}function ct(V,tt,rt){const K=V.data();let k=[...c],j=[...h];function R(U){const Q=U.translateX||0;return U.expand===!1?Q-(U.width-Bn)/2:Q}function B(U){const Q=U.translateY||0;return U.expand===!1?Q-(U.height-Un)/2:Q}F.map(K,U=>{const Q=Fr(k,U.id),X=Q.length>1,G=X?rt.x-tt[U.id].offsetX:R(U),et=X?rt.y-tt[U.id].offsetY:B(U);delete U.translateX,delete U.translateY;const it=M({chain:Q,eventX:G,eventY:et,nodes:k,edges:j,isMultipleMove:K&&K.length>1,type:rt.type});it&&([k,j]=it)}),V.remove(),s(k,j,"patch")}(0,E.useEffect)(()=>{let V=0,tt=0,rt=0,K=0,k=!1,j=!1;const R={};let B=null;if(e.current){B=be(e.current);let U=!1,Q=[],X=null,G=[],et=[];n?B.on(".drag",null):B.call(Zo().on("start",it=>{k=!1,l==null||l.svg.classed("draging-node",!0),Q=t1(g||[],c||[]),j=P(Q,c||[],it.type),j?F.map(Q,at=>{const ut=On(c||[],(at==null?void 0:at.id)||""),wt=it.x-((ut==null?void 0:ut.relativeX)||0),yt=it.y-((ut==null?void 0:ut.relativeY)||0),ht=it.x-((ut==null?void 0:ut.x)||0),bt=it.y-((ut==null?void 0:ut.y)||0);R[(at==null?void 0:at.id)||""]={relativeOffsetX:wt,relativeOffsetY:yt,offsetX:ht,offsetY:bt}}):(X=On(c||[],t.data.id)||null,V=it.x-((X==null?void 0:X.relativeX)||0),tt=it.y-((X==null?void 0:X.relativeY)||0),rt=it.x-((X==null?void 0:X.x)||0),K=it.y-((X==null?void 0:X.y)||0))}).on("drag",it=>{U?(k=!0,j?A(j,R,it):_(X,it.x-V,it.y-tt,et)):(!d&&(l==null||l.svg.classed("draging-node-copy",it.type==="shift")),et=G.length>1?G[G.length-2].children:c,et=F.map(et,at=>On(c||[],(at==null?void 0:at.id)||"")).filter(at=>((at==null?void 0:at.id)||"")!==t.data.id&&!(at!=null&&at.rotateDeg)),U=!0)}).on("end",it=>{U=!1,l==null||l.svg.classed("draging-node",!1),l==null||l.svg.classed("draging-node-copy",!1),k&&(j?ct(j,R,it):nt({type:it.type,eventX:it.x-rt,eventY:it.y-K,chain:G}))}).container(function(){var it;let at=(it=this==null?void 0:this.parentNode)==null?void 0:it.parentNode;return G=Fr(c||[],t.data.id),(O||t.data.rotateDeg)&&(at=F.reduce(G,ut=>{var wt;return(wt=ut==null?void 0:ut.parentNode)==null?void 0:wt.parentNode},this)),at==null?void 0:at.parentNode}))}return()=>{B&&B.on(".drag",null)}})}const $g=(t,e)=>`linking-target~@~${t.id}~|~${e}`,aE=t=>{const e=(0,E.useRef)(null),{state:n,insertEdge:i}=ce(O=>O),{node:a,disabled:s}=t,{svgInfo:l,nodes:c}=n,{width:h,height:d,x:g,y:v,rotateDeg:p}=a,b=[{x:h/2,y:0,direct:qt.TOP},{x:h,y:d/2,direct:qt.RIGHT},{x:h/2,y:d,direct:qt.BOTTOM},{x:0,y:d/2,direct:qt.LEFT}];return(0,E.useEffect)(()=>{var O;const C=be(e.current),w=C.selectAll(".connect-anchors-pointer").data(b),S=be((O=e==null?void 0:e.current)==null?void 0:O.parentNode);let P=!1,A=!1,_=0,L=0,I=0,M=0,nt=null,ct=0,V=null;function tt(G){var et;(et=l==null?void 0:l.svg)==null||et.classed("linking",G),S.classed("linking-source-node",G),C.classed("connect-anchors-source",G)}function rt(G,et,it,at){const[ut,wt]=[0,4],yt=it-G,ht=at-it,bt=Math.sqrt(yt*yt+ht*ht),fe=yt/bt,Jt=ht/bt,Te=G+ut*fe,Ze=et+ut*Jt,jt=it-wt*fe,re=at-wt*Jt;return`M ${Te},${Ze} L ${jt},${re}`}function K(){const[G,et,it,at]=[((nt==null?void 0:nt.relativeX)||0)+_,((nt==null?void 0:nt.relativeY)||0)+L,((nt==null?void 0:nt.relativeX)||0)+I,((nt==null?void 0:nt.relativeY)||0)+M],ut=rt(G,et,it,at);l==null||l.newLine.attr("d",ut)}function k(G){_=0,L=0,I=0,M=0,nt=null,A=!1,P=!1,l==null||l.newLine.attr("d","M 0 0").attr("opacity",0),V=V||be(G),V.empty()||V.classed("connect-anchors-pointer-source",!1)}function j(G){const{edgeProps:{defaultNewEdgeStyle:et}={defaultNewEdgeStyle:{}}}=n,it=l==null?void 0:l.svg.attr("class").split(" "),at=F.find(it,ut=>F.includes(ut,"linking-target"));if(at){const[,ut]=at.split("~@~"),[wt,yt]=ut.split("~|~"),ht=Mt(Z({},F.mergeWith({},et,{label:"new link",type:zr.STRAIGHT},(bt,fe)=>bt||fe)),{id:ro(),source:a.id,sourceDirection:G.direct,target:wt,targetDirection:yt});i(ht)}}const R=(G,et)=>ct?Xn({node:a,deg:ct,coord:{x:G-a.width/2,y:et-a.height/2}}):{x:G,y:et},B=G=>{if(A){if(tt(!0),V=be(G),V.empty())return;V.classed("connect-anchors-pointer-source",!0),P=!0,l==null||l.newLine.attr("opacity",1).attr("marker-end","url(#arrow)"),nt=On(c||[],(a==null?void 0:a.id)||""),ct=sl(c||[],a);const et=R(_,L);_=et.x,L=et.y}};function U(G){const et=R(G.x,G.y);I=et.x,M=et.y,K()}function Q(G,et){tt(!1),j(et),k(G)}const X=Zo().on("start",G=>{A=!1,_=G.x,L=G.y,P=!1}).on("drag",function(G){A=!0,P?U(G):B(this)}).on("end",function(G,et){A&&Q(this,et)});return s?w.on(".drag",null):w.call(X),w.on("mouseenter",(G,et)=>{var it,at;(it=l==null?void 0:l.svg)!=null&&it.classed("linking")&&((at=l==null?void 0:l.svg)==null||at.classed($g(a,et.direct),!0))}).on("mouseleave",(G,et)=>{var it;(it=l==null?void 0:l.svg)==null||it.classed($g(a,et.direct),!1)}),()=>{!w.empty()&&w.on(".drag",null)}},[e.current,g,v,h,d,p]),W.jsx("g",{ref:e,className:"connect-anchors",children:F.map(b,({x:O,y:C},w)=>W.jsxs("g",{className:"connect-anchors-pointer",transform:`translate(${O}, ${C})`,children:[W.jsx("circle",{className:"outside",r:9}),W.jsx("circle",{className:"surround",r:8}),W.jsx("circle",{className:"core",r:4})]},w+O+C))})},Vr=20,sE=({node:t,disabled:e})=>{const n=(0,E.useRef)(null),{state:i,resizeNode:a}=ce(d=>d),s=[{x:0,y:0,cursor:"nwse-resize",resize(d,g){const{relativeX:v=0,relativeY:p=0,width:b,height:O}=g;return{x:d.x>b?v+b:v+d.x,y:d.y>O?p+O:p+d.y,width:Math.abs(b-d.x),height:Math.abs(O-d.y)}}},{x:(t==null?void 0:t.width)||0,y:0,cursor:"nesw-resize",resize(d,g){const{relativeX:v=0,relativeY:p=0,height:b}=g;return{x:d.x>0?v:v+d.x,y:d.y<b?p+d.y:p+b,width:Math.abs(d.x),height:Math.abs(b-d.y)}}},{x:0,y:(t==null?void 0:t.height)||0,cursor:"nesw-resize",resize(d,g){const{relativeX:v=0,relativeY:p=0,width:b}=g;return{x:d.x<b?v+d.x:v+b,y:d.y>0?p:p+d.y,width:Math.abs(b-d.x),height:Math.abs(d.y)}}},{x:(t==null?void 0:t.width)||0,y:(t==null?void 0:t.height)||0,cursor:"nwse-resize",resize(d,g){const{relativeX:v=0,relativeY:p=0}=g;return{x:d.x>0?v:v+d.x,y:d.y>0?p:p+d.y,width:Math.abs(d.x),height:Math.abs(d.y)}}}];function l(d){a(t,d)}function c({currentNode:d,rect:g,restrict:v}){const{maxWidth:p,maxHeight:b,minWidth:O,minHeight:C}=v,w=Z({},g),S=typeof O=="function"?O(d,g):O;S&&g.width<S&&(w.width=S);const P=typeof C=="function"?C(d,g):C;P&&g.height<P&&(w.height=P);const A=typeof p=="function"?p(d,g):p;A&&g.width>A&&(w.width=A);const _=typeof b=="function"?b(d,g):b;return _&&g.height>_&&(w.height=_),w}function h(d){return d&&F.isNumber(d.x)&&F.isNumber(d.y)&&F.isNumber(d.width)&&F.isNumber(d.height)}return(0,E.useEffect)(()=>{const{nodes:d,svgInfo:g,nodeProps:v}=i;if(e||!g)return;const p=F.pick(v||{},["maxWidth","maxHeight","minWidth","minHeight"]),b=be(n.current).selectAll("rect.bg").data(s);let O=!1,C,w,S={x:0,y:0,width:0,height:0};const{resizeWrap:P,svg:A}=g;return b.call(Zo().on("start",()=>{O=!1,S={x:0,y:0,width:0,height:0},P.attr("opacity",1),A.classed("resizing-node",!0),C=A.style("cursor"),A.style("cursor","crosshair"),w=On(d||[],(t==null?void 0:t.id)||"")||{width:0,height:0,x:0,y:0}}).on("drag",(_,L)=>{O=!0,S=L.resize(_,w),S=c({currentNode:w,rect:S,restrict:p}),P.attr("d",`M ${S.x} ${S.y} h ${S.width} v ${S.height} H ${S.x} Z`),t!=null&&t.rotateDeg&&g.resizeWrap.attr("transform",`rotate(${t.rotateDeg} ${((w==null?void 0:w.relativeX)||0)+t.width/2} ${((w==null?void 0:w.relativeY)||0)+t.height/2})`)}).on("end",()=>{if(O){if(P.attr("d","M 0 0").attr("opacity",0).attr("transform",""),A.classed("resizing-node",!1),A.style("cursor",C),t!=null&&t.rotateDeg){const _=S.x+S.width/2,L=S.y+S.height/2,I=((w==null?void 0:w.relativeX)||0)+((w==null?void 0:w.width)||0)/2,M=((w==null?void 0:w.relativeY)||0)+((w==null?void 0:w.height)||0)/2,nt=_-I,ct=L-M,V=Xn({node:t,deg:t.rotateDeg,coord:{x:nt,y:ct}}),tt=((w==null?void 0:w.relativeX)||0)+V.x,rt=((w==null?void 0:w.relativeY)||0)+V.y,K=tt-_,k=rt-L;S.x+=K,S.y+=k}if(S.x=((w==null?void 0:w.x)||0)-(((w==null?void 0:w.relativeX)||0)-S.x),S.y=((w==null?void 0:w.y)||0)-(((w==null?void 0:w.relativeY)||0)-S.y),v!=null&&v.beforeResize&&typeof v.beforeResize=="function"){const _=v.beforeResize(w,S);_&&(h(_)?l(_):l(S))}else l(S)}})),()=>{b.on(".drag",null)}}),W.jsx("g",{className:le("resize-anchors",{"resize-anchors-disabled":e}),ref:n,children:F.map(s,({x:d,y:g,cursor:v},p)=>W.jsxs(E.Fragment,{children:[W.jsx("rect",{className:le("ft",{"middle-resize":v.length<11}),x:d-Vr/4,y:g-Vr/4,width:Vr/2,height:Vr/2,style:{cursor:v}}),W.jsx("rect",{className:le("bg",{"middle-resize":v.length<11}),x:d-Vr/2,y:g-Vr/2,width:Vr,height:Vr,style:{cursor:v}})]},d+g+p))})},uE=t=>{const e=(0,E.useRef)(null),n=t==null?void 0:t.data,{connectDisabled:i,resizeDisabled:a,rotateDisabled:s,dragDisabled:l}=n||{},{state:c,setSelectedNodes:h}=ce(S=>S),{selectedNodes:d=[],nodes:g=[],nodeProps:v}=c,p=F.some(d,S=>S.id===(n==null?void 0:n.id));let b=!1;function O(){const S=[...d],P=F.findIndex(S,A=>A.id===(n==null?void 0:n.id));P>-1?S.splice(P,1):n&&S.push(n),h(S)}const C=F.debounce(S=>{if(S.ctrlKey)O();else if(!b){const P=On(g,(n==null?void 0:n.id)||""),A=P==null?void 0:P.onClick;if(typeof A=="function")return A(n,c);n&&h([n])}b=!1},200),w=S=>{S.persist(),C(S)};return oE({props:t,nodeProps:v,ref:e,dragDisabled:l}),W.jsx("g",{className:le("node",n==null?void 0:n.className,{"node-selected":p}),transform:Gy(n),children:W.jsxs("g",{className:le("node-shape",{"node-shape-connect-disabled":i,"node-shape-resize-disabled":a,"node-shape-rotate-disabled":s}),onClick:w,children:[W.jsx("rect",{x:"0",y:"0",className:"node-shape-bg",width:n==null?void 0:n.width,height:n==null?void 0:n.height}),W.jsx("g",{ref:e,children:t.children}),W.jsx(sE,{node:t.data,disabled:a}),W.jsx(aE,{node:n,disabled:i||!1})]})})},lE=({data:t,shapes:e})=>{function n(a){const d=a||{},{fillColor:s,strokeColor:l}=d,c=jr(d,["fillColor","strokeColor"]),h=Z({fill:s,stroke:l},c);return F.mergeWith({},h,(g,v)=>g||v)}const i=a=>{var s;const l=[...Rg,...e],c=F.find(l,h=>h.shape===a.shape);if(c){const h=n((a==null?void 0:a.style)||c.style),d=Mt(Z({},a),{style:h});return W.jsx(uE,{shapes:e,data:d,children:(s=c==null?void 0:c.component)==null?void 0:s.call(c,d)},a.id)}};return W.jsx("g",{className:"nodes-container",children:F.map(t,i)})},cE=(0,E.forwardRef)((t,e)=>{const{state:n}=ce(s=>s),{uniqId:i}=n,a=[{key:"resizeWrap",className:"resize-rect",component:W.jsx("path",{})},{key:"newLine",className:"new-line",component:W.jsx("path",{stroke:"#7bed9f",strokeDasharray:"4,4",fill:"none",strokeWidth:"2",style:{pointerEvents:"none"}})},{key:"newDragLine",className:"new-drag-line",component:W.jsx("path",{strokeDasharray:"5,5",fill:"none",strokeWidth:"2"})},{key:"dragingNode",className:"draging-node",component:W.jsx("rect",{})}];return W.jsx("g",{ref:e,className:"auxiliary",children:F.map(a,({key:s,component:l,className:c})=>E.cloneElement(l,{key:s,className:c,id:`${c}-${i}`,"data-svg-key":s}))})});function fE(t,e){const{state:n}=ce(v=>v),{edgeProps:i}=n,{label:a,centerX:s,centerY:l,pathD:c}=e,h=F.mergeWith({},e.labelProps,i==null?void 0:i.labelProps,(v,p)=>v||p),d=F.mergeWith({},e.style,i==null?void 0:i.style,(v,p)=>v||p),g=v=>{let p=0,b=20;for(;p<al;){const O=a==null?void 0:a.slice(0,al/b--);v.text(`${O}...`),p=v.node().getBBox().width}};(0,E.useLayoutEffect)(()=>{const v=be(t.current),p=v.selectAll("rect"),b=v.select("text"),O=h==null?void 0:h.padding,C=h.paddingHorizon||O||12,w=h.paddingVertical||O||4,S=b.node();if(S){let P=S.getBBox();typeof a=="string"&&P.width>al&&(g(b),P=S.getBBox()),p.attr("y",P.y-w/2),p.attr("x",P.x-C/2),p.attr("width",P.width+C),p.attr("height",P.height+w);const A={x:s,y:0};(e==null?void 0:e.type)==="broken"||(e==null?void 0:e.type)==="broken-rounded"?A.y=l+P.height/2+P.y/4:A.y=l+4,v.attr("transform",`translate(${A.x}, ${A.y})`)}},[name,c,s,l,e.type,d])}function hE(t,e){return W.jsxs("defs",{children:[W.jsx("marker",{id:t,markerWidth:"12",markerHeight:"12",refX:"8.5",refY:"6",orient:"auto",children:W.jsx("path",{d:"M6,4 L9,6 L6,8 L6,4",fill:e})}),W.jsx("marker",{id:`DOUBLE-${t}`,markerWidth:"12",markerHeight:"12",refX:"8.5",refY:"6",orient:"auto",children:W.jsx("path",{d:"M11,4 L8,6 L11,8 L11,4",fill:e})})]})}const dE=t=>{const e=(0,E.useRef)(null),{data:n}=t,{label:i,centerX:a,centerY:s,pathD:l,className:c,labelProps:h}=n,{state:d}=ce(A=>A),{uniqId:g,selectedEdges:v,edgeProps:p}=d,b=F.some(v,A=>A.id===n.id),O=F.mergeWith({},n.style,p==null?void 0:p.style,(A,_)=>A||_),C=`arrow-${n.id}`,w=O.strokeColor||O.stroke;fE(e,n);const S=A=>F.reduce(F.keys(A),(_,L)=>{const I=A[L];return typeof I=="function"&&(_[L]=M=>{var nt,ct;if(M.preventDefault(),M.stopPropagation(),L==="onContextMenu"){const V=(ct=(nt=e.current)==null?void 0:nt.getBoundingClientRect)==null?void 0:ct.call(nt);I({edge:n,state:d,options:{event,labelBoundingrect:V}})}else I({edge:n,state:d,event})}),_},{}),P=(A,_,L="")=>{const{arrowType:I}=_;let M=null;I&&I==="DOUBLE_ARROW"&&(M=`DOUBLE-${A}`);const nt=A||"arrow",ct=S(F.pick(h,["onClick","onContextMenu","onMouseEnter","onMouseLeave"])),it=O,{textColor:V,fontSize:tt,fillColor:rt,strokeColor:K}=it,k=jr(it,["textColor","fontSize","fillColor","strokeColor"]),at=h||{},{textColor:j,fontSize:R,fill:B}=at,U=jr(at,["textColor","fontSize","fill"]),Q=l&&i;k.stroke=K||k.stroke,k.fill=rt||k.fill;const X=W.jsxs("g",Mt(Z({ref:e,className:"title"},ct),{transform:h==null?void 0:h.transform,children:[W.jsx("rect",Z({className:"back",fill:L||B||"#8586a3",rx:4,ry:4},F.pick(U,["stroke","strokeWidth","rx","ry"]))),W.jsx("text",{textAnchor:"middle",fill:j||V||"white",fontSize:R||tt||12,children:i}),W.jsx("title",{children:i})]})),G=W.jsxs(E.Fragment,{children:[W.jsx("path",{className:"bg",d:l,filter:"url(#highlight-edge-blur)"}),W.jsx("path",Z({className:"ft",d:l,strokeWidth:2,stroke:(k==null?void 0:k.stroke)||"#A1A2BB",fill:(k==null?void 0:k.fill)||"transparent",markerEnd:`url(#${nt})`,markerStart:M?`url(#${M})`:""},F.pick(k,["strokeWidth","strokeDasharray"]))),Q?X:null]}),et=[Mt(Z({},_),{pathD:l,centerX:a,centerY:s,style:O,markerEnd:nt,markerStart:M}),d];switch(!0){case F.has(p,"renderEdge"):return typeof(p==null?void 0:p.renderEdge)=="function"&&p.renderEdge(et);case F.has(p,"renderEdgeBase"):return typeof(p==null?void 0:p.renderEdgeBase)=="function"&&p.renderEdgeBase(G,et);default:return G}};return W.jsxs("g",{id:`${n.id}-${g}`,className:le("edge",c,{"edge-selected":b}),children:[C&&hE(C,w),P(C,n,w)]})},gE=E.memo(({data:t})=>{const e=t.filter(n=>n.pathD);return W.jsx("g",{className:"edges-container",children:e.map(n=>W.jsx(dE,{data:n},n==null?void 0:n.id))})});function pE(){return W.jsxs("g",{className:"marquee-wrap",children:[W.jsx("path",{className:"marquee-select"}),W.jsx("path",{className:"marquee-select-copy"})]})}const vE=(0,E.forwardRef)((t,e)=>{const n=(0,E.useRef)(null),i=(0,E.useRef)(null),a=ce(v=>v),{shapes:s=[],hideGrid:l,className:c}=t,{nodes:h,edges:d}=a.state,g=T1(n);return(0,E.useEffect)(()=>{a.setCanvasSize(g)},[g]),tE(n,i,t),rE(n),iE(t),(0,E.useImperativeHandle)(e,()=>a),W.jsxs("svg",{ref:n,className:le(c,"fiagram-canvas",{hideGrid:l}),style:Z({},t.canvasStyle),children:[W.jsxs("g",{className:"zoom-area",children:[W.jsx(lE,{data:h||[],shapes:s}),W.jsx(gE,{data:d||[]}),W.jsx(cE,{ref:i})]}),W.jsx(pE,{})]})}),mE=()=>{const{t}=Ur(),e=[{key:"1",title:t("translation:horizonAlign"),icon:"icon-vertically-centered"},{key:"2",title:t("translation:horizonCenter"),icon:"icon-distributions-centered"},{key:"3",title:t("translation:horizonLayout"),icon:"icon-horizontal-centered"}];return W.jsx(Wr,{group:e,trigger:"hover",placement:"bottom"})};function js(t,e){const n={x:-t.width/2,y:-t.height/2},i={x:t.width/2,y:-t.height/2},a={x:-t.width/2,y:t.height/2},s={x:t.width/2,y:t.height/2};return F.map([n,i,a,s],l=>Xn({node:t,deg:e,coord:l}))}function yE(t,e){if(!t)return{x:0,y:0,coord:{x:0,y:0}};const n=(t==null?void 0:t.relativeX)||0,i=(t==null?void 0:t.relativeY)||0;if(!e)return{x:n,y:i,coord:{x:0,y:0}};const a=t.absRotateDeg!==0?"rotated":"notRotate";return{rotated:{[Xt.TOP]:()=>{const s=F.minBy(js(t,t.absRotateDeg),"y")||{x:0,y:0};return{x:n+s.x,y:i+s.y,coord:s}},[Xt.LEFT]:()=>{const s=F.minBy(js(t,t.absRotateDeg),"x")||{x:0,y:0};return{x:n+s.x,y:i+s.y,coord:s}},[Xt.RIGHT]:()=>{const s=F.maxBy(js(t,t.absRotateDeg),"x")||{x:0,y:0};return{x:n+s.x,y:i+s.y,coord:s}},[Xt.BOTTOM]:()=>{const s=F.maxBy(js(t,t.absRotateDeg),"y")||{x:0,y:0};return{x:n+s.x,y:i+s.y,coord:s}},[Xt.VERTICAL]:()=>({x:n+t.width/2,y:i+t.height/2,coord:{x:0,y:0}}),[Xt.HORIZON]:()=>({x:n+t.width/2,y:i+t.height/2,coord:{x:0,y:0}})},notRotate:{[Xt.TOP]:()=>({x:n,y:i}),[Xt.LEFT]:()=>({x:n,y:i+t.height}),[Xt.RIGHT]:()=>({x:n+t.width,y:i}),[Xt.BOTTOM]:()=>({x:n+t.width,y:i+t.height}),[Xt.VERTICAL]:()=>({x:n+t.width/2,y:i+t.height/2}),[Xt.HORIZON]:()=>({x:n+t.width/2,y:i+t.height/2})}}[a][e]()}const bE={[Xt.TOP]:t=>F.minBy(t,e=>e.y),[Xt.LEFT]:t=>F.minBy(t,e=>e.x),[Xt.RIGHT]:t=>F.maxBy(t,e=>e.x),[Xt.BOTTOM]:t=>F.maxBy(t,e=>e.y),[Xt.VERTICAL]:t=>{var e,n;const i=((e=F.minBy(t,s=>s.x))==null?void 0:e.x)||0,a=((n=F.maxBy(t,s=>s.x))==null?void 0:n.x)||0;return{x:i+(a-i)/2}},[Xt.HORIZON]:t=>{var e,n;const i=((e=F.minBy(t,s=>s.y))==null?void 0:e.y)||0,a=((n=F.maxBy(t,s=>s.y))==null?void 0:n.y)||0;return{y:i+(a-i)/2}}};function wE({node:t,direct:e,corner:n,corners:i}){var a;const s=(a=i.find(l=>l[(t==null?void 0:t.id)||""]))==null?void 0:a[(t==null?void 0:t.id)||""];switch(e){case Xt.TOP:t.y=n.y,s&&(t.y-=s.y);break;case Xt.LEFT:t.x=n.x,s&&(t.x-=s.x);break;case Xt.RIGHT:t.x=n.x-t.width,s&&(t.x-=s.x-t.width);break;case Xt.BOTTOM:t.y=n.y-t.height,s&&(t.y-=s.y-t.height);break;case Xt.VERTICAL:t.x=n.x-t.width/2;break;case Xt.HORIZON:t.y=n.y-t.height/2;break;default:throw new Error("wrong direct")}return t}function xE(t,e){switch(e){case Xt.TOP:case Xt.BOTTOM:case Xt.HORIZON:t.x=t.relativeX;break;default:t.y=t.relativeY;break}return t}function _E(t,e,n){const i=[...n],a=F.map(t,({id:l})=>{const c=On(i,l||"")||{id:"",x:0,y:0,width:0,height:0},{x:h,y:d,coord:g}=yE(c,e),v={x:h,y:d,[(c==null?void 0:c.id)||""]:g,node:Z({},c)};return c!=null&&c.absRotateDeg&&(v.node.rotateDeg=c.absRotateDeg),v}),s=bE[e](a);return F.filter(a,({node:l})=>!F.has(s,(l==null?void 0:l.id)||"")).map(({node:l})=>(l=wE({node:l,direct:e,corner:s,corners:a}),xE(l,e)))}const Ig=()=>{const{t}=Ur(),{state:e,getState:n,updateNodes:i}=ce(d=>d),{selectedNodes:a=[],marqueeNodes:s=[]}=e,l=(a==null?void 0:a.length)+(s==null?void 0:s.length)<2,c=d=>{const{nodes:g=[],selectedNodes:v=[],marqueeNodes:p=[]}=n(),b=(v==null?void 0:v.concat(p))||[];if(!F.isEmpty(b)){const O=_E(b,d,g),C=F.reduce(O,(w,S)=>Eh({nodes:w,node:Mt(Z({},S),{relativeX:S.x,relativeY:S.y})}),[...g]);i(C)}},h=[{key:"TOP",title:t("translation:topAlign"),icon:"icon-top-aligned"},{key:"BOTTOM",title:t("translation:bottomAlign"),icon:"icon-bottom-aligned"},{key:"LEFT",title:t("translation:leftAlign"),icon:"icon-left-aligned"},{key:"RIGHT",title:t("translation:rightAlign"),icon:"icon-right-aligned"},{key:"VERTICAL",title:t("translation:verticalAlign"),icon:"icon-vertical-aligned"},{key:"HORIZON",title:t("translation:horizonAlign"),icon:"icon-horizontal-aligned"}].map(d=>Mt(Z({},d),{disabled:l,title:l?`${d.title}(${t("translation:pleaseSelectAtLeastTwoNodes")})`:d.title,onClick:()=>c(Xt[d.key])}));return W.jsx(Wr,{group:h})},SE=function(t){const e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;e&&e.call(t);const n={};return n.on=(i,a)=>{i==="esc"&&EE(a)},n};function EE(t){const e=()=>{!document.fullscreenElement&&!document.webkitIsFullScreen&&!document.mozFullScreen&&!document.msFullscreenElement&&(document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),t())};document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e)}function OE(){const t=document.exitFullscreen||document.webkitExitFullscreen||document.mozExitFullscreen||document.msExitFullscreen;t&&t.call(document)}const Pg=()=>{const{state:t}=ce(v=>v),{svgInfo:e}=t,[n,i]=(0,E.useState)(!!document.fullscreenElement),[a,s]=(0,E.useState)(""),{t:l}=Ur(),c=n?"icon-exit-fullscreen":"icon-fullscreen",h=l(n?"translation:exitFullScreen":"translation:fullScreen"),d=()=>{setTimeout(()=>{Ss(e||{},600)},700)},g=()=>{var v,p,b,O;if(n)(v=e==null?void 0:e.svgDOM)==null||v.setAttribute("style",a),OE();else{const C=((p=e==null?void 0:e.svgDOM)==null?void 0:p.getAttribute("style"))||"";s(C),(b=e==null?void 0:e.svgDOM)==null||b.setAttribute("style",`${a}width: 100%; height: 100%;`),SE((O=e==null?void 0:e.svgDOM)==null?void 0:O.parentNode).on("esc",()=>{var w;(w=e==null?void 0:e.svgDOM)==null||w.setAttribute("style",C),i(!1),d()})}i(!n),d()};return(0,E.useEffect)(()=>{const v=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",v),()=>{document.removeEventListener("fullscreenchange",v)}},[]),W.jsx(Wr,{group:[{key:"1",title:h,icon:c,onClick:g}]})},jg=()=>{const{t}=Ur(),{state:e}=ce(a=>a),n=()=>{e.svgInfo&&Ss(e.svgInfo,1e3)},i=()=>{e.svgInfo&&Ss(e.svgInfo,1e3,1)};return W.jsx(Wr,{group:[{key:"1",title:t("translation:center"),icon:"icon-center",onClick:n},{key:"2",title:"1:1",icon:"icon-adaptive",onClick:i}]})},Lg=()=>{const{t}=Ur(),{state:e}=ce(s=>s),{svgInfo:n}=e,i={zoomOut:-.35,zoomIn:.35},a=s=>{if(!n)return;const l=i[s],c=ua(n.svg.node()).k*(1+l);n.svg.transition().duration(500).call(n.zoom.scaleTo,c)};return W.jsx(Wr,{group:[{key:"zoomIn",title:t("translation:zoomIn"),icon:"icon-zoom-in",onClick:()=>a("zoomIn")},{key:"zoomOut",title:t("translation:zoomOut"),icon:"icon-zoom-out",onClick:()=>a("zoomOut")}]})},Mg=()=>{const{t}=Ur(),{state:e,getState:n,deleteNodeByIds:i,deleteEdgeByIds:a,setSelectedNodes:s,setMarqueeNodes:l,setSelectedEdges:c}=ce(C=>C),h=t("translation:delete"),{svgInfo:d,selectedEdges:g=[],selectedNodes:v=[],marqueeNodes:p=[]}=e,b=!(g!=null&&g.length)&&!(v!=null&&v.length)&&!(p!=null&&p.length),O=()=>{const{selectedEdges:C=[],selectedNodes:w=[],marqueeNodes:S=[]}=n();if(!d)return;const P=w.concat(S).map(_=>(_==null?void 0:_.id)||""),A=C.map(_=>(_==null?void 0:_.id)||"");!P.length&&!A.length||(P.length&&(i(P),S.length&&(sc(d),l([])),w.length&&s([])),A.length&&(a(A),c([])))};return W.jsx(Wr,{group:[{key:"delete",title:b?`${h}(${t("translation:pleaseSelectAtLeastOneNode")})`:h,icon:"icon-delete",keyCodes:[ol.Delete,ol.Backspace],onClick:O,onKeyDown:O,disabled:b}]})},Yn=({children:t})=>{const e=W.jsxs(E.Fragment,{children:[W.jsx(Pg,{}),W.jsx(jg,{}),W.jsx(Ng,{}),W.jsx(Lg,{}),W.jsx(Mg,{}),W.jsx(Ig,{})]});return W.jsx("div",{className:"fiagram-tools",children:t!=null&&t.length?t:e})};Yn.Align=Ig,Yn.AutoLayout=mE,Yn.FullScreen=Pg,Yn.Scale=jg,Yn.Marquee=Ng,Yn.Zoom=Lg,Yn.Delete=Mg,Yn.displayName="Tools";const DE=t=>{const{isDragging:e,initialOffset:n,currentOffset:i}=Qm(a=>({item:a.getItem(),itemType:a.getItemType(),initialOffset:a.getInitialSourceClientOffset(),currentOffset:a.getSourceClientOffset(),isDragging:a.isDragging()}));return e?W.jsx("div",{style:{position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0},children:W.jsx("div",{style:eE(n,i),children:t.children})}):null},CE=({component:t,label:e,nodeInfo:n})=>{const{state:{uniqId:i}}=ce(h=>h),[{isDragging:a},s,l]=Jm({type:`${wh}-${i}`,item:Z({label:e},n),collect:h=>({isDragging:h.isDragging()})});(0,E.useEffect)(()=>{l(wy(),{captureDraggingState:!0})},[]);const c=()=>W.jsx("div",{className:le("fiagram-panel-view-drag-item"),children:W.jsx("span",{className:"fiagram-panel-view-drag-item-icon",children:t==null?void 0:t(Z({label:e},n))})});return W.jsxs(W.Fragment,{children:[W.jsx("div",{ref:s,children:W.jsx(c,{},"source")}),W.jsx(DE,{children:W.jsx("div",{style:{opacity:a?1:0},children:W.jsx(c,{},"layer")})})]})},kE=({dragList:t})=>t==null?void 0:t.map(i=>{var a=i,{shape:e}=a,n=jr(a,["shape"]);return W.jsx(CE,Z({shape:e},n),e)}),TE=t=>{const{mode:e="flow",title:n,dragList:i=[]}=t,{state:{height:a=0}}=ce(l=>l),s=a>0?a-120:"auto";return W.jsxs("div",{className:le("fiagram-panel-view",`fiagram-${e}`),children:[W.jsx("div",{className:"fiagram-panel-view-header",children:n}),W.jsx("div",{className:"fiagram-panel-view-content",style:{maxHeight:s},children:W.jsx(kE,{dragList:i})})]})},uc=({children:t})=>{const{t:e}=Ur(),n=[{key:"1",title:e("translation:flow-chart"),icon:"icon-topology",overlay:W.jsx(TE,{title:e("translation:flow-chart"),dragList:Rg,mode:"flow"})},{key:"2",title:e("translation:resource"),icon:"icon-server",overlay:W.jsx("div",{children:"123"})},{key:"3",title:e("translation:more"),icon:"icon-more"}],i=W.jsx(E.Fragment,{children:W.jsx(Wr,{group:n,trigger:["click"],placement:"rightTop"})});return W.jsx("div",{className:"fiagram-tools vertical left-top",children:t!=null&&t.length?t:i})};uc.displayName="DragPanel";const AE=t=>{let e=null,n=null;const i=[],a=s=>{if(s&&typeof s=="object"){const{type:l}=s;l&&l.displayName?l.displayName==="DragBox"?n=s:l.displayName==="Tools"?e=s:i.push(s):i.push(s)}else i.push(s)};return Array.isArray(t)?t.forEach(s=>{a(s)}):a(t),{toolsChild:e,dragBoxChild:n,restChilds:i}},NE={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Ls{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||NE,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,i,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Ls(this.logger,Z({prefix:`${this.prefix}:${e}:`},this.options))}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ls(this.logger,e)}}var qn=new Ls;class Ms{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const a=this.observers[i].get(n)||0;this.observers[i].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(s=>{let[l,c]=s;for(let h=0;h<c;h++)l(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[l,c]=s;for(let h=0;h<c;h++)l.apply(l,[e,...i])})}}function da(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});return n.resolve=t,n.reject=e,n}function zg(t){return t==null?"":""+t}function RE(t,e,n){t.forEach(i=>{e[i]&&(n[i]=e[i])})}const $E=/###/g;function ga(t,e,n){function i(c){return c&&c.indexOf("###")>-1?c.replace($E,"."):c}function a(){return!t||typeof t=="string"}const s=typeof e!="string"?e:e.split(".");let l=0;for(;l<s.length-1;){if(a())return{};const c=i(s[l]);!t[c]&&n&&(t[c]=new n),Object.prototype.hasOwnProperty.call(t,c)?t=t[c]:t={},++l}return a()?{}:{obj:t,k:i(s[l])}}function Fg(t,e,n){const{obj:i,k:a}=ga(t,e,Object);if(i!==void 0||e.length===1){i[a]=n;return}let s=e[e.length-1],l=e.slice(0,e.length-1),c=ga(t,l,Object);for(;c.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),c=ga(t,l,Object),c&&c.obj&&typeof c.obj[`${c.k}.${s}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${s}`]=n}function IE(t,e,n,i){const{obj:a,k:s}=ga(t,e,Object);a[s]=a[s]||[],a[s].push(n)}function zs(t,e){const{obj:n,k:i}=ga(t,e);if(n)return n[i]}function PE(t,e,n){const i=zs(t,n);return i!==void 0?i:zs(e,n)}function Bg(t,e,n){for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in t?typeof t[i]=="string"||t[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?n&&(t[i]=e[i]):Bg(t[i],e[i],n):t[i]=e[i]);return t}function po(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var jE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function LE(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>jE[e]):t}class ME{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const zE=[" ",",","?","!",";"],FE=new ME(20);function BE(t,e,n){e=e||"",n=n||"";const i=zE.filter(l=>e.indexOf(l)<0&&n.indexOf(l)<0);if(i.length===0)return!0;const a=FE.getRegExp(`(${i.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!a.test(t);if(!s){const l=t.indexOf(n);l>0&&!a.test(t.substring(0,l))&&(s=!0)}return s}function lc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const i=e.split(n);let a=t;for(let s=0;s<i.length;){if(!a||typeof a!="object")return;let l,c="";for(let h=s;h<i.length;++h)if(h!==s&&(c+=n),c+=i[h],l=a[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&h<i.length-1)continue;s+=h-s+1;break}a=l}return a}function Fs(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class Ug extends Ms{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],i&&(Array.isArray(i)?c.push(...i):typeof i=="string"&&s?c.push(...i.split(s)):c.push(i)));const h=zs(this.data,c);return!h&&!n&&!i&&e.indexOf(".")>-1&&(e=c[0],n=c[1],i=c.slice(2).join(".")),h||!l||typeof i!="string"?h:lc(this.data&&this.data[e]&&this.data[e][n],i,s)}addResource(e,n,i,a){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let c=[e,n];i&&(c=c.concat(l?i.split(l):i)),e.indexOf(".")>-1&&(c=e.split("."),a=n,n=c[1]),this.addNamespaces(n),Fg(this.data,c,a),s.silent||this.emit("added",e,n,i,a)}addResources(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in i)(typeof i[s]=="string"||Object.prototype.toString.apply(i[s])==="[object Array]")&&this.addResource(e,n,s,i[s],{silent:!0});a.silent||this.emit("added",e,n,i)}addResourceBundle(e,n,i,a,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),a=i,i=n,n=c[1]),this.addNamespaces(n);let h=zs(this.data,c)||{};l.skipCopy||(i=JSON.parse(JSON.stringify(i))),a?Bg(h,i,s):h=Z(Z({},h),i),Fg(this.data,c,h),l.silent||this.emit("added",e,n,i)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Z({},this.getResource(e,n)):this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var Xg={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,i,a){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,i,a))}),e}};const Hg={};class Bs extends Ms{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),RE(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=qn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,n);return i&&i.res!==void 0}extractFromKey(e,n){let i=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const l=i&&e.indexOf(i)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!BE(e,i,a);if(l&&!c){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:s};const d=e.split(i);(i!==a||i===a&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),e=d.join(a)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,i){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n=Z({},n)),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],n),h=c[c.length-1],d=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(g){const A=n.nsSeparator||this.options.nsSeparator;return a?{res:`${h}${A}${l}`,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:h,usedParams:this.getUsedParamsDetails(n)}:`${h}${A}${l}`}return a?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:h,usedParams:this.getUsedParamsDetails(n)}:l}const v=this.resolve(e,n);let p=v&&v.res;const b=v&&v.usedKey||l,O=v&&v.exactUsedKey||l,C=Object.prototype.toString.apply(p),w=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,P=!this.i18nFormat||this.i18nFormat.handleAsObject;if(P&&p&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&w.indexOf(C)<0&&!(typeof S=="string"&&C==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,p,Mt(Z({},n),{ns:c})):`key '${l} (${this.language})' returned an object instead of string.`;return a?(v.res=A,v.usedParams=this.getUsedParamsDetails(n),v):A}if(s){const A=C==="[object Array]",_=A?[]:{},L=A?O:b;for(const I in p)if(Object.prototype.hasOwnProperty.call(p,I)){const M=`${L}${s}${I}`;_[I]=this.translate(M,Mt(Z({},n),{joinArrays:!1,ns:c})),_[I]===M&&(_[I]=p[I])}p=_}}else if(P&&typeof S=="string"&&C==="[object Array]")p=p.join(S),p&&(p=this.extendTranslation(p,e,n,i));else{let A=!1,_=!1;const L=n.count!==void 0&&typeof n.count!="string",I=Bs.hasDefaultValue(n),M=L?this.pluralResolver.getSuffix(d,n.count,n):"",nt=n.ordinal&&L?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",ct=L&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),V=ct&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${M}`]||n[`defaultValue${nt}`]||n.defaultValue;!this.isValidLookup(p)&&I&&(A=!0,p=V),this.isValidLookup(p)||(_=!0,p=l);const tt=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_?void 0:p,rt=I&&V!==p&&this.options.updateMissing;if(_||A||rt){if(this.logger.log(rt?"updateKey":"missingKey",d,h,l,rt?V:p),s){const R=this.resolve(l,Mt(Z({},n),{keySeparator:!1}));R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const k=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&k&&k[0])for(let R=0;R<k.length;R++)K.push(k[R]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(n.lng||this.language):K.push(n.lng||this.language);const j=(R,B,U)=>{const Q=I&&U!==p?U:tt;this.options.missingKeyHandler?this.options.missingKeyHandler(R,h,B,Q,rt,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(R,h,B,Q,rt,n),this.emit("missingKey",R,h,B,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?K.forEach(R=>{const B=this.pluralResolver.getSuffixes(R,n);ct&&n[`defaultValue${this.options.pluralSeparator}zero`]&&B.indexOf(`${this.options.pluralSeparator}zero`)<0&&B.push(`${this.options.pluralSeparator}zero`),B.forEach(U=>{j([R],l+U,n[`defaultValue${U}`]||V)})}):j(K,l,V))}p=this.extendTranslation(p,e,n,v,i),_&&p===l&&this.options.appendNamespaceToMissingKey&&(p=`${h}:${l}`),(_||A)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}:${l}`:l,A?p:void 0):p=this.options.parseMissingKeyHandler(p))}return a?(v.res=p,v.usedParams=this.getUsedParamsDetails(n),v):p}extendTranslation(e,n,i,a,s){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,Z(Z({},this.options.interpolation.defaultVariables),i),i.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(Mt(Z({},i),{interpolation:Z(Z({},this.options.interpolation),i.interpolation)}));const d=typeof e=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(d){const p=e.match(this.interpolator.nestingRegexp);g=p&&p.length}let v=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(v=Z(Z({},this.options.interpolation.defaultVariables),v)),e=this.interpolator.interpolate(e,v,i.lng||this.language,i),d){const p=e.match(this.interpolator.nestingRegexp),b=p&&p.length;g<b&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(i.lng=a.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,b=new Array(p),O=0;O<p;O++)b[O]=arguments[O];return s&&s[0]===b[0]&&!i.context?(l.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):l.translate(...b,n)},i)),i.interpolation&&this.interpolator.reset()}const c=i.postProcess||this.options.postProcess,h=typeof c=="string"?[c]:c;return e!=null&&h&&h.length&&i.applyPostProcessor!==!1&&(e=Xg.handle(h,e,n,this.options&&this.options.postProcessPassResolved?Z({i18nResolved:Mt(Z({},a),{usedParams:this.getUsedParamsDetails(i)})},i):i,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,a,s,l,c;return typeof e=="string"&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(h,n),g=d.key;a=g;let v=d.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",b=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),O=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",C=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);v.forEach(w=>{this.isValidLookup(i)||(c=w,!Hg[`${C[0]}-${w}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(Hg[`${C[0]}-${w}`]=!0,this.logger.warn(`key "${a}" for languages "${C.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(S=>{if(this.isValidLookup(i))return;l=S;const P=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(P,g,S,w,n);else{let _;p&&(_=this.pluralResolver.getSuffix(S,n.count,n));const L=`${this.options.pluralSeparator}zero`,I=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(P.push(g+_),n.ordinal&&_.indexOf(I)===0&&P.push(g+_.replace(I,this.options.pluralSeparator)),b&&P.push(g+L)),O){const M=`${g}${this.options.contextSeparator}${n.context}`;P.push(M),p&&(P.push(M+_),n.ordinal&&_.indexOf(I)===0&&P.push(M+_.replace(I,this.options.pluralSeparator)),b&&P.push(M+L))}}let A;for(;A=P.pop();)this.isValidLookup(i)||(s=A,i=this.getResource(S,w,A,n))}))})}),{res:i,usedKey:a,exactUsedKey:s,usedLng:l,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,i,a):this.resourceStore.getResource(e,n,i,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&typeof e.replace!="string";let a=i?e.replace:e;if(i&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a=Z(Z({},this.options.interpolation.defaultVariables),a)),!i){a=Z({},a);for(const s of n)delete a[s]}return a}static hasDefaultValue(e){const n="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&n===i.substring(0,n.length)&&e[i]!==void 0)return!0;return!1}}function cc(t){return t.charAt(0).toUpperCase()+t.slice(1)}class Wg{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qn.create("languageUtils")}getScriptPartFromCode(e){if(e=Fs(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Fs(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(a=>a.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=cc(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=cc(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=cc(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(i=>{if(n)return;const a=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(i=>{if(n)return;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(s=>{if(s===a||!(s.indexOf("-")<0&&a.indexOf("-")<0)&&(s.indexOf("-")>0&&a.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===a||s.indexOf(a)===0&&a.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let i=e[n];return i||(i=e[this.getScriptPartFromCode(n)]),i||(i=e[this.formatLanguageCode(n)]),i||(i=e[this.getLanguagePartFromCode(n)]),i||(i=e.default),i||[]}toResolveHierarchy(e,n){const i=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],s=l=>{l&&(this.isSupportedCode(l)?a.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),i.forEach(l=>{a.indexOf(l)<0&&s(this.formatLanguageCode(l))}),a}}let UE=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],XE={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const HE=["v1","v2","v3"],WE=["v4"],Vg={zero:0,one:1,two:2,few:3,many:4,other:5};function VE(){const t={};return UE.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:XE[e.fc]}})}),t}class YE{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=qn.create("pluralResolver"),(!this.options.compatibilityJSON||WE.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=VE()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Fs(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch(i){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((a,s)=>Vg[a]-Vg[s]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):i.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,i);return a?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const i=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const s=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!HE.includes(this.options.compatibilityJSON)}}function Yg(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=PE(t,e,n);return!s&&a&&typeof n=="string"&&(s=lc(t,n,i),s===void 0&&(s=lc(e,n,i))),s}class qE{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qn.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:LE,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?po(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?po(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?po(n.nestingPrefix):n.nestingPrefixEscaped||po("$t("),this.nestingSuffix=n.nestingSuffix?po(n.nestingSuffix):n.nestingSuffixEscaped||po(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,i)=>n&&n.source===i?(n.lastIndex=0,n):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,i,a){let s,l,c;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function d(b){return b.replace(/\$/g,"$$$$")}const g=b=>{if(b.indexOf(this.formatSeparator)<0){const S=Yg(n,h,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,i,Mt(Z(Z({},a),n),{interpolationkey:b})):S}const O=b.split(this.formatSeparator),C=O.shift().trim(),w=O.join(this.formatSeparator).trim();return this.format(Yg(n,h,C,this.options.keySeparator,this.options.ignoreJSONStructure),w,i,Mt(Z(Z({},a),n),{interpolationkey:C}))};this.resetRegExp();const v=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>d(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?d(this.escape(b)):d(b)}].forEach(b=>{for(c=0;s=b.regex.exec(e);){const O=s[1].trim();if(l=g(O),l===void 0)if(typeof v=="function"){const w=v(e,s,a);l=typeof w=="string"?w:""}else if(a&&Object.prototype.hasOwnProperty.call(a,O))l="";else if(p){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${O} for interpolating ${e}`),l="";else typeof l!="string"&&!this.useRawValueToEscape&&(l=zg(l));const C=b.safeValue(l);if(e=e.replace(s[0],C),p?(b.regex.lastIndex+=l.length,b.regex.lastIndex-=s[0].length):b.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,s,l;function c(h,d){const g=this.nestingOptionsSeparator;if(h.indexOf(g)<0)return h;const v=h.split(new RegExp(`${g}[ ]*{`));let p=`{${v[1]}`;h=v[0],p=this.interpolate(p,l);const b=p.match(/'/g),O=p.match(/"/g);(b&&b.length%2===0&&!O||O.length%2!==0)&&(p=p.replace(/'/g,'"'));try{l=JSON.parse(p),d&&(l=Z(Z({},d),l))}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,C),`${h}${g}${p}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,h}for(;a=this.nestingRegexp.exec(e);){let h=[];l=Z({},i),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let d=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const g=a[1].split(this.formatSeparator).map(v=>v.trim());a[1]=g.shift(),h=g,d=!0}if(s=n(c.call(this,a[1].trim(),l),l),s&&a[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=zg(s)),s||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),s=""),d&&(s=h.reduce((g,v)=>this.format(g,v,i.lng,Mt(Z({},i),{interpolationkey:a[1].trim()})),s.trim())),e=e.replace(a[0],s),this.regexp.lastIndex=0}return e}}function KE(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(s=>{if(!s)return;const[l,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,"");n[l.trim()]||(n[l.trim()]=h),h==="false"&&(n[l.trim()]=!1),h==="true"&&(n[l.trim()]=!0),isNaN(h)||(n[l.trim()]=parseInt(h,10))})}return{formatName:e,formatOptions:n}}function vo(t){const e={};return function(n,i,a){const s=i+JSON.stringify(a);let l=e[s];return l||(l=t(Fs(i),a),e[s]=l),l(n)}}class GE{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qn.create("formatter"),this.options=e,this.formats={number:vo((n,i)=>{const a=new Intl.NumberFormat(n,Z({},i));return s=>a.format(s)}),currency:vo((n,i)=>{const a=new Intl.NumberFormat(n,Mt(Z({},i),{style:"currency"}));return s=>a.format(s)}),datetime:vo((n,i)=>{const a=new Intl.DateTimeFormat(n,Z({},i));return s=>a.format(s)}),relativetime:vo((n,i)=>{const a=new Intl.RelativeTimeFormat(n,Z({},i));return s=>a.format(s,i.range||"day")}),list:vo((n,i)=>{const a=new Intl.ListFormat(n,Z({},i));return s=>a.format(s)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=vo(n)}format(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((s,l)=>{const{formatName:c,formatOptions:h}=KE(l);if(this.formats[c]){let d=s;try{const g=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},v=g.locale||g.lng||a.locale||a.lng||i;d=this.formats[c](s,v,Z(Z(Z({},h),a),g))}catch(g){this.logger.warn(g)}return d}else this.logger.warn(`there was no format function for ${c}`);return s},e)}}function JE(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class QE extends Ms{constructor(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=i,this.languageUtils=i.languageUtils,this.options=a,this.logger=qn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,a.backend,a)}queueLoad(e,n,i,a){const s={},l={},c={},h={};return e.forEach(d=>{let g=!0;n.forEach(v=>{const p=`${d}|${v}`;!i.reload&&this.store.hasResourceBundle(d,v)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?l[p]===void 0&&(l[p]=!0):(this.state[p]=1,g=!1,l[p]===void 0&&(l[p]=!0),s[p]===void 0&&(s[p]=!0),h[v]===void 0&&(h[v]=!0)))}),g||(c[d]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(h)}}loaded(e,n,i){const a=e.split("|"),s=a[0],l=a[1];n&&this.emit("failedLoading",s,l,n),i&&this.store.addResourceBundle(s,l,i,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const c={};this.queue.forEach(h=>{IE(h.loaded,[s],l),JE(h,e),n&&h.errors.push(n),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(d=>{c[d]||(c[d]={});const g=h.loaded[d];g.length&&g.forEach(v=>{c[d][v]===void 0&&(c[d][v]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(h=>!h.done)}read(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:i,tried:a,wait:s,callback:l});return}this.readingCalls++;const c=(d,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(d&&g&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,i,a+1,s*2,l)},s);return}l(d,g)},h=this.backend[i].bind(this.backend);if(h.length===2){try{const d=h(e,n);d&&typeof d.then=="function"?d.then(g=>c(null,g)).catch(c):c(null,d)}catch(d){c(d)}return}return h(e,n,c)}prepareLoading(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,i,a);if(!s.toLoad.length)return s.pending.length||a(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(e,n,i){this.prepareLoading(e,n,{},i)}reload(e,n,i){this.prepareLoading(e,n,{reload:!0},i)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),a=i[0],s=i[1];this.read(a,s,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${n}loading namespace ${s} for language ${a} failed`,l),!l&&c&&this.logger.log(`${n}loaded namespace ${s} for language ${a}`,c),this.loaded(e,l,c)})}saveMissing(e,n,i,a,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${i}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const h=Mt(Z({},l),{isUpdate:s}),d=this.backend.create.bind(this.backend);if(d.length<6)try{let g;d.length===5?g=d(e,n,i,a,h):g=d(e,n,i,a),g&&typeof g.then=="function"?g.then(v=>c(null,v)).catch(c):c(null,g)}catch(g){c(g)}else d(e,n,i,a,c,h)}!e||!e[0]||this.store.addResource(e[0],n,i,a)}}}function qg(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(i=>{e[i]=n[i]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Kg(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Us(){}function ZE(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class pa extends Ms{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Kg(e),this.services={},this.logger=qn,this.modules={external:[]},ZE(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(i=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=qg();this.options=Z(Z(Z({},a),this.options),Kg(n)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Z(Z({},a.interpolation),this.options.interpolation)),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?qn.init(s(this.modules.logger),this.options):qn.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=GE);const d=new Wg(this.options);this.store=new Ug(this.options.resources,this.options);const g=this.services;g.logger=qn,g.resourceStore=this.store,g.languageUtils=d,g.pluralResolver=new YE(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(g.formatter=s(h),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new qE(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new QE(s(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(v){for(var p=arguments.length,b=new Array(p>1?p-1:0),O=1;O<p;O++)b[O-1]=arguments[O];e.emit(v,...b)}),this.modules.languageDetector&&(g.languageDetector=s(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=s(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Bs(this.services,this.options),this.translator.on("*",function(v){for(var p=arguments.length,b=new Array(p>1?p-1:0),O=1;O<p;O++)b[O-1]=arguments[O];e.emit(v,...b)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Us),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const l=da(),c=()=>{const h=(d,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(g),i(d,g)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Us;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],s=l=>{!l||l==="cimode"||this.services.languageUtils.toResolveHierarchy(l).forEach(c=>{c!=="cimode"&&a.indexOf(c)<0&&a.push(c)})};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>s(l)),this.options.preload&&this.options.preload.forEach(l=>s(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,n,i){const a=da();return e||(e=this.languages),n||(n=this.options.ns),i||(i=Us),this.services.backendConnector.reload(e,n,s=>{a.resolve(),i(s)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Xg.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const i=this.languages[n];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,n){var i=this;this.isLanguageChangingTo=e;const a=da();this.emit("languageChanging",e);const s=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,d)=>{d?(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,a.resolve(function(){return i.t(...arguments)}),n&&n(h,function(){return i.t(...arguments)})},c=h=>{!e&&!h&&this.services.languageDetector&&(h=[]);const d=typeof h=="string"?h:this.services.languageUtils.getBestMatchFromCodes(h);d&&(this.language||s(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,g=>{l(g,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),a}getFixedT(e,n,i){var a=this;const s=function(l,c){let h;if(typeof c!="object"){for(var d=arguments.length,g=new Array(d>2?d-2:0),v=2;v<d;v++)g[v-2]=arguments[v];h=a.options.overloadTranslationOptionHandler([l,c].concat(g))}else h=Z({},c);h.lng=h.lng||s.lng,h.lngs=h.lngs||s.lngs,h.ns=h.ns||s.ns,h.keyPrefix=h.keyPrefix||i||s.keyPrefix;const p=a.options.keySeparator||".";let b;return h.keyPrefix&&Array.isArray(l)?b=l.map(O=>`${h.keyPrefix}${p}${O}`):b=h.keyPrefix?`${h.keyPrefix}${p}${l}`:l,a.t(b,h)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=i,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const l=(c,h)=>{const d=this.services.backendConnector.state[`${c}|${h}`];return d===-1||d===2};if(n.precheck){const c=n.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(i,e)&&(!a||l(s,e)))}loadNamespaces(e,n){const i=da();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{i.resolve(),n&&n(a)}),i):(n&&n(),Promise.resolve())}loadLanguages(e,n){const i=da();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],s=e.filter(l=>a.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=a.concat(s),this.loadResources(l=>{i.resolve(),n&&n(l)}),i):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Wg(qg());return n.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new pa(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Us;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const a=Mt(Z(Z({},this.options),e),{isClone:!0}),s=new pa(a);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services=Z({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i&&(s.store=new Ug(this.store.data,a),s.services.resourceStore=s.store),s.translator=new Bs(s.services,a),s.translator.on("*",function(l){for(var c=arguments.length,h=new Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];s.emit(l,...h)}),s.init(a,n),s.translator.options=a,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Se=pa.createInstance();Se.createInstance=pa.createInstance,Se.createInstance,Se.dir,Se.init,Se.loadResources,Se.reloadResources,Se.use,Se.changeLanguage,Se.getFixedT,Se.t,Se.exists,Se.setDefaultNamespace,Se.hasLoadedNamespace,Se.loadNamespaces,Se.loadLanguages;const tO={bottomAlign:"\u4E0B\u5BF9\u9F50",center:"\u5C45\u4E2D",cutPic:"\u622A\u56FE",delete:"\u5220\u9664",deleteDataTopic:"\u5220\u9664\u8BE5\u8282\u70B9\u4F1A\u628A\u5B50\u8282\u70B9\u4E00\u5E76\u5220\u9664!",edge:"\u8FDE\u7EBF",exitFullScreen:"\u9000\u51FA\u5168\u5C4F","flow-chart":"\u6D41\u7A0B\u56FE",fullScreen:"\u5168\u5C4F",horizonAlign:"\u6C34\u5E73\u5C45\u4E2D\u5BF9\u9F50",horizonCenter:"\u6C34\u5E73\u5C45\u4E2D",horizonLayout:"\u6A2A\u5411\u5E03\u5C40",leftAlign:"\u5DE6\u5BF9\u9F50",locationEle:"\u5B9A\u4F4D\u5143\u7D20",more:"\u66F4\u591A",marquee:"\u6846\u9009(Alt+\u9F20\u6807\u62D6\u62FD)",node:"\u8282\u70B9",rightAlign:"\u53F3\u5BF9\u9F50",starLayout:"\u661F\u578B\u5E03\u5C40",sureDelete:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8282\u70B9\u6216\u8FDE\u7EBF\u5417?",tileCenter:"\u5E73\u94FA\u5C45\u4E2D",topAlign:"\u4E0A\u5BF9\u9F50",verticalAlign:"\u5782\u76F4\u5C45\u4E2D\u5BF9\u9F50",verticalCenter:"\u5782\u76F4\u5C45\u4E2D",verticalLayout:"\u7EB5\u5411\u5E03\u5C40",withdrawn:"\u64A4\u56DE(ctrl+z)",zoomIn:"\u653E\u5927",zoomOut:"\u7F29\u5C0F",pleaseSelectAtLeastTwoNodes:"\u8BF7\u81F3\u5C11\u9009\u62E9\u4E24\u4E2A\u8282\u70B9",pleaseSelectAtLeastOneNode:"\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u8282\u70B9",resource:"\u8D44\u6E90"},eO={translation:tO},nO={bottomAlign:"Bottom Align",center:"Center",cutPic:"Capture",delete:"Delete",deleteDataTopic:"Deleting this node removes the child nodes along with it!",edge:"Edge",exitFullScreen:"Exit Full Screen","flow-chart":"flow-chart",fullScreen:"Full Screen",horizonAlign:"Horizon center Align",horizonCenter:"Horizon center",horizonLayout:"Horizon Layout",leftAlign:"Left Align",locationEle:"Location Element",more:"more",marquee:"Marquee(Alt+Drag)",node:"Node",rightAlign:"Right Align",starLayout:"Star Layout",sureDelete:"Sure delete node or edges?",tileCenter:"Tile Center",topAlign:"Top Align",verticalAlign:"Vertical Center Align",verticalCenter:"Vertical Center",verticalLayout:"Vertical Layout",withdrawn:"withdrawn(ctrl+z)",zoomIn:"zoom in",zoomOut:"zoom out",pleaseSelectAtLeastTwoNodes:"Please select at least two nodes",pleaseSelectAtLeastOneNode:"Please select at least one nodes",resource:"resource"},rO={translation:nO},iO={zh:eO,en:rO};Se.use(m_).init({resources:iO,lng:"zh",fallbackLng:"zh",interpolation:{escapeValue:!1}});const Gg=(0,E.forwardRef)((t,e)=>{const{style:n,className:i,hideTools:a,canvasClassName:s,canvasStyle:l,onLoad:c,hideGrid:h,hideDragBox:d,children:g}=t,{toolsChild:v,dragBoxChild:p,restChilds:b}=AE(g),O=()=>!a&&(v||W.jsx(Yn,{})),C=()=>!d&&(p||W.jsx(uc,{}));return W.jsx(km,{backend:xy,children:W.jsxs("div",{tabIndex:-1,style:n,className:le("fiagram",i,{hideTools:a}),children:[W.jsx(O,{}),W.jsx(C,{}),W.jsx(vE,Z({ref:e,onLoad:c,hideGrid:h,restChilds:b,canvasStyle:l,className:s},t))]})})});Gg.displayName="Diagram"}}]);
}());